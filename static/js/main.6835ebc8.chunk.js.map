{"version":3,"sources":["components/Navbar/ManageList/FilterMenu/FilterMenu.jsx","components/Navbar/ManageList/SortMenu/SortMenu.jsx","components/Navbar/ManageList/SearchBar/SearchBar.jsx","components/Navbar/ManageList/ManageList.jsx","components/Common/utilites.js","components/Navbar/RidesListItem/RidesListItem.jsx","components/Navbar/Navbar.jsx","components/Infobar/InfobarRideMembers/InfobarRideMembers.jsx","components/Infobar/InfobarRideIndicators/InfobarRideIndicators.jsx","components/Infobar/InfobarGallery/InfobarGallery.jsx","components/Infobar/InfobarRiderCard/InfobarRiderCard.jsx","components/Infobar/InfobarRiderCard/InfobarRiderCardContainer.jsx","components/Infobar/Infobar.jsx","components/Infobar/InfobarContainer.jsx","components/Infobar/InfobarCollapseBtn/InfobarCollapseBtn.jsx","components/Common/checkMobile.js","components/MobileHeader/MobileHeader.jsx","components/MobileNavbar/MobileNavbar.jsx","components/Map/Map.jsx","components/Modal/ModalPhoto/ModalPhoto.jsx","components/Common/routing.js","App.js","store/bikers-data.js","store/rides-data.js","components/Common/search.js","store/store.js","index.js"],"names":["FilterMenuItem","props","id","className","isActive","src","img","alt","name","FilterMenu","filterMenuItems","allBikers","map","b","filteredBikers","find","photoSmall","onClick","e","target","closest","action","type","bikerId","dataset","dispatch","SortMenuItem","sort2","sort1","SortMenu","sortParameter","sortFromBiggest","checkActive","parameter","sortArr","classList","contains","s","SearchBar","autoFocus","placeholder","value","searchValue","onChange","payload","ManageList","filterMenuIsOpened","navbar","searchMenuIsOpened","sortMenuIsOpened","filterAdditionalInfo","bikers","output","length","toggleButton","toggleFilterMenu","toggleSearchMenu","toggleSortMenu","convertStrToMs","str","timeArr","split","convertMsToStr","ms","hours","Math","floor","minutes","addZero","num","separateDecimal","accuracy","push","toFixed","slice","bikersFilter","members","filter","findIndex","item","MemberPic","long","MembersPicFor3","m","RideListItemMembersPhotos","RidesListItem","date","Date","dateString","getDate","getMonth","getFullYear","returnAdditionalInfo","info","distance","unit","speed","decimal","time","to","url","active","Logo","RidesListSeparator","param","separatorText","currEl","prevEl","currElDate","startDate","prevElDate","currSpeed","cleanTime","prevSpeed","currTime","prevTime","getSeparatorText","separatorUnit","RidesListItems","activeStatus","i","state","activeRide","layout","isMobile","mobileNavbarWasTouched","noResultsFound","processedRides","r","arr","averageSpeed","ScrollButton","direction","display","handleFunction","Navbar","React","useState","isTop","setIsTop","isBottom","setIsBottom","ridesListWrapper","useRef","onScroll","checkTop","current","scrollTop","checkBottom","offsetHeight","scrollHeight","ref","scrollTopMax","RideMemberItem","Image","photoLarge","RideMembers","rideMembersItems","RideIndicatorItem","integer","RideIndicators","ride","startTime","getHours","getMinutes","climb","fullTime","GalleryPhoto","InfobarGallery","photos","galleryItems","p","number","InfobarRiderCardStatsItem","InfobarRiderCard","isOpened","period","ridesCount","totalDistance","closeRiderCard","outputPeriod","InfobarRiderCardContainer","rides","riderCard","useEffect","infobarHeight","document","querySelector","style","top","riderCardCloseHandler","addEventListener","removeEventListener","activeRiderId","rider","activeRider","ridesWithThisRider","activeYears","firstAndLastActiveYears","includes","sort","round","reduce","sum","RideHeader","handlers","useSwipeable","onSwiped","eventData","dir","preventDefaultTouchmoveEvent","href","strava","rel","Infobar","isCollapsed","infobarEl","infobarSwipe","onSwipeStart","stravaLink","InfobarContainer","membersNames","infobar","CollapseInfobarBtn","checkMobile","window","innerWidth","mobile","BurgerBtn","navbarIsOpen","MobileHeader","headerOnClick","MobileNavbar","navbarIsOpened","mobileNavbarIsOpen","onSwipedLeft","rerenderMap","loadingSpinner","containerHeight","documentElement","clientHeight","mapUrl","replace","mapEl","innerHTML","match","script","createElement","async","appendChild","onload","observer","MutationObserver","firstChild","height","disconnect","setTimeout","observe","childList","errorMessage","add","Map","this","PureComponent","ModalPhoto","closeModal","modal","ontransitionend","openPrev","openNext","swipeClose","spinner","imgEl","remove","routeWithUrl","urlValidity","checkUrlValidity","App","store","getState","bind","nextRenderUrl","location","pathname","onResise","activeRideIndex","searchWords","createKeywords","words","nameWords","word","test","year","keywords","toLowerCase","Set","findMatchedObjects","search","objects","obj","findSubsringInArray","substr","found","findSubstring","string","indexOf","_state","lastSuccededSearchActiveFirstIndex","_callSubscriber","subscribe","_processRides","tempArr","sortRides","a","tempArrFiltered","biker","member","checkBikers","searchResults","currentObjects","findSeveralWords","lastActiveRideIndex","index","el","filterIndex","splice","console","error","initState","forEach","initBikers","join","parse","initRides","rerenderEntireTree","ReactDOM","render","StrictMode","path","getElementById"],"mappings":"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","file":"static/js/main.6835ebc8.chunk.js","sourcesContent":["import React from \"react\"\r\nimport './FilterMenu.scss'\r\n\r\nconst FilterMenuItem = (props) => {\r\n   return (\r\n      <li data-biker-id={props.id} className={\"filter_menu_item\" + (props.isActive ? ' active' : '')}>\r\n         <div className=\"filter_menu_item__img\">\r\n            <img src={props.img} alt={props.name} />\r\n         </div>\r\n         <div className=\"filter_menu_item__name\">Mr. {props.name}</div>\r\n      </li>\r\n   )\r\n}\r\n\r\nconst FilterMenu = (props) => {\r\n   const changeFilter = (e) => {\r\n      if (!e.target.closest('.filter_menu_item')) {\r\n         return\r\n      }\r\n      const clickedBiker = e.target.closest('.filter_menu_item').dataset.bikerId\r\n      const action = {\r\n         type: 'TOGGLE-FILTERED-BIKER',\r\n         bikerId: clickedBiker\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n   const checkActive = (id) => {\r\n      if (props.filteredBikers.find(b => b === id)) {\r\n         return true\r\n      } else {\r\n         return false\r\n      }\r\n   }\r\n\r\n   const filterMenuItems = props.allBikers\r\n      .map(b => <FilterMenuItem id={b.id} key={b.id} isActive={checkActive(b.id)}\r\n         name={b.name} img={b.photoSmall} />)\r\n\r\n   return (\r\n      <ul onClick={changeFilter} className=\"filter_menu_items\" >\r\n         {filterMenuItems}\r\n      </ul>\r\n   )\r\n}\r\n\r\nexport default FilterMenu","import React from \"react\"\r\nimport './SortMenu.scss'\r\n\r\nconst SortMenuItem = (props) => {\r\n   return (\r\n      <li>\r\n         <div data-sort-parameter={props.type} className={`sort_menu_popup_item${props.isActive ? ' ' + props.isActive : ''}`}>\r\n            <div className=\"sort_menu_popup_item__name\">{props.name}</div>\r\n            <button className=\"sort_menu_popup_item__btn smallest\">{props.sort2}</button>\r\n            <button className=\"sort_menu_popup_item__btn biggest\">{props.sort1}</button>\r\n         </div>\r\n      </li>\r\n   )\r\n}\r\n\r\nconst SortMenu = (props) => {\r\n   const sortParameter = props.sortParameter\r\n   const sortFromBiggest = props.sortFromBiggest\r\n\r\n   const changeSort = (e) => {\r\n      if (e.target.classList.contains('sort_menu_popup_item__btn')) {\r\n         const sortParameter = e.target.closest('.sort_menu_popup_item').dataset.sortParameter\r\n         const sortFromBiggest = e.target.classList.contains('biggest')\r\n         const action = {\r\n            type: 'TOGGLE-RIDES-SORT',\r\n            sortParameter: sortParameter,\r\n            sortFromBiggest: sortFromBiggest\r\n         }\r\n         props.dispatch(action)\r\n      }\r\n   }\r\n\r\n   const checkActive = (parameter) => {\r\n      if (sortParameter === parameter) {\r\n         if (sortFromBiggest) {\r\n            return 'fromBiggest'\r\n         } else {\r\n            return 'fromSmallest'\r\n         }\r\n      } else {\r\n         return false\r\n      }\r\n   }\r\n\r\n   const sortArr = [\r\n      {\r\n         name: 'By date:',\r\n         type: 'date',\r\n         sort1: 'Latest',\r\n         sort2: 'Oldest',\r\n         isActive: checkActive('date')\r\n      },\r\n      {\r\n         name: 'By distance:',\r\n         type: 'distance',\r\n         sort1: 'Longest',\r\n         sort2: 'Shortest',\r\n         isActive: checkActive('distance')\r\n      },\r\n      {\r\n         name: 'By average speed:',\r\n         type: 'speed',\r\n         sort1: 'Fastest',\r\n         sort2: 'Slowest',\r\n         isActive: checkActive('speed')\r\n      },\r\n      {\r\n         name: 'By riding time:',\r\n         type: 'time',\r\n         sort1: 'Longest',\r\n         sort2: 'Shortest',\r\n         isActive: checkActive('time')\r\n      },\r\n   ]\r\n\r\n   return (\r\n      <ul onClick={changeSort} >\r\n         {sortArr.map(s => <SortMenuItem key={s.type} name={s.name} type={s.type} \r\n            sort1={s.sort1} sort2={s.sort2} isActive={s.isActive} />)}\r\n      </ul>\r\n   )\r\n}\r\n\r\nexport default SortMenu","import React from \"react\"\r\nimport './SearchBar.scss'\r\n\r\nconst SearchBar = (props) => {\r\n\r\n  const handleSearchValueChange = (e) => {\r\n    const action = {\r\n      type: 'SET-SEARCH-VALUE',\r\n      payload: e.target.value\r\n    }    \r\n    props.dispatch(action)\r\n  }\r\n\r\n  const handleSearchClearBtn = () => {\r\n    const action = {\r\n      type: 'SET-SEARCH-VALUE',\r\n      payload: ''\r\n    }    \r\n    props.dispatch(action)\r\n  }\r\n\r\n  return (\r\n    <div className=\"search_input__wrapper\">\r\n      <input\r\n        autoFocus\r\n        className=\"search_input__input\"\r\n        type=\"text\"\r\n        placeholder=\"Place, road, rider, year, etc.\"\r\n        value={props.searchValue}\r\n        onChange={handleSearchValueChange} />\r\n      <div className=\"search_input__clear_btn_wrapper\">\r\n        <button onClick={handleSearchClearBtn} className=\"search_input__clear_btn\"></button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SearchBar","import React from \"react\"\r\nimport './ManageList.scss'\r\nimport FilterMenu from \"./FilterMenu/FilterMenu\"\r\nimport SortMenu from \"./SortMenu/SortMenu\"\r\nimport SearchBar from \"./SearchBar/SearchBar\"\r\n\r\nconst ManageList = (props) => {\r\n  const filterMenuIsOpened = props.navbar.filterMenuIsOpened\r\n  const searchMenuIsOpened = props.navbar.searchMenuIsOpened\r\n  const sortMenuIsOpened = props.navbar.sortMenuIsOpened\r\n\r\n  const filterAdditionalInfo = () => {\r\n    const bikers = props.bikers\r\n    const filteredBikers = props.navbar.output.filteredBikers\r\n    \r\n    if (filteredBikers.length === bikers.length\r\n      || filteredBikers.length === 0\r\n      || props.navbar.filterMenuIsOpened) {\r\n      return null\r\n    }\r\n    if (props.navbar.output.filteredBikers.length === 1) {\r\n      return `(Mr. ${props.navbar.output.filteredBikers[0]} only)`\r\n    }\r\n    return `(${filteredBikers.length}/${bikers.length})`\r\n  }\r\n\r\n  const toggleButton = (type) => {\r\n    return () => {\r\n      const action = { type: `TOGGLE-${type}-MENU` }\r\n      props.dispatch(action)\r\n    }\r\n  }\r\n  const toggleFilterMenu = toggleButton('FILTER')\r\n  const toggleSearchMenu = toggleButton('SEARCH')\r\n  const toggleSortMenu = toggleButton('SORT')\r\n\r\n  return (\r\n    <>\r\n      <div className=\"manage_list\">\r\n        <div className=\"manage_list__global_buttons\">\r\n          <button\r\n            onClick={toggleSearchMenu}\r\n            className={\"manage_list__btn search_btn\" + (searchMenuIsOpened ? \" active\" : \"\")}>\r\n            <img src=\"./img/magnifying-glass.png\" className=\"manage_list__btn__search_icon\" alt=\"S\" />\r\n          </button>\r\n          <button\r\n            onClick={toggleFilterMenu}\r\n            className={\"manage_list__btn filter_btn\" + (filterMenuIsOpened ? \" active\" : \"\")}>\r\n            <div className=\"manage_list_btn__text\">Filter{filterAdditionalInfo() && ':'}</div>\r\n            <div className=\"filter_btn__description\">{filterAdditionalInfo()}</div>\r\n          </button>\r\n          <button\r\n            onClick={toggleSortMenu}\r\n            className={\"manage_list__btn sort_btn\" + (sortMenuIsOpened ? \" active\" : \"\")}>\r\n            <div className=\"manage_list_btn__text\">Sort</div>\r\n          </button>\r\n        </div>\r\n        <div className=\"manage_list__submenu\">\r\n          <div className={\"navbar_menu_popup search_menu\" + (searchMenuIsOpened && \" opened\")}>\r\n            <SearchBar\r\n              key=\"search_bar\"\r\n              searchValue={props.navbar.output.searchValue}\r\n              dispatch={props.dispatch}\r\n            />\r\n          </div>\r\n          <div className={\"navbar_menu_popup filter_menu\" + (filterMenuIsOpened && \" opened\")}>\r\n            {<FilterMenu\r\n              allBikers={props.bikers}\r\n              filteredBikers={props.navbar.output.filteredBikers}\r\n              dispatch={props.dispatch} />}\r\n          </div>\r\n          <div className={\"navbar_menu_popup sort_menu\" + (sortMenuIsOpened && \" opened\")}>\r\n            <SortMenu\r\n              sortParameter={props.navbar.output.sortParameter}\r\n              sortFromBiggest={props.navbar.output.sortFromBiggest}\r\n              dispatch={props.dispatch} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ManageList","//  DATE FEATURES\r\n\r\nexport const convertStrToDate = (date, time) => {\r\n   return Date.parse(`${date}T${time}:00.000+03:00`)\r\n}\r\n\r\nexport const convertStrToMs = (str) => {\r\n   let timeArr = str.split(':')\r\n   return timeArr[0] * 1000 * 60 * 60 + timeArr[1] * 1000 * 60 + timeArr[2] * 1000\r\n}\r\n\r\nexport const convertMsToStr = (ms) => {\r\n   const hours = Math.floor(ms / 1000 / 60 / 60)\r\n   const minutes = addZero(Math.floor((ms - hours * 1000 * 60 * 60) / 1000 / 60))\r\n   return `${hours}:${minutes}`\r\n}\r\n\r\n// DIGITS FEATURES\r\n\r\nexport const addZero = (num) => {\r\n   if (+num < 10) {\r\n      return '0' + num\r\n   }\r\n   return num\r\n}\r\n\r\nexport const separateDecimal = (num, accuracy = 1) => {\r\n   let output = []\r\n   output.push(Math.floor(num) + '')\r\n   output.push((num.toFixed(accuracy) + '').slice(-accuracy))\r\n   return output\r\n}\r\n\r\n// OTHER\r\n\r\nexport const bikersFilter = (members, allBikers) => {\r\n   return allBikers.filter(b => (members.findIndex(item => item === b.name) >= 0))\r\n}\r\n","import React from \"react\"\r\nimport './RidesListItem.scss'\r\nimport { addZero, bikersFilter, separateDecimal } from \"../../Common/utilites\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\n\r\nconst MemberPic = (props) => {\r\n   return (\r\n      <img src={props.photoSmall} alt={props.name} \r\n         className={`rides_list_item__member_pic${props.long ? ' long' : ''}`} />\r\n   )\r\n}\r\n\r\nconst MembersPicFor3 = (props) => {\r\n   const m = props.members\r\n   return (\r\n      <>\r\n         <div>\r\n            <MemberPic photoSmall={m[0].photoSmall} name={m[0].name} long={true} />\r\n         </div>\r\n         <div>\r\n            <MemberPic photoSmall={m[1].photoSmall} name={m[1].name}/>\r\n            <MemberPic photoSmall={m[2].photoSmall} name={m[2].name}/>\r\n         </div>\r\n      </>\r\n   )\r\n}\r\n\r\nconst RideListItemMembersPhotos = (props) => {\r\n   const members = bikersFilter(props.members, props.allBikers)\r\n   let membersPics\r\n   if (members.length === 3) {\r\n      return <MembersPicFor3 members={members} />\r\n   } else if (members.length === 2) {\r\n      membersPics = members.map(m => <MemberPic \r\n         key={m.name}\r\n         photoSmall={m.photoSmall} \r\n         name={m.name} \r\n         long={true} />)\r\n   } else {\r\n      membersPics = members.map(m => <MemberPic \r\n         key={m.name}\r\n         photoSmall={m.photoSmall} \r\n         name={m.name} />)\r\n   }\r\n   return membersPics\r\n}\r\n\r\nconst RidesListItem = (props) => {\r\n   const date = new Date(props.date)\r\n   const dateString = props.sortParameter === 'date'\r\n   ? `${addZero(date.getDate())}.${addZero(date.getMonth() + 1)}`\r\n   : `${addZero(date.getDate())}.${addZero(date.getMonth() + 1)}.${date.getFullYear()}`\r\n\r\n   const returnAdditionalInfo = () => {\r\n      let info = {}\r\n      if (props.sortParameter === 'date' || props.sortParameter === 'distance') {\r\n         info.value = Math.floor(props.distance)\r\n         info.unit = 'km'\r\n      } else if (props.sortParameter === 'speed') {\r\n         info.value = separateDecimal(props.speed)[0] + '.'\r\n         info.decimal = separateDecimal(props.speed)[1]\r\n         info.unit = 'km/h'\r\n      } else if (props.sortParameter === 'time') {\r\n         info.decimal = separateDecimal(props.time / 1000 / 60 / 60)[1] > 5 ? 5 : ''\r\n         info.value = Math.floor(props.time / 1000 / 60 / 60) + (info.decimal > 0 ? '.' : '')\r\n         info.unit = 'h'\r\n      }\r\n      return info\r\n   }\r\n\r\n   const closeMobileNavbar = () => {\r\n      const action = {\r\n         type: 'TOGGLE-MOBILE-MENU'\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n\r\n   return (\r\n      <div onClick={closeMobileNavbar} className=\"rides_list_item\">\r\n         <Link to={props.url}>\r\n            <div className={`rides_list_item__container ${props.active ? ' active' : ''}`}>\r\n               <div className=\"rides_list_item__left\">\r\n                  <div className=\"rides_list_item__members\">\r\n                     <RideListItemMembersPhotos members={props.members} allBikers={props.allBikers} />\r\n                  </div>\r\n               </div>\r\n               <div className=\"rides_list_item__center\">\r\n                  <div className=\"rides_list_item__name\">{props.name}</div>\r\n                  <div className=\"rides_list_item__date\">{dateString}</div>\r\n               </div>\r\n               <div className=\"rides_list_item__right\">\r\n                  <div className=\"rides_list_item__distance\">\r\n                     <div className=\"rides_list_item__distance_num\">\r\n                        {returnAdditionalInfo().value}<span className=\"decimal\">{returnAdditionalInfo().decimal}</span>\r\n                     </div>\r\n                     <div className=\"rides_list_item__distance_unit\">\r\n                        {returnAdditionalInfo().unit}\r\n                     </div>\r\n                  </div>\r\n               </div>\r\n            </div>\r\n         </Link>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default RidesListItem","import React from \"react\"\r\nimport ManageList from \"./ManageList/ManageList\"\r\nimport './Navbar.scss'\r\nimport RidesListItem from \"./RidesListItem/RidesListItem\"\r\n\r\nexport const Logo = (props) => {\r\n   return (\r\n      <div className=\"header_logo\">\r\n         <h1>Rides history</h1>\r\n      </div>\r\n   )\r\n}\r\n\r\nconst RidesListSeparator = (props) => {\r\n   const getSeparatorText = (currEl, prevEl, param) => {\r\n      switch (param) {\r\n         case 'date':\r\n            const currElDate = new Date(currEl.startDate)\r\n            const prevElDate = prevEl ? new Date(prevEl.startDate) : null\r\n            if (!prevElDate) {\r\n               return currElDate.getFullYear()\r\n            } else if (prevElDate.getFullYear() !== currElDate.getFullYear()) {\r\n               return currElDate.getFullYear()\r\n            }\r\n            break\r\n         case 'distance':\r\n            if (!prevEl) {\r\n               return currEl.distance < 50 ? '<50' : (currEl.distance > 100 ? '>100' : '50-100')\r\n            }\r\n            if ((prevEl.distance < 50 && currEl.distance > 50) || (prevEl.distance > 100 && currEl.distance < 100)) {\r\n               return '50-100'\r\n            }\r\n            if (prevEl.distance > 50 && currEl.distance < 50) {\r\n               return '<50'\r\n            }\r\n            if (prevEl.distance < 100 && currEl.distance > 100) {\r\n               return '>100'\r\n            }\r\n            break\r\n         case 'speed':\r\n            const currSpeed = currEl.distance / currEl.cleanTime * 1000 * 60 * 60\r\n            const prevSpeed = prevEl ? prevEl.distance / prevEl.cleanTime * 1000 * 60 * 60 : null\r\n            if (!prevEl) {\r\n               return currSpeed < 15 ? '<15' : ( currSpeed > 18 ? '>18' : '15-18')\r\n            }\r\n            if ((prevSpeed < 15 && currSpeed > 15) || (prevSpeed > 18 && currSpeed < 18)) {\r\n               return '15-18'\r\n            }\r\n            if (prevSpeed > 15 && currSpeed < 15) {\r\n               return '<15'\r\n            }\r\n            if (prevSpeed < 18 && currSpeed > 18) {\r\n               return '>18'\r\n            }\r\n            break\r\n         case 'time':\r\n            const currTime = currEl.cleanTime / 1000 / 60 / 60\r\n            const prevTime = prevEl ? prevEl.cleanTime / 1000 / 60 / 60 : null\r\n            if (!prevEl) {\r\n               return currTime < 4 ? '<4' : (currTime > 7 ? '>7' : '4-7')\r\n            }\r\n            if ((prevTime < 4 && currTime > 4) || (prevTime > 7 && currTime < 7)) {\r\n               return '4-7'\r\n            }\r\n            if (prevTime > 4 && currTime < 4) {\r\n               return '<4'\r\n            }\r\n            if (prevTime < 7 && currTime > 7) {\r\n               return '>7'\r\n            }\r\n            break\r\n         default:\r\n            return null\r\n      }\r\n   }\r\n   const getSeparatorUnit = (param) => {\r\n      if (param === 'date') return null\r\n      if (param === 'distance') return 'km'\r\n      if (param === 'speed') return 'km/h'\r\n      if (param === 'time') return 'h'\r\n   }\r\n\r\n   const separatorText = getSeparatorText(props.currEl, props.prevEl, props.sortParameter)\r\n   const separatorUnit = getSeparatorUnit(props.sortParameter)\r\n   if (separatorText) {\r\n      return (\r\n         <div className='rides_list_separator'>\r\n            {separatorText} <span className=\"rides_list_separator__unit\">{separatorUnit}</span>\r\n         </div>\r\n      )\r\n   } else return null\r\n}\r\n\r\nconst RidesListItems = (props) => {\r\n\r\n  const activeStatus = (i) => {\r\n    if (props.state.activeRide !== i) return false\r\n\r\n    if (props.state.layout.isMobile) {\r\n      return props.state.layout.mobileNavbarWasTouched ? true : false\r\n    } else {\r\n      return true\r\n    }\r\n  }\r\n\r\n  if (props.state.navbar.noResultsFound) {\r\n    return (\r\n      <div className=\"rides_list__no_results\">\r\n        No results found...\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return props.state.processedRides\r\n    .map((r, i, arr) => {\r\n      return ( <li key={r.url}>\r\n      <RidesListSeparator \r\n        currEl={r}\r\n        prevEl={arr[i - 1]}\r\n        sortParameter={props.state.navbar.output.sortParameter} />\r\n\r\n      <RidesListItem \r\n        dispatch={props.dispatch}\r\n        id={r.id}\r\n        url={r.url}\r\n        key={r.id} \r\n        name={r.name}\r\n        date={r.startDate}\r\n        distance={r.distance}\r\n        speed={r.averageSpeed}\r\n        time={r.cleanTime}\r\n        members={r.members}\r\n        allBikers={props.state.bikers}\r\n        sortParameter={props.state.navbar.output.sortParameter}\r\n        // active={props.state.activeRide === i ? true : false}\r\n        active={activeStatus(i)}\r\n      />\r\n      </li>)\r\n    }\r\n  )\r\n}\r\n\r\nconst ScrollButton = ({ direction, display, handleFunction }) => {\r\n   return (\r\n      <div className={`to_${direction}_btn_wrapper${display ? \"\" : \" hide\"}`}>\r\n         <button onClick={handleFunction} className={`to_${direction}_btn`}></button>\r\n      </div>\r\n   )\r\n}\r\n\r\nconst Navbar = (props) => {\r\n   const [isTop, setIsTop] = React.useState(true)\r\n   const [isBottom, setIsBottom] = React.useState(false)\r\n   const isMobile = props.state.layout.isMobile\r\n   const ridesListWrapper = React.useRef(null)\r\n   const scrollHandler = (e) => {\r\n      if (isMobile) return\r\n      const checkTop = ridesListWrapper.current.scrollTop < 50\r\n      const checkBottom = ridesListWrapper.current.scrollTop + ridesListWrapper.current.offsetHeight > ridesListWrapper.current.scrollHeight - 50\r\n      checkTop ? setIsTop(true) : setIsTop(false)\r\n      checkBottom ? setIsBottom(true) : setIsBottom(false)\r\n\r\n   }\r\n\r\n   const scrollUp = () => {\r\n      if (ridesListWrapper.current.scrollTop < ridesListWrapper.current.offsetHeight) {\r\n         ridesListWrapper.current.scrollTop = 0\r\n      } else {\r\n         ridesListWrapper.current.scrollTop = ridesListWrapper.current.scrollTop - ridesListWrapper.current.offsetHeight + 80\r\n      }\r\n   }\r\n   const scrollDown = () => {\r\n      if (ridesListWrapper.current.scrollTop + ridesListWrapper.current.offsetHeight > ridesListWrapper.current.scrollTopMax) {\r\n         ridesListWrapper.current.scrollTop = ridesListWrapper.current.scrollTopMax\r\n      } else {\r\n         ridesListWrapper.current.scrollTop += ridesListWrapper.current.offsetHeight - 80\r\n      }\r\n   }\r\n\r\n   const listClickHandler = (e) => {\r\n     if (e.target.closest('.rides_list_item')) {\r\n       const action = { type: 'TOGGLE-NAVBAR-TOUCHED' }\r\n       props.dispatch(action)\r\n     }\r\n   }\r\n\r\n   return (\r\n      <div className=\"navbar\">\r\n         <Logo />\r\n         <ManageList bikers={props.state.bikers} navbar={props.state.navbar} dispatch={props.dispatch} />\r\n         <div onScroll={scrollHandler} ref={ridesListWrapper} className=\"riders_list_wrapper\">\r\n            <ScrollButton direction=\"top\" display={!isTop && !isMobile} handleFunction={scrollUp} />\r\n            <ul onClick={listClickHandler} className=\"rides_list\">\r\n               <RidesListItems state={props.state} dispatch={props.dispatch} />\r\n            </ul>\r\n         </div>\r\n         <div className=\"right_border\"></div>\r\n         <ScrollButton direction=\"bottom\" display={!isBottom && !isMobile} handleFunction={scrollDown} />\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default Navbar;","import React from \"react\"\r\nimport './InfobarRideMembers.scss'\r\n\r\nconst RideMemberItem = (props) => {\r\n  const img = new Image()\r\n  img.src = props.photoLarge\r\n  return (\r\n    <ul className=\"ride_member_item\" data-name={props.name} >\r\n      <div className=\"ride_member_item__photo\">\r\n        <img src={props.photoSmall} alt={`Mr. ${props.name}`} className=\"ride_member_item__photo_img\" />\r\n      </div>\r\n      <div className=\"ride_member_item__name\">Mr. {props.name}</div>\r\n    </ul>\r\n  )\r\n}\r\n\r\nconst RideMembers = (props) => {\r\n  const rideMembersItems = props.members\r\n    .map(m => <RideMemberItem key={m.id} name={m.name}\r\n      photoSmall={m.photoSmall} photoLarge={m.photoLarge} />)\r\n\r\n  const openRiderCard = (e) => {\r\n    if (!e.target.closest('.ride_member_item')) {\r\n      return\r\n    }\r\n\r\n    const name = e.target.closest('.ride_member_item').dataset.name\r\n    const action = {\r\n      type: 'OPEN-RIDER-CARD',\r\n      payload: name\r\n    }\r\n    props.dispatch(action)\r\n\r\n  }\r\n\r\n  return (\r\n    <div onClick={openRiderCard} className=\"ride_members\">\r\n      <h3>Members:</h3>\r\n      <ul className=\"ride_members_items\">\r\n        {rideMembersItems}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RideMembers","import React from \"react\";\r\nimport { addZero, convertMsToStr, separateDecimal } from \"../../Common/utilites\";\r\nimport './InfobarRideIndicators.scss'\r\n\r\nconst RideIndicatorItem = (props) => {\r\n   let integer, decimal\r\n   if (props.decimal) {\r\n      integer = separateDecimal(props.value, props.decimal)[0] + '.'\r\n      decimal = separateDecimal(props.value, props.decimal)[1]\r\n      decimal = integer.length > 3 ? decimal[1] : decimal // cut decimal to 1 digit if integer > 99\r\n   } else {\r\n      integer = props.value\r\n      decimal = ''\r\n   }\r\n   \r\n   return (\r\n      <li className=\"ride_indicators_item\">\r\n         <div className=\"ride_indicators_item__value\">\r\n            {integer}<span className=\"decimal\">{decimal}</span>\r\n         <span className=\"ride_indicators_item__unit\">\r\n            {props.unit ? (' ' + props.unit) : ''}\r\n         </span>\r\n         </div>\r\n         <div className=\"ride_indicators_item__name\">\r\n            {props.name}\r\n         </div>\r\n      </li>\r\n   )\r\n}\r\n\r\nconst RideIndicators = (props) => {\r\n   const date = new Date(props.ride.startDate)\r\n   const startTime = `${date.getHours()}:${addZero(date.getMinutes())}`\r\n\r\n   return (\r\n      <div className=\"ride_indicators\">\r\n         <ul className=\"ride_indicators__group group_1\">\r\n            <RideIndicatorItem value={props.ride.distance}\r\n               decimal={2}\r\n               unit={'km'}\r\n               name={'Total distance'}/>\r\n            <RideIndicatorItem value={props.ride.climb ? props.ride.climb : 'n/a'}\r\n               unit={props.ride.climb ? 'm' : ''}\r\n               name={'Climb'} />\r\n            <RideIndicatorItem value={props.ride.averageSpeed}\r\n               decimal={1}\r\n               unit={'km/h'}\r\n               name={'Average speed'} />\r\n         </ul>\r\n         <ul className=\"ride_indicators__group group_2\">\r\n            <RideIndicatorItem value={startTime}\r\n               name={'Start time'} />\r\n            <RideIndicatorItem value={convertMsToStr(props.ride.fullTime)}\r\n               name={'Full race time'} />\r\n            <RideIndicatorItem value={convertMsToStr(props.ride.cleanTime)}\r\n               name={'Net riding time'} />\r\n         </ul>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default RideIndicators","import React from \"react\"\r\nimport './InfobarGallery.scss'\r\n\r\nconst GalleryPhoto = (props) => {\r\n   return (\r\n      <li className=\"photo_item\">\r\n         <img src={props.url} alt={props.alt} data-number={props.i} className=\"photo_item__photo\" />\r\n      </li>\r\n   )\r\n}\r\n\r\nconst InfobarGallery = (props) => {\r\n   if (props.photos.length === 0) {\r\n      return null\r\n   }\r\n\r\n   const galleryItems = props.photos\r\n      .map((p, i) => <GalleryPhoto key={p.url} url={p.url} alt={p.alt} i={i} />)\r\n\r\n   const openPhoto = (e) => {\r\n      if (!e.target.classList.contains('photo_item__photo')) {\r\n         return\r\n      }\r\n\r\n      const action = {\r\n         type: 'OPEN-MODAL-PHOTO',\r\n         src: props.photos,\r\n         number: +e.target.dataset.number\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n\r\n   return (\r\n      <div className=\"ride_gallery\">\r\n         <h3>Ride gallery</h3>\r\n         <ul onClick={openPhoto} className=\"ride_gallery_items\">\r\n            {galleryItems}\r\n         </ul>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default InfobarGallery","import React from \"react\"\r\nimport './InfobarRiderCard.scss'\r\n\r\nconst InfobarRiderCardStatsItem = ({ name, value, unit }) => {\r\n  return (\r\n    <li className=\"stats_item\">\r\n      <div className=\"stats_item__item_name\">\r\n        {name}\r\n      </div>\r\n      <div className=\"stats_item__item_value\">\r\n        <div>\r\n          {value} <span className=\"stats_item__item_value_unit\"> {unit}</span>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\nconst InfobarRiderCard = ({ isOpened, photoSmall, photoLarge, name, period, \r\n                          ridesCount, totalDistance, averageSpeed, closeRiderCard, dispatch } ) => {\r\n\r\n  let outputPeriod = null\r\n  if (period[0] === period[1]) {\r\n    outputPeriod = `of ${period[0]}`\r\n  } else {\r\n    outputPeriod = `${period[0]}-${period[1]}`\r\n  }\r\n\r\n  const openLargePhoto = () => {\r\n    const action = {\r\n      type: 'OPEN-MODAL-PHOTO',\r\n      src: [{\r\n        url: photoLarge,\r\n        alt: name\r\n      }]\r\n    }\r\n    dispatch(action)\r\n  }\r\n\r\n  return (\r\n    <div className={\"rider_card\" + (isOpened ? \" opened\" : \"\")}>\r\n      <div className=\"rider_card_header\">\r\n        <div onClick={openLargePhoto} className=\"rider_card_header_photo\">\r\n          <img src={photoSmall} alt={`Mr. ${name}`} className=\"rider_card_header_photo__img\" />\r\n        </div>\r\n        <div className=\"rider_card_header__name\">\r\n          <h3>Mr. {name}</h3>\r\n        </div>\r\n      </div>\r\n      <div className=\"rider_card_main\">\r\n        <h4 className=\"rider_card_stats_title\">Total in the period {outputPeriod}:</h4>\r\n        <ul className=\"stats\">\r\n          <InfobarRiderCardStatsItem\r\n            name={'Rides'}\r\n            value={ridesCount} />\r\n          <InfobarRiderCardStatsItem\r\n            name={'Distance'}\r\n            value={totalDistance}\r\n            unit={'km'} />\r\n          <InfobarRiderCardStatsItem\r\n            name={'Average speed'}\r\n            value={averageSpeed}\r\n            unit={'km/h'} />\r\n        </ul>\r\n      </div>\r\n      <button onClick={closeRiderCard} className=\"close_rider_card_btn\"></button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfobarRiderCard","import React from \"react\"\r\nimport InfobarRiderCard from \"./InfobarRiderCard\"\r\n\r\nconst InfobarRiderCardContainer = ({ allBikers, rides, riderCard, dispatch }) => {\r\n\r\n  React.useEffect(() => {\r\n    const infobarHeight = document.querySelector('.infobar .ride_header').offsetHeight\r\n    const riderCardElement = document.querySelector('.rider_card')\r\n    riderCardElement.style.top = (infobarHeight + 30) + 'px'\r\n\r\n    const riderCardCloseHandler = ((e) => {\r\n      if (!e.target.closest('.rider_card') && !e.target.closest('.modal') && isOpened) {\r\n        closeRiderCard()\r\n      }\r\n    })\r\n\r\n    document.addEventListener('click', riderCardCloseHandler)\r\n\r\n    return () => {\r\n      document.removeEventListener('click', riderCardCloseHandler)\r\n    }\r\n  })\r\n\r\n  const closeRiderCard = () => {\r\n    const action = {\r\n      type: 'CLOSE-RIDER-CARD'\r\n    }\r\n    dispatch(action)\r\n  }\r\n\r\n  const isOpened = riderCard.isOpened\r\n  const activeRiderId = riderCard.rider\r\n  let activeRider = null\r\n  let photoSmall = null\r\n  let photoLarge = null\r\n  let name = null\r\n  let ridesWithThisRider = []\r\n  let activeYears = []\r\n  let firstAndLastActiveYears = []\r\n  let totalDistance = 0\r\n  let totalCleanTime = 0\r\n  let averageSpeed = 0\r\n\r\n  if (activeRiderId) {\r\n    activeRider = allBikers.filter(b => b.id === activeRiderId)[0]\r\n    photoSmall = activeRider.photoSmall\r\n    photoLarge = activeRider.photoLarge\r\n    name = activeRider.name \r\n\r\n    ridesWithThisRider = [...rides].filter(r => r.members.includes(name))\r\n    activeYears = [...ridesWithThisRider].map(r => r.id.slice(0, 4)).sort()\r\n    firstAndLastActiveYears = [activeYears[0], activeYears[activeYears.length - 1]]\r\n\r\n    totalDistance = Math.round(ridesWithThisRider.reduce((sum, current) => sum + current.distance, 0))\r\n    totalCleanTime = ridesWithThisRider.reduce((sum, current) => sum + current.cleanTime, 0) / 1000 / 60 / 60\r\n    averageSpeed = (totalDistance / totalCleanTime).toFixed(1)\r\n  }\r\n\r\n  return (\r\n    <InfobarRiderCard\r\n      isOpened={isOpened}\r\n      photoSmall={photoSmall}\r\n      photoLarge={photoLarge}\r\n      name={name}\r\n      period={[firstAndLastActiveYears[0], firstAndLastActiveYears[1]]}\r\n      ridesCount={ridesWithThisRider.length}\r\n      totalDistance={totalDistance}\r\n      averageSpeed={averageSpeed}\r\n      closeRiderCard={closeRiderCard}\r\n      dispatch={dispatch}\r\n    />\r\n  )\r\n}\r\n\r\nexport default InfobarRiderCardContainer","import React from \"react\"\r\nimport './Infobar.scss'\r\nimport { addZero } from \"../Common/utilites\"\r\nimport RideMembers from \"./InfobarRideMembers/InfobarRideMembers\"\r\nimport RideIndicators from \"./InfobarRideIndicators/InfobarRideIndicators\"\r\nimport InfobarGallery from \"./InfobarGallery/InfobarGallery\"\r\nimport { useSwipeable } from \"react-swipeable\"\r\nimport InfobarRiderCardContainer from \"./InfobarRiderCard/InfobarRiderCardContainer\"\r\n\r\nexport const RideHeader = (props) => {\r\n   const date = new Date(props.date)\r\n   const dateString = `${addZero(date.getDate())}.${addZero(date.getMonth() + 1)}.${date.getFullYear()}`\r\n\r\n   const handlers = useSwipeable({\r\n      onSwiped: (eventData) => {\r\n         if (!props.isMobile) {\r\n            return\r\n         }\r\n         const action = {\r\n            type: 'INFOBAR-HEADER-SWIPED',\r\n            dir: eventData.dir\r\n         }\r\n         props.dispatch(action)\r\n      },\r\n      preventDefaultTouchmoveEvent: true\r\n   })\r\n\r\n   const headerClicked = (e) => {\r\n      if (e.target.closest('a') || !props.isMobile) {\r\n         return\r\n      }\r\n      const action = {\r\n         type: 'TOOGLE-INFOBAR-COLLAPSE',\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n   \r\n   return (\r\n      <div {...handlers} onClick={headerClicked} className=\"ride_header\" >\r\n         <div className=\"ride_header__expand_btn\"></div>\r\n         <div className=\"ride_header__name\">\r\n            <h2>{props.name}</h2>\r\n         </div>\r\n         <div className=\"ride_header__subheader\">\r\n            <div className=\"ride_header_date\">\r\n               {dateString}\r\n            </div>\r\n            <a href={props.strava}\r\n                  target=\"_blank\" rel=\"noreferrer\"\r\n                  className={\"strava_link\" + (props.strava ? \"\" : \" disabled\")} >\r\n                  <img src=\"./img/strava.png\" alt=\"strava\" className=\"strava_logo\"/>\r\n                  <div className=\"strava_text\">This ride in Strava</div>\r\n            </a>\r\n         </div>\r\n      </div>\r\n   )\r\n}\r\n\r\nconst Infobar = (props) => {\r\n   const isCollapsed = props.isCollapsed\r\n   const infobarEl = document.querySelector('.infobar')\r\n   const infobarSwipe = useSwipeable({\r\n      onSwipeStart: (eventData) => {\r\n         if (!props.isMobile || infobarEl.scrollTop > 0 || eventData.dir !== 'Down') {\r\n            return\r\n         }\r\n         \r\n         const action = {\r\n            type: 'INFOBAR-HEADER-SWIPED',\r\n            dir: 'Down'\r\n         }\r\n         props.dispatch(action)\r\n      },\r\n   })\r\n\r\n  return (\r\n    <>\r\n      <RideHeader \r\n        name={props.ride.name} \r\n        date={props.ride.startDate} \r\n        isMobile={props.isMobile}\r\n        strava={props.ride.stravaLink} \r\n        dispatch={props.dispatch} />\r\n      <div {...infobarSwipe} className={'infobar' + (isCollapsed ? ' collapsed' : '')}>\r\n        <RideHeader \r\n          name={props.ride.name} \r\n          date={props.ride.startDate} \r\n          isMobile={props.isMobile}\r\n          strava={props.ride.stravaLink} \r\n          dispatch={props.dispatch} />\r\n        <RideMembers \r\n          dispatch={props.dispatch} \r\n          members={props.members} />\r\n        <RideIndicators ride={props.ride} />\r\n        <InfobarGallery \r\n          photos={props.ride.photos} \r\n          dispatch={props.dispatch} />\r\n        <InfobarRiderCardContainer \r\n          rides={props.rides} \r\n          allBikers={props.allBikers}\r\n          riderCard={props.riderCard}\r\n          dispatch={props.dispatch} />\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Infobar;","import Infobar from \"./Infobar\";\r\nimport { bikersFilter } from \"../Common/utilites\";\r\n\r\nconst InfobarContainer = (props) => {\r\n   const activeRide = props.state.processedRides[props.state.activeRide]\r\n   const membersNames = activeRide.members\r\n   const allBikers = [...props.state.bikers]\r\n   const members = bikersFilter(membersNames, allBikers)\r\n   const isMobile = props.state.layout.isMobile\r\n   const isCollapsed = props.state.infobar.isCollapsed\r\n   const rides = props.state.rides\r\n   const riderCard = props.state.infobar.riderCard\r\n\r\n   return <Infobar \r\n            ride={activeRide} \r\n            allBikers={allBikers}\r\n            members={members} \r\n            rides={rides}\r\n            riderCard={riderCard}\r\n            dispatch={props.dispatch}\r\n            isCollapsed={isCollapsed} \r\n            isMobile={isMobile} />\r\n}\r\n\r\nexport default InfobarContainer;","import React from \"react\"\r\nimport './InfobarCollapseBtn.scss'\r\n\r\nconst CollapseInfobarBtn = (props) => {\r\n\r\n   const toggleInfobarCollapse = (e) => {\r\n\r\n      const action = {\r\n         type: 'TOOGLE-INFOBAR-COLLAPSE'\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n\r\n   return (\r\n      <button onClick={toggleInfobarCollapse} \r\n         className={'collapse_btn' + (props.isCollapsed ? ' collapsed' : '')}>\r\n         <div className=\"collapse_arrow\"></div>\r\n      </button>\r\n   )\r\n}\r\n\r\nexport default CollapseInfobarBtn","const checkMobile = (isMobile, dispatch) => {\r\n\r\n   const action = {\r\n      type: 'TOGGLE-MOBILE-LAYOUT'\r\n   }\r\n\r\n   if (window.innerWidth < 960) {\r\n      if (isMobile) return\r\n      action.mobile = true\r\n      dispatch(action)\r\n   } else {\r\n      if (!isMobile) return\r\n      action.mobile = false\r\n      dispatch(action)\r\n   }\r\n}\r\n\r\nexport default checkMobile","import React from \"react\";\r\nimport { Logo } from \"../Navbar/Navbar\";\r\nimport './MobileHeader.scss';\r\n\r\nconst BurgerBtn = (props) => {\r\n   return (\r\n      <button className={\"burger_btn\" + (props.navbarIsOpen ? \" active\" : \"\")}>\r\n         <span className=\"burger_btn__span\"></span>\r\n      </button>\r\n   )\r\n}\r\n\r\nconst MobileHeader = (props) => {\r\n   \r\n   const headerOnClick = () => {\r\n      props.dispatch({ type: 'TOGGLE-MOBILE-MENU' })\r\n   }\r\n\r\n   return (\r\n      <div className=\"mobile_header\">\r\n         <div onClick={headerOnClick} >\r\n            <BurgerBtn navbarIsOpen={props.navbarIsOpen} />\r\n         </div>\r\n         <div onClick={headerOnClick} >\r\n         <Logo />\r\n         </div>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default MobileHeader","import React from \"react\";\r\nimport { useSwipeable } from \"react-swipeable\";\r\nimport Navbar from \"../Navbar/Navbar\";\r\nimport './MobileNavbar.scss';\r\n\r\nconst MobileNavbar = (props) => {\r\n   const navbarIsOpened = props.state.layout.mobileNavbarIsOpen\r\n\r\n   const handlers = useSwipeable({\r\n      onSwipedLeft: (eventData) => {\r\n         const action = {\r\n            type: 'TOGGLE-MOBILE-MENU'\r\n         }\r\n         props.dispatch(action)\r\n      }\r\n   })\r\n\r\n   return (\r\n      <div {...handlers} className={\"mobile_navbar\" + (navbarIsOpened ? \" opened\" : \"\")}>\r\n         <Navbar state={props.state} dispatch={props.dispatch} />\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default MobileNavbar","import React from \"react\"\r\nimport './Map.scss'\r\n\r\nconst checkUrl = (url) => {\r\n   if (url.match(/https:\\/\\/api-maps\\.yandex\\.ru.+scroll=true/gm)) {\r\n      return true\r\n   } else {\r\n      return false\r\n   }\r\n}\r\n\r\nconst rerenderMap = (props) => {\r\n  const loadingSpinner = document.querySelector('.map_loading_spinner')\r\n  loadingSpinner.style.display = ''\r\n\r\n  let containerHeight = document.documentElement.clientHeight  \r\n  const mapWithHeight = props.map.replace(/height=\\d+/gm, `height=${containerHeight}`)\r\n  const mapUrl = mapWithHeight.replace(/.+src=\"|\"><\\/script>/gm, '')\r\n  const mapEl = document.querySelector('.map')\r\n  mapEl.innerHTML = ''\r\n\r\n  if (checkUrl(mapUrl)) {\r\n    const script = document.createElement('script')\r\n    script.src = mapUrl\r\n    script.async = true\r\n    mapEl.appendChild(script)\r\n    script.onload = () => {\r\n      const observer = new MutationObserver(() => {\r\n        mapEl.firstChild.style.height = '100%'\r\n        observer.disconnect()\r\n        setTimeout(() => {\r\n          loadingSpinner.style.display = 'none'\r\n        }, 1000)\r\n      })\r\n      observer.observe(mapEl, { childList: true })\r\n    }\r\n\r\n  } else {\r\n    const errorMessage = document.createElement('div')\r\n    errorMessage.classList.add('map_error_wrapper')\r\n    errorMessage.innerHTML = '<div>Map for this ride is not ready yet...</div>'\r\n    mapEl.appendChild(errorMessage)\r\n    loadingSpinner.style.display = 'none'\r\n  }\r\n}\r\n\r\nclass Map extends React.PureComponent {\r\n   componentDidMount() {\r\n      rerenderMap(this.props)\r\n   }\r\n   componentDidUpdate() {\r\n      rerenderMap(this.props)\r\n   }\r\n   \r\n   render() {\r\n      return (\r\n         <div className=\"map_container\">\r\n            <img src=\"./img/tail-spin.svg\" alt=\"Loading...\" className=\"map_loading_spinner\" />\r\n            <div className=\"map_left_gradient\"></div>\r\n            <div className=\"map\"></div>\r\n         </div>\r\n      )\r\n   }\r\n   \r\n}\r\n\r\nexport default Map;","import React from \"react\";\r\nimport { useSwipeable } from \"react-swipeable\";\r\nimport './ModalPhoto.scss'\r\n\r\nconst ModalPhoto = (props) => {\r\n  let num, length\r\n\r\n  if (props.isOpened) {\r\n    num = props.number\r\n    length = props.src.length\r\n  }\r\n\r\n  const closeModal = () => {\r\n    const modal = document.querySelector('.modal')\r\n    modal.classList.add('fading')\r\n    modal.ontransitionend = () => {\r\n      const action = {\r\n        type: 'CLOSE-MODAL-PHOTO'\r\n      }\r\n      props.dispatch(action)\r\n    }\r\n  }\r\n\r\n  const openPrev = () => {\r\n    const action = {\r\n      type: 'OPEN-MODAL-PHOTO',\r\n      src: props.src,\r\n      number: num - 1\r\n    }\r\n    props.dispatch(action)\r\n  }\r\n\r\n  const openNext = () => {\r\n    const action = {\r\n      type: 'OPEN-MODAL-PHOTO',\r\n      src: props.src,\r\n      number: num + 1\r\n    }\r\n    props.dispatch(action)\r\n  }\r\n\r\n  const modalClick = (e) => {\r\n    if (e.target.classList.contains('gallery_switch_btn')) {\r\n      e.target.classList.contains('prev_btn') ? openPrev() : openNext()\r\n    } else {\r\n      closeModal()\r\n    }\r\n  }\r\n\r\n  const swipeClose = useSwipeable({\r\n    onSwiped: (e) => {\r\n      if (e.dir === 'Up' || e.dir === 'Down') {\r\n        closeModal()\r\n      } else if (e.dir === 'Right' && num > 0) {\r\n        openPrev()\r\n      } else if (e.dir === 'Left' && num < length - 1) {\r\n        openNext()\r\n      }\r\n    },\r\n    preventDefaultTouchmoveEvent: true\r\n  })\r\n\r\n  const img = new Image()\r\n  if (props.isOpened) {\r\n    const spinner = document.querySelector('.modal').querySelector('.map_loading_spinner')\r\n    const imgEl = document.querySelector('.modal_photo_img')\r\n\r\n    img.src = props.src[num].url\r\n    img.alt = props.src[num].alt\r\n    img.onload = () => {\r\n      spinner.classList.add('hide')\r\n      imgEl.classList.remove('hide')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div {...swipeClose} onClick={modalClick} className={\"modal\" + (props.isOpened ? \" opened\" : \"\")}>\r\n      <div className=\"modal_photo_container\">\r\n        <img src=\"/img/tail-spin.svg\" alt=\"Loading...\" className=\"map_loading_spinner\" />\r\n        <img className=\"modal_photo_img hide\" src={img.src} alt={img.alt} />\r\n      </div>\r\n      <button className={\"gallery_switch_btn prev_btn\" + (num === 0 ? \" hide\" : \"\")}></button>\r\n      <button className={\"gallery_switch_btn next_btn\" + (length === num + 1 ? \" hide\" : \"\")}></button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ModalPhoto","const checkUrlValidity = (url, rides) => {\r\n  const validUrls = rides.map(ride => ride.url)\r\n  const index = validUrls.findIndex(item => item === url)\r\n  if (index === -1) {\r\n    return false\r\n  } else {\r\n    return true\r\n  }\r\n}\r\n\r\nconst routeWithUrl = (url, rides, dispatch) => {\r\n  const urlValidity = checkUrlValidity(url, rides)\r\n  if (urlValidity) {\r\n    const action = {\r\n      type: 'SET-ACTIVE-RIDE',\r\n      url: url\r\n    }\r\n    dispatch(action)\r\n  } else {\r\n    return 'invalid'\r\n  }\r\n}\r\n\r\nexport default routeWithUrl","import './App.scss';\nimport React from 'react'\nimport NavbarContainer from './components/Navbar/Navbar';\nimport InfobarContainer from './components/Infobar/InfobarContainer';\nimport CollapseInfobarBtn from './components/Infobar/InfobarCollapseBtn/InfobarCollapseBtn';\nimport checkMobile from './components/Common/checkMobile';\nimport MobileHeader from './components/MobileHeader/MobileHeader';\nimport MobileNavbar from './components/MobileNavbar/MobileNavbar';\nimport Map from './components/Map/Map';\nimport { Redirect } from 'react-router';\nimport ModalPhoto from './components/Modal/ModalPhoto/ModalPhoto';\nimport routeWithUrl from './components/Common/routing';\n\n\nfunction App(props) {\n   const state = props.store.getState()\n   const dispatch = props.store.dispatch.bind(props.store)\n   const url = state.nextRenderUrl || props.location.pathname\n   const onResise = () => {checkMobile(state.layout.isMobile, dispatch)}\n\n   React.useEffect(() => {\n    window.addEventListener('resize', onResise)\n    return window.removeEventListener('resize', onResise)\n }, [])\n\n  if (url !== props.location.pathname) {\n    return <Redirect to={url} />\n  }\n\n   const urlValidity = routeWithUrl(url, state.rides, dispatch)\n   if (urlValidity === 'invalid') {\n      return <Redirect to={state.processedRides[0].url} />\n   }\n\n   const activeRideIndex = state.activeRide\n   const map = state.processedRides[activeRideIndex].map\n\n   if (!state.layout.isMobile) {\n      return (\n         <div className=\"App\">\n            <div className=\"rides_menu_container\">\n               <NavbarContainer state={state} dispatch={dispatch} />\n               <InfobarContainer state={state} dispatch={dispatch} />\n               <CollapseInfobarBtn isCollapsed={state.infobar.isCollapsed} dispatch={dispatch} />\n            </div>\n               <Map map={map} isMobile={state.layout.isMobile} />\n               <ModalPhoto src={state.layout.modal.src} number={state.layout.modal.number}\n                  isOpened={state.layout.modal.isOpened} dispatch={dispatch} />\n         </div>\n      )\n   } else {\n      return (\n         <div className=\"App mobile\">\n            <MobileHeader navbarIsOpen={state.layout.mobileNavbarIsOpen} dispatch={dispatch} />\n            <div className=\"mobile_main\">\n               <div className=\"mobile_map\">\n                  <Map map={map} isMobile={state.layout.isMobile} />\n               </div>\n               <div className={\"mobile_infobar\" + (state.infobar.isCollapsed ? ' collapsed' : '')}>\n                  <InfobarContainer state={state} dispatch={dispatch} />\n               </div>\n               <MobileNavbar state={state} dispatch={dispatch} />\n            </div>\n            <ModalPhoto src={state.layout.modal.src} number={state.layout.modal.number}\n               isOpened={state.layout.modal.isOpened} dispatch={dispatch} />\n         </div>\n      )\n   }\n}\n\nexport default App;","const bikers = [\r\n   {\r\n      name: 'Lavr',\r\n      id: 'Lavr',\r\n      photoSmall: './img/bikers/Lavr.jpg',\r\n      photoLarge: './img/bikers/LavrLarge.jpg'\r\n   },\r\n   {\r\n      name: 'Andy',\r\n      id: 'Andy',\r\n      photoSmall: './img/bikers/Andy.jpg',\r\n      photoLarge: './img/bikers/AndyLarge.jpg'\r\n   },\r\n   {\r\n      name: 'Nick',\r\n      id: 'Nick',\r\n      photoSmall: './img/bikers/Nick.jpg',\r\n      photoLarge: './img/bikers/NickLarge.jpg'\r\n   },\r\n   {\r\n      name: 'Paul',\r\n      id: 'Paul',\r\n      photoSmall: './img/bikers//Paul.jpg',\r\n      photoLarge: './img/bikers/PaulLarge.jpg'\r\n   },\r\n   {\r\n      name: 'Serg',\r\n      id: 'Serg',\r\n      photoSmall: './img/bikers/Serg.jpg',\r\n      photoLarge: './img/bikers/SergLarge.jpg'\r\n   }\r\n]\r\n\r\nexport default bikers","const rides = [\r\n   {\r\n      name: 'Zavidovo - Konakovo - Rogachevo - Klin',\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aea221697762f0a4e2c085d935376ee568ae63f758e80d361680811e38059591c&amp;width=100%25&amp;height=562&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 116.61,\r\n      climb: 459,\r\n      startDate: '2021-10-31',\r\n      startTime: '10:18',\r\n      fullTime: '10:51:17',\r\n      cleanTime: '7:15:08',\r\n      members: ['Lavr', 'Nick', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/6193953195',\r\n      searchWords: `Zavidovo Novozavidovo Konakovo Selihovo aerodrome Krutets Krutez Ruchyi Aleksandrovo Yahroma Yakhroma Rogachevo Rogachovo Betonka A-108 Porkovskoe Shevlyakovo Novoshchapovo Klin night`,\r\n      photos: [\r\n         'IMG_20211031_121053.jpg',\r\n         'IMG_20211031_122024.jpg',\r\n         'IMG_20211031_183920.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: 'Konakovo - Solnechnogorsk',\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A8472ba15980b6a771535d7df0fde7022adbe7e49420c0284e9b5fa633d4e3026&amp;width=100%25&amp;height=507&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 90.61,\r\n      climb: 539,\r\n      startDate: '2021-08-15',\r\n      startTime: '12:13',\r\n      fullTime: '9:12:25',\r\n      cleanTime: '4:53:44',\r\n      members: ['Lavr', 'Paul', 'Nick', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/5798918869',\r\n      searchWords: `Konakovo Selihovo Krutets Ruchyi Pustyn Alexandrovo Yahroma Yakhroma Rogachevo Rogachovo Rogachovskoe highway Tarakanovo pond Tolstyakovo Leningradskoy highway Solnechnogorsk Senej Senezh Podsolnechnaya`,\r\n      photos: [\r\n         'PXL_20210815_134724022.jpg',\r\n         'PXL_20210815_135331511.jpg',\r\n         'PXL_20210815_153251515.jpg',\r\n         'PXL_20210815_174156622.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Through Malino's jungle\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A502b1ca7d98ef2d4a8c5a08866594227109af4d9af79bab4d096dbdde10f8025&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 28.37,\r\n      climb: 226,\r\n      startDate: '2021-07-25',\r\n      startTime: '14:35',\r\n      fullTime: '3:51:03',\r\n      cleanTime: '2:03:50',\r\n      members: ['Lavr', 'Paul', 'Nick', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/5686264901',\r\n      searchWords: `Zelenograd Malino Firsanovka Mtsyri Mtsiri Mziri Mzyru Serednikovo Serednyakovo Brehovo Brekhovo Bryokhovo Bryohovo Brohovo Pyatnitskoe Pyatnickoe Ruzino CIE `,\r\n      photos: []\r\n   },\r\n   {\r\n      name: \"To Pyatnitsa through Povarovo\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A9fcf7c4415e26a7daf7ce35c57b326981fb8597413161bfb5613dc8ea337f216&amp;width=100%25&amp;height=368&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 40.27,\r\n      climb: 1541,\r\n      startDate: '2021-06-20',\r\n      startTime: '14:35',\r\n      fullTime: '4:04:06',\r\n      cleanTime: '2:16:37',\r\n      members: ['Lavr', 'Nick', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/5503081364',\r\n      searchWords: `Zelenograd Alabushevo Dedeshino Dedyoshino CKAD Depo Povarovo Povarovka wheel punkture Berezki Beryozki Alekseevskoe Kurilovo Pyatnitsa Pyatnica Shevlino Istra pond swimming`,\r\n      photos: [\r\n         'IMG_20210620_173603.jpg',\r\n         'IMG_20210620_183839.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Dirty journey to Pavlovskaya Sloboda\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A52022963fe77b0760546402b269b136369e1c0eacb2dd1dd4007053064815637&amp;width=100%25&amp;height=484&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 63.97,\r\n      climb: 465,\r\n      startDate: '2021-05-07',\r\n      startTime: '11:14',\r\n      fullTime: '8:34:21',\r\n      cleanTime: '5:24:26',\r\n      members: ['Lavr', 'Nick', 'Paul', 'Serg'],\r\n      stravaLink: 'https://www.strava.com/activities/5257813977',\r\n      searchWords: `Zelenograd Pyatnitskoe Pyatnickoe Vianor Krankino Nefedyevo Dedovsk Burger King Lobanovo Leshkovo Pavlovsaya Sloboda Istra river swimming Rozhdesteveno Rojdestveno Snegiri Selivaniha Dedovo Talyzino Bakeevo Goretovka Georgievskoe`,\r\n      photos: [\r\n         'IMG_20210507_114057.jpg',\r\n         'IMG_20210507_132101.jpg',\r\n         'IMG_20210507_160611.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Iksha - Pushkino - Dolgoprudniy\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aded685440c9370e219b6f00f0e09f64afa1c0112185739c43f1140ae63332129&amp;width=100%25&amp;height=476&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 87.73,\r\n      climb: 2271,\r\n      startDate: '2021-05-02',\r\n      startTime: '09:20',\r\n      fullTime: '8:16:09',\r\n      cleanTime: '5:45:04',\r\n      members: ['Lavr', 'Nick', 'Serg'],\r\n      stravaLink: 'https://www.strava.com/activities/5231113160',\r\n      searchWords: `Morozki A-107 Betonka gas station Iksha Rozhdestvenno Rojdestvenno Tishkovo Pushkino Mamontovskaya Mamontovka Klyazma Boltino Dolgopurdniy Dolgoprudnaya Moscow channel Khimki Levoberezhnaya Levoberejnaya`,\r\n      photos: [\r\n         'IMG_20210502_094313.jpg',\r\n         'IMG_20210502_112101.jpg',\r\n         'IMG_20210502_113245.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Ring through Moscow and Krasnogorsk\",\r\n      map: `str<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A5ccc2c04f4b0008649f11ff6a5c6342d96fecafed1e74cc76ad27a9afd0234ad&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 150.56,\r\n      climb: 907,\r\n      startDate: '2020-07-25',\r\n      startTime: '10:55',\r\n      fullTime: '12:41:55',\r\n      cleanTime: '9:27:53',\r\n      members: ['Lavr', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/3813354535',\r\n      searchWords: `Zelenograd Vostochka Firsanovskoe highway Firsanovka Shodnya Skhodnya Podrezkovo Cherkizovo Cherkizovskiy pond Klyazma river Novoe highway Dolgoprudniy Hlebnikovo Khlebnikovo Dmitrovskoe Afanasovo Belyaninovo Ostashkovskoe Moscow Medvedkovo Yauza Sviblovo Botanicheskiy garden VDNH Timiryazevskiy Krasniy Krasnyj Baltiets Baltiec Strogino Myakinino Crocus Krokus Pavshino Krasnogorsk Snejkom Ilyinskoe Ilinskoe Arhangelskoe Arkhangelskoe Lohin ostrov Lokhin island Krasnogorskaya Volokolamskoe Saburovo Pyatnitskoe Pyatnickoe Yurlovo Brehovo Brekhovo Bryohovo Bryokhovo Kutuzovskoe night`,\r\n      photos: []\r\n   },\r\n   {\r\n      name: \"Solnechnogorsk - Yakhroma - Zelenograd\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A9c04de5659479fdd8e90aa8a8f67023b92af302dc94f7f1a753d3366ded6375a&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 112.78,\r\n      climb: 1267,\r\n      startDate: '2020-07-05',\r\n      startTime: '09:57',\r\n      fullTime: '11:48:59',\r\n      cleanTime: '7:13:28',\r\n      members: ['Lavr', 'Nick', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/3720632658',\r\n      searchWords: `Solnechnogorsk Podsolnechnaya Senej Senezh Timonovo Kalina Zaovrazhye Zaovrajye Rogachevskoe highway Arbuzovo Olgovo Apraskinyh manor Yahroma Yakhroma Dmitrovskoe Dedenevo Shukolovo Varvarino wheel puncture Morozki CKAD Kholmy Porkov Lyalovo Mendeleevo Lyalovskoe Rjavki Rzhavki`,\r\n      photos: [\r\n         'IMG_20200705_114925.jpg',\r\n         'IMG_20200705_130908.jpg',\r\n         'IMG_20200705_175028.jpg',\r\n         'IMG_20200705_183124.jpg',\r\n         'IMG_20200705_193859.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Manikhino - Istra - darky CKAD - Zelenograd\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A3a8223fd337d72848efb864c9e24f9ad07b2ece458bdb19ec2edbf53305bfffd&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 82,\r\n      climb: 183,\r\n      startDate: '2020-06-20',\r\n      startTime: '14:40',\r\n      fullTime: '8:20:00',\r\n      cleanTime: '8:20:00',\r\n      members: ['Lavr', 'Nick', 'Paul', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/3645623919',\r\n      searchWords: `Manihino Manikhino Volokolamskoy highway Istra town Tesla towers New Herusalem Lamishino pond swim CKAD Betonka Pyatnitskoe Pyatnickoe Zhilino Jilino Andreevka Zelenograd`,\r\n      photos: [\r\n         'IMG_20200620_134513.jpg',\r\n         'IMG_20200620_154818.jpg',\r\n         '0DjnlAYpoj0.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Zelenograd - Krasnogorsk - Zvenigorod - Snegiri\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A5b4fb76257fafb94aa5825008dcfd156eb5dbfde22c48ac29423f2717280509d&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 118.46,\r\n      climb: 837,\r\n      startDate: '2020-06-27',\r\n      startTime: '08:51',\r\n      fullTime: '10:09:56',\r\n      cleanTime: '7:27:30',\r\n      members: ['Lavr', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/4472183662',\r\n      searchWords: `Zelenograd Malino Mtsyri Mcyri Mciri Mtsiri Pyatnickoe Pyatnitskoe Yurlovo Saburovo Volokolamskoe Krasnogorskaya Ilinskoe Ilyinskoe Arhangelskoe Arkhangelskoe Mechnikovo Nikolina gora mountain Ivanovka Maslich Slavich dacha Moscow river Zvenigorod Savvino Storojevskiy Storozhevskiy monastery Savvinskaya Sloboda CKAD Betonka Porkovskoe Pavlovskaya Istra river Rojdestveno Rozhdestveno Snegiri Selivaniha`,\r\n      photos: [\r\n         'IMG_20200627_125001.jpg',\r\n         'IMG_20200627_154630.jpg',\r\n         'IMG_20200627_194504.jpg',\r\n      ]\r\n   },\r\n   {\r\n      name: \"Klin - Volokolamsk & Snegiri - Zelenograd\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aa02aa953e30dd50fc5cc44d6a096a7872681099e94c24a53d15598034cecf512&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: (77.7 + 14.03),\r\n      climb: (772 + 71),\r\n      startDate: '2020-06-13',\r\n      startTime: '11:03',\r\n      fullTime: '7:17:26',\r\n      cleanTime: '4:44:47',\r\n      members: ['Lavr', 'Nick', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/4472192681',\r\n      searchWords: `Klin Pershutino Vysokovsk Kalistovo Volokolamsk Panfolovtsi Panfilovci museum Dubosekovo train Snegiri Volokolamskoe Selivaniha Bakeevo Goretovka Pyatnitskoe Georgievskoe`,\r\n      photos: [\r\n         'IMG_20200613_140625.jpg',\r\n         'IMG_20200613_144021.jpg',\r\n         'IMG_20200613_144505.jpg',\r\n         'IMG_20200613_150446.jpg',\r\n         'IMG_20200613_153716.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"From Tver to Konarovo across Saint Places\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Acbbbc2ac8be43ac3fbfc8c431eab02bdd78ddad3260b95cdff55751b6055e3fe&amp;width=100%25&amp;height=336&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 79.3,\r\n      climb: 225,\r\n      startDate: '2019-08-25',\r\n      startTime: '09:18',\r\n      fullTime: '5:26:11',\r\n      cleanTime: '4:36:11',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472204842',\r\n      searchWords: `Tver Savvatyevskoe highway Zaborovye Volga river swim Vidogoshchi Edimonovo Yuryevo-Devichye Toporok ferry Konakovo`,\r\n      photos: [\r\n         'PANO_20190825_130807.vr.jpg',\r\n         'PANO_20190825_153818.vr.jpg',\r\n         'IMG_20190825_102814.jpg',\r\n         'IMG_20190825_111512.jpg',\r\n         'IMG_20190825_123343.jpg',\r\n         'IMG_20190825_134116.jpg',\r\n         'IMG_20190825_140057.jpg',\r\n         'IMG_20190825_141326.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"To the back side of Istra\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Ac3065d6bca86923eaba019c7cbbf147e4893ee7916ffd2916768678ce7e3b2a2&amp;width=100%25&amp;height=435&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 139.65,\r\n      climb: 1141,\r\n      startDate: '2019-05-18',\r\n      startTime: '11:36',\r\n      fullTime: '9:06:00',\r\n      cleanTime: '7:50:59',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472205448',\r\n      searchWords: `Zelenograd Georgievskoe highway Goretovka Bakeevo Selivaniha Snegiri Volokolamskoe Istra New Herusalem Buzharovo Bujarovo Betonka A-108 Tiliktino Kuznetsovo Kuznecovo Shchekino Dron Andy dacha Ozhogino Ojogino Pyatnitskoe Pyatnickoe Podsolnechnaya Solnechnogorsk`,\r\n      photos: []\r\n   },\r\n   {\r\n      name: \"Assault attempt of under constructed CKAD\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aee161e8614e5dc0dd48abdbe03433229a435d569625634b34fce55080963ebe4&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 30.29,\r\n      climb: 297,\r\n      startDate: '2019-04-20',\r\n      startTime: '14:18',\r\n      fullTime: '2:11:50',\r\n      cleanTime: '1:57:31',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472268451',\r\n      searchWords: `Zelenogradskiy CKAD Podosinki Morozki`,\r\n      photos: [\r\n         'IMG_20190420_141426.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Hike to Yaroslavl, day 2\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aa57658c2eab9be5c2d0e957b80590da7cf282fa40f22463d3ece013d231f6e71&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 48.3,\r\n      climb: 239,\r\n      startDate: '2018-07-29',\r\n      startTime: '08:38',\r\n      fullTime: '3:16:25',\r\n      cleanTime: '2:45:08',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472290953',\r\n      searchWords: `tent palatka bushcraft night Ustye river Ustie Yaroslavskoe highway Semibratovo Yaroslavl`,\r\n      photos: [\r\n         'IMG_20180729_110602.jpg',\r\n         'IMG_20180729_115906.jpg',\r\n         'IMG_20180729_121151.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Hike to Yaroslavl, day 1\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A75a667968ec739763f4972196875bad59d4a75726481572487ad124dad46dbc8&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 143.54,\r\n      climb: 998,\r\n      startDate: '2018-07-28',\r\n      startTime: '10:52',\r\n      fullTime: '10:09:56',\r\n      cleanTime: '7:40:36',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472291668',\r\n      searchWords: `Naugolniy Sergiev Posad Yaroslavskoe highway Svatkovo Glebovskoe Pereslavl Zalesskiy Pereslavl-Zalesskiy Nero lake Varus bay Rostov Ustye Ustie river tent palatka bushcraft night`,\r\n      photos: [\r\n         'IMG_20180728_082637.jpg',\r\n         'IMG_20180728_130220_01.jpg',\r\n         'IMG_20180728_145607.jpg',\r\n         'IMG_20180728_170859.jpg',\r\n         'IMG_20180728_193500.jpg',\r\n         'IMG_20180728_194927.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"From Zvenigorod to Mozhaysk and Borodino\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Ad9e8826de5283c7bb13aabc4e9e7075db6c3109530abe31303defe776ffe776e&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 100.59,\r\n      climb: 781,\r\n      startDate: '2018-07-14',\r\n      startTime: '09:57',\r\n      fullTime: '9:09:00',\r\n      cleanTime: '4:52:07',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472291139',\r\n      searchWords: `Zvenigorod Savvinskaya Sloboda Tuchkovo Mars Moscow river mouth swim A-108 Betonka Mojaysk Mozhaysk Borodino Borodinskoe pole field museum`,\r\n      photos: [\r\n         'IMG_20180714_171055.jpg',\r\n         'IMG_20180714_192138.jpg'\r\n\r\n      ]\r\n   },\r\n   {\r\n      name: \"Autumn trip around Moscow\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Ae1726821540dbf35a3103ca223a5e129a1c2364c617f972824a3ee1cc8fbee84&amp;width=100%25&amp;height=382&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 82.76,\r\n      climb: 594,\r\n      startDate: '2017-09-23',\r\n      startTime: '13:27',\r\n      fullTime: '6:53:15',\r\n      cleanTime: '5:27:55',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472343428',\r\n      searchWords: `Moscow Strogino Krylatskoe Fili Phili Poklonnaya gora Victory park Gorky Gorkogo`,\r\n      photos: []\r\n   },\r\n   {\r\n      name: \"Journey to the glory of Chester Bennington\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aa1abd56903063854530bf5c50415e036b8debbc4a98932563fbebaa7901b6951&amp;width=100%25&amp;height=600&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 164.75,\r\n      climb: 0,\r\n      startDate: '2017-07-22',\r\n      startTime: '11:15',\r\n      fullTime: '10:50:00',\r\n      cleanTime: '10:50:00',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: '',\r\n      searchWords: `Zelenograd Lyalovskoe highway Mendeleevo Lyalovo Pokrov Sergiev Posad Bogorodskoe Saburnovo Verbilki Novonikolskoe Zaprudnya Dmitrovskoe Tempy Moscow channel Meldino ferry Spridovo Nizhnie Nijnie Vyselki Staroe Domlino Konakovo night`,\r\n      photos: [\r\n         'IMG_20170722_082508.jpg',\r\n         'IMG_20170722_110859.jpg',\r\n         'IMG_20170722_143709.jpg',\r\n         'IMG_20170722_174029.jpg',\r\n         'IMG_20170722_202800.jpg',\r\n         'IMG_20170723_004534.jpg'\r\n      ]\r\n   }\r\n]\r\n\r\nexport default rides\r\n","// GENERATING SEARCH INDEX\r\n\r\nexport const createKeywords = (searchWords, name, startDate, members) => {\r\n  const words = searchWords.split(' ')\r\n  const nameWords = name.split(' ').filter(word => /[A-Za-z]+/.test(word)) // only words from name\r\n  const year = startDate.slice(0, 4)\r\n  const keywords = [...words, ...nameWords, year, 'mr', ...members]\r\n    .sort()\r\n    .map(word => word\r\n    .toLowerCase())\r\n\r\n  return [...new Set(keywords)]\r\n}\r\n\r\n// SEARCH FUNCTIONS\r\n\r\nexport const findSeveralWords = (words, objects) => {\r\n  if (typeof words === 'string') {\r\n    words = words.toLowerCase().split(' ')\r\n  }\r\n\r\n  let currentObjects = objects\r\n  for (let i = 0; i < words.length; i++) {\r\n    currentObjects = findMatchedObjects(words[i], currentObjects)\r\n  }\r\n\r\n  return currentObjects\r\n}\r\n\r\nconst findMatchedObjects = (search, objects) => {\r\n\r\n  return [...objects.filter(obj => {\r\n    return findSubsringInArray(search, obj.keywords)\r\n  })]\r\n}\r\n\r\nconst findSubsringInArray = (substr, arr) => {\r\n  let found = false\r\n\r\n  for (let i = 0; i < arr.length && !found; i++) {\r\n    if (findSubstring(substr, arr[i])) {\r\n      found = true\r\n    }\r\n  }\r\n  return found\r\n}\r\n\r\nconst findSubstring = (substr, string) => {\r\n  if (string.indexOf(substr) < 0) return false\r\n  return true\r\n}\r\n","import bikers from \"./bikers-data\";\r\nimport rides from \"./rides-data\";\r\nimport { convertStrToDate, convertStrToMs } from \"../components/Common/utilites\";\r\nimport checkMobile from \"../components/Common/checkMobile\";\r\nimport { createKeywords, findSeveralWords } from \"../components/Common/search\";\r\n\r\nconst store = {\r\n  _state: {\r\n    rides: [],\r\n    processedRides: [],\r\n    bikers: [],\r\n    activeRide: null,\r\n    nextRenderUrl: null,\r\n    infobar: {\r\n      isCollapsed: false,\r\n      riderCard: {\r\n        isOpened: false,\r\n        rider: null\r\n      },\r\n    },\r\n    navbar: {\r\n      filterMenuIsOpened: false,\r\n      lastSuccededSearchActiveFirstIndex: null,\r\n      noResultsFound: false,\r\n      searchMenuIsOpened: false,\r\n      sortMenuIsOpened: false,\r\n      output: {\r\n        filteredBikers: [],\r\n        searchValue: '',\r\n        sortParameter: 'date',\r\n        sortFromBiggest: true\r\n      }\r\n    },\r\n    layout: {\r\n      modal: {\r\n        isOpened: false,\r\n        src: null,\r\n        number: null\r\n      },\r\n      mobileNavbarIsOpen: true,\r\n      mobileNavbarWasTouched: false,\r\n      isMobile: false\r\n    }\r\n  },\r\n\r\n  _callSubscriber() {\r\n  },\r\n\r\n  subscribe(observer) {\r\n    this._callSubscriber = observer\r\n  },\r\n\r\n  _processRides() {\r\n    let tempArr = [...this._state.rides]\r\n    const output = this._state.navbar.output\r\n\r\n    // SORTING\r\n\r\n    const sortRides = (parameter) => {\r\n      if (output.sortFromBiggest) {\r\n        tempArr.sort((a, b) => a[parameter] > b[parameter] ? -1 : 1)\r\n      } else {\r\n        tempArr.sort((a, b) => a[parameter] > b[parameter] ? 1 : -1)\r\n      }\r\n    }\r\n\r\n    switch (output.sortParameter) {\r\n      case 'date':\r\n        sortRides('startDate')\r\n        break\r\n      case 'distance':\r\n        sortRides('distance')\r\n        break\r\n      case 'time':\r\n        sortRides('cleanTime')\r\n        break\r\n      case 'speed':\r\n        sortRides('averageSpeed')\r\n        break\r\n      default:\r\n        sortRides('startDate')\r\n    }\r\n\r\n    // FILTERING\r\n\r\n    const checkBikers = (ride, bikers) => {\r\n      for (let biker of bikers) {\r\n        if (ride.members.find(member => member === biker)) {\r\n          return true\r\n        }\r\n      }\r\n      return false\r\n    }\r\n\r\n    const tempArrFiltered = tempArr.filter(ride => checkBikers(ride, output.filteredBikers))\r\n    if (tempArrFiltered.length > 0) {\r\n      this._state.processedRides = [...tempArrFiltered]\r\n      this._state.activeRide = 0\r\n    } else {\r\n      this._state.processedRides = [...tempArr]\r\n    }\r\n\r\n    // SEARCHING\r\n\r\n    const searchQuery = this._state.navbar.output.searchValue\r\n    const tempArrWithSearch = [...this._state.processedRides]\r\n    const searchResults = findSeveralWords(searchQuery, tempArrWithSearch)\r\n    let lastSuccededSearchActiveFirstIndex = null\r\n\r\n    if (searchResults.length) {\r\n      this._state.navbar.lastSuccededSearchActiveFirstIndex = searchResults[0].id\r\n      this._state.processedRides = [...searchResults]\r\n      this._state.nextRenderUrl = this._state.processedRides[0].url\r\n      this._state.navbar.noResultsFound = false\r\n    } else {\r\n      lastSuccededSearchActiveFirstIndex = this._state.navbar.lastSuccededSearchActiveFirstIndex\r\n      const lastActiveRideIndex = this._state.rides.findIndex(ride => ride.id === lastSuccededSearchActiveFirstIndex)\r\n      this._state.processedRides = [...this._state.rides]\r\n      this._state.nextRenderUrl = this._state.processedRides[lastActiveRideIndex].url\r\n      this._state.navbar.noResultsFound = true\r\n    }\r\n  },\r\n\r\n   getState() {\r\n      return this._state\r\n   },\r\n\r\n   dispatch(action) {\r\n      switch (action.type) {\r\n        case 'SET-ACTIVE-RIDE':\r\n          const index = this._state.processedRides.findIndex(el => el.url === action.url)\r\n          if (index !== -1) {\r\n              this._state.activeRide = index\r\n          } else {\r\n              this._state.activeRide = 0\r\n          }\r\n          this._state.nextRenderUrl = null\r\n          // this._state.infobar.isCollapsed = true\r\n          break\r\n        case 'TOGGLE-MOBILE-LAYOUT':\r\n          if (this._state.layout.isMobile !== action.mobile) {\r\n              this._state.layout.isMobile = action.mobile\r\n              this._callSubscriber()\r\n          }\r\n          break\r\n        case 'TOGGLE-FILTER-MENU':\r\n          if (this._state.navbar.filterMenuIsOpened) {\r\n              this._state.navbar.filterMenuIsOpened = false\r\n          } else {\r\n              this._state.navbar.sortMenuIsOpened = false\r\n              this._state.navbar.searchMenuIsOpened = false\r\n              this._state.navbar.filterMenuIsOpened = true\r\n          }\r\n          this._callSubscriber()\r\n          break\r\n        case 'TOGGLE-FILTERED-BIKER':\r\n          const filteredBikers = this._state.navbar.output.filteredBikers\r\n          const filterIndex = filteredBikers.findIndex(b => b === action.bikerId)\r\n          if (filterIndex === -1) {\r\n              filteredBikers.push(action.bikerId)\r\n              filteredBikers.sort((a, b) => a > b ? 1 : -1)\r\n          } else {\r\n                filteredBikers.splice(filterIndex, 1)\r\n          }\r\n          this._processRides()\r\n          this._callSubscriber()\r\n          break\r\n        case 'TOGGLE-SORT-MENU':\r\n            if (this._state.navbar.sortMenuIsOpened) {\r\n               this._state.navbar.sortMenuIsOpened = false\r\n            } else {\r\n               this._state.navbar.filterMenuIsOpened = false\r\n               this._state.navbar.searchMenuIsOpened = false\r\n               this._state.navbar.sortMenuIsOpened = true\r\n            }\r\n            this._callSubscriber()\r\n            break\r\n        case 'TOGGLE-RIDES-SORT':\r\n          this._state.navbar.output.sortParameter = action.sortParameter\r\n          this._state.navbar.output.sortFromBiggest = action.sortFromBiggest\r\n          this._state.navbar.sortMenuIsOpened = false\r\n          this._processRides()\r\n          this._callSubscriber()\r\n          break\r\n        case 'TOGGLE-SEARCH-MENU':\r\n          if (this._state.navbar.searchMenuIsOpened) {\r\n              this._state.navbar.searchMenuIsOpened = false\r\n          } else {\r\n              this._state.navbar.filterMenuIsOpened = false\r\n              this._state.navbar.sortMenuIsOpened = false\r\n              this._state.navbar.searchMenuIsOpened = true\r\n          }\r\n          this._callSubscriber()\r\n          break\r\n        case 'SET-SEARCH-VALUE':\r\n          this._state.navbar.output.searchValue = action.payload\r\n          this._processRides()\r\n          this._callSubscriber()\r\n          break\r\n        case 'OPEN-RIDER-CARD':\r\n          this._state.infobar.riderCard.isOpened = true\r\n          this._state.infobar.riderCard.rider = action.payload\r\n          this._callSubscriber()\r\n          break\r\n        case 'CLOSE-RIDER-CARD':\r\n          this._state.infobar.riderCard.isOpened = false\r\n          this._state.infobar.riderCard.rider = null\r\n          this._callSubscriber()\r\n          break\r\n        case 'TOOGLE-INFOBAR-COLLAPSE':\r\n          this._state.infobar.isCollapsed = !this._state.infobar.isCollapsed\r\n          document.querySelector('.infobar').scrollTop = 0\r\n          this._callSubscriber()\r\n          break\r\n        case 'INFOBAR-HEADER-SWIPED':\r\n          if (action.dir === 'Up') {\r\n              if (this._state.infobar.isCollapsed) {\r\n                this._state.infobar.isCollapsed = false\r\n              }\r\n          }\r\n          if (action.dir === 'Down') {\r\n              if (!this._state.infobar.isCollapsed) {\r\n                this._state.infobar.isCollapsed = true\r\n              }\r\n          }\r\n          document.querySelector('.infobar').scrollTop = 0\r\n          this._callSubscriber()\r\n          break\r\n        case 'TOGGLE-MOBILE-MENU':\r\n          this._state.layout.mobileNavbarIsOpen = !this._state.layout.mobileNavbarIsOpen\r\n          this._callSubscriber()\r\n          break\r\n        case 'TOGGLE-NAVBAR-TOUCHED':\r\n          this._state.layout.mobileNavbarWasTouched = true\r\n          break\r\n        case 'OPEN-MODAL-PHOTO':\r\n          this._state.layout.modal.src = action.src\r\n          action.number \r\n              ? this._state.layout.modal.number =  action.number\r\n              : this._state.layout.modal.number = 0\r\n          this._state.layout.modal.isOpened = true\r\n          this._callSubscriber()\r\n          break\r\n        case 'CLOSE-MODAL-PHOTO':\r\n            this._state.layout.modal.src = null\r\n            this._state.layout.modal.alt = null\r\n            this._state.layout.modal.isOpened = false\r\n            this._callSubscriber()\r\n            break\r\n        default:\r\n          console.error(`unknown action type: ${action.type}`)\r\n      }\r\n   },\r\n\r\n   initState() {\r\n      initBikers.bind(this)()\r\n      initRides.bind(this)()\r\n      if (!this._state.activeRide) {\r\n         this._state.activeRide = 0\r\n      }\r\n      checkMobile(this._state.layout.isMobile, this.dispatch.bind(this))\r\n      if (this._state.layout.isMobile) {\r\n         this._state.infobar.isCollapsed = true\r\n      }\r\n\r\n      function initBikers() {\r\n         this._state.bikers.length = 0\r\n         bikers.forEach(biker => {\r\n            this._state.bikers = [...this._state.bikers, biker]\r\n         })\r\n         this._state.bikers.sort((a, b) => {\r\n            if (a.id > b.id) {\r\n               return 1\r\n            } else return -1\r\n         })\r\n      }\r\n\r\n      function initRides() {\r\n         this._state.rides.length = 0\r\n         rides.forEach(el => {\r\n            let ride = {\r\n               name: el.name,\r\n               id: `${el.startDate}T${el.startTime}`.match(/[0-9]/gi).join(''),\r\n               url: '/rides/' + el.startDate,\r\n               map: el.map,\r\n               startDate: convertStrToDate(el.startDate, el.startTime),\r\n               fullTime: convertStrToMs(el.fullTime),\r\n               cleanTime: convertStrToMs(el.cleanTime),\r\n               distance: el.distance,\r\n               climb: el.climb,\r\n               averageSpeed: +(el.distance / convertStrToMs(el.cleanTime) * 1000 * 60 * 60).toFixed(1),\r\n               members: el.members,\r\n               stravaLink: el.stravaLink,\r\n               keywords: createKeywords(el.searchWords, el.name, el.startDate, el.members),\r\n               photos: [...el.photos].map((p) => {\r\n                  return {\r\n                     url: `./img/photos/${p}`,\r\n                     alt: `Photo from ${el.name} ride`\r\n                  }\r\n               })\r\n            }\r\n            this._state.rides = [...this._state.rides, ride]\r\n         })\r\n         this._state.rides.sort((a, b) => {\r\n            if (a.id > b.id) {\r\n               return -1\r\n            } else return 1\r\n         })\r\n         this._state.processedRides = [...this._state.rides]\r\n         this._state.navbar.lastSuccededSearchActiveFirstIndex = this._state.processedRides[0].id\r\n      }\r\n   }\r\n}\r\n\r\nexport default store\r\nwindow.store = store\r\nwindow.state = store.getState()","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport store from './store/store';\nimport { HashRouter } from 'react-router-dom';\nimport { Route } from 'react-router'\n\nstore.initState()\n\nconst rerenderEntireTree = () => {\n   ReactDOM.render(\n      <React.StrictMode>\n         <HashRouter>\n            <Route path='/' \n               render={({ location }) => <App location={location} store={store} />} />\n         </HashRouter>\n      </React.StrictMode>,\n      document.getElementById('root')\n    );\n}\n\nrerenderEntireTree()\nstore.subscribe(rerenderEntireTree)\n\n\n"],"sourceRoot":""}