{"version":3,"sources":["components/Navbar/ManageList/FilterMenu/FilterMenu.jsx","components/Navbar/ManageList/SortMenu/SortMenu.jsx","components/Navbar/ManageList/ManageList.jsx","components/Common/utilites.js","components/Navbar/RidesListItem/RidesListItem.jsx","components/Navbar/Navbar.jsx","components/Infobar/InfobarRideMembers/InfobarRideMembers.jsx","components/Infobar/InfobarRideIndicators/InfobarRideIndicators.jsx","components/Infobar/InfobarGallery/InfobarGallery.jsx","components/Infobar/Infobar.jsx","components/Infobar/InfobarContainer.jsx","components/Infobar/InfobarCollapseBtn/InfobarCollapseBtn.jsx","components/Common/checkMobile.js","components/MobileHeader/MobileHeader.jsx","components/MobileNavbar/MobileNavbar.jsx","components/Map/Map.jsx","components/Modal/ModalPhoto/ModalPhoto.jsx","components/Common/routing.js","App.js","store/bikers-data.js","store/rides-data.js","store/store.js","index.js"],"names":["FilterMenuItem","props","id","className","isActive","src","img","alt","name","FilterMenu","filterMenuItems","allBikers","map","b","filteredBikers","find","photoSmall","onClick","e","target","closest","action","type","bikerId","dataset","dispatch","SortMenuItem","sort2","sort1","SortMenu","sortParameter","sortFromBiggest","checkActive","parameter","sortArr","classList","contains","s","ManageList","filterMenuIsOpened","navbar","sortMenuIsOpened","bikers","output","length","filterAdditionalInfo","convertStrToMs","str","timeArr","split","convertMsToStr","ms","hours","Math","floor","minutes","addZero","num","separateDecimal","accuracy","push","toFixed","slice","bikersFilter","members","filter","findIndex","item","MemberPic","long","MembersPicFor3","m","RideListItemMembersPhotos","RidesListItem","date","Date","dateString","getDate","getMonth","getFullYear","returnAdditionalInfo","info","value","distance","unit","speed","decimal","time","to","url","active","Logo","RidesListSeparator","param","separatorText","currEl","prevEl","currElDate","startDate","prevElDate","currSpeed","cleanTime","prevSpeed","currTime","prevTime","getSeparatorText","separatorUnit","RidesListItems","state","processedRides","r","i","arr","averageSpeed","activeRide","ScrollButton","direction","display","handleFunction","Navbar","React","useState","isTop","setIsTop","isBottom","setIsBottom","isMobile","layout","ridesListWrapper","useRef","onScroll","checkTop","nativeEvent","scrollTop","checkBottom","scrollTopMax","ref","current","offsetHeight","RideMemberItem","Image","photoLarge","RideMembers","rideMembersItems","memberId","RideIndicatorItem","integer","RideIndicators","ride","startTime","getHours","getMinutes","climb","fullTime","GalleryPhoto","InfobarGallery","photos","galleryItems","p","number","RideHeader","handlers","useSwipeable","onSwiped","eventData","dir","preventDefaultTouchmoveEvent","href","strava","rel","Infobar","isCollapsed","infobarEl","document","querySelector","infobarSwipe","onSwipeStart","stravaLink","InfobarContainer","membersNames","infobar","CollapseInfobarBtn","checkMobile","window","innerWidth","mobile","BurgerBtn","navbarIsOpen","MobileHeader","headerOnClick","MobileNavbar","navbarIsOpened","mobileNavbarIsOpen","onSwipedLeft","rerenderMap","loadingSpinner","style","containerHeight","scrollHeight","mapUrl","replace","mapEl","innerHTML","match","script","createElement","async","appendChild","errorMessage","add","Map","this","PureComponent","ModalPhoto","isOpened","closeModal","modal","ontransitionend","openPrev","openNext","swipeClose","spinner","imgEl","onload","remove","routeWithUrl","rides","urlValidity","checkUrlValidity","App","store","getState","bind","location","pathname","onResise","useEffect","addEventListener","removeEventListener","activeRideIndex","searchWords","_state","_callSubscriber","subscribe","observer","_processRides","tempArr","sortRides","sort","a","tempArrFiltered","biker","member","checkBikers","index","el","filterIndex","splice","console","error","initState","forEach","initBikers","join","parse","initRides","rerenderEntireTree","ReactDOM","render","StrictMode","path","getElementById"],"mappings":"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","file":"static/js/main.eb5f6750.chunk.js","sourcesContent":["import React from \"react\"\r\nimport './FilterMenu.scss'\r\n\r\nconst FilterMenuItem = (props) => {\r\n   return (\r\n      <li data-biker-id={props.id} className={\"filter_menu_item\" + (props.isActive ? ' active' : '')}>\r\n         <div className=\"filter_menu_item__img\">\r\n            <img src={props.img} alt={props.name} />\r\n         </div>\r\n         <div className=\"filter_menu_item__name\">Mr. {props.name}</div>\r\n      </li>\r\n   )\r\n}\r\n\r\nconst FilterMenu = (props) => {\r\n   const changeFilter = (e) => {\r\n      if (!e.target.closest('.filter_menu_item')) {\r\n         return\r\n      }\r\n      const clickedBiker = e.target.closest('.filter_menu_item').dataset.bikerId\r\n      const action = {\r\n         type: 'TOGGLE-FILTERED-BIKER',\r\n         bikerId: clickedBiker\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n   const checkActive = (id) => {\r\n      if (props.filteredBikers.find(b => b === id)) {\r\n         return true\r\n      } else {\r\n         return false\r\n      }\r\n   }\r\n\r\n   const filterMenuItems = props.allBikers\r\n      .map(b => <FilterMenuItem id={b.id} key={b.id} isActive={checkActive(b.id)}\r\n         name={b.name} img={b.photoSmall} />)\r\n\r\n   return (\r\n      <ul onClick={changeFilter} className=\"filter_menu_items\" >\r\n         {filterMenuItems}\r\n      </ul>\r\n   )\r\n}\r\n\r\nexport default FilterMenu","import React from \"react\"\r\nimport './SortMenu.scss'\r\n\r\nconst SortMenuItem = (props) => {\r\n   return (\r\n      <li>\r\n         <div data-sort-parameter={props.type} className={`sort_menu_popup_item${props.isActive ? ' ' + props.isActive : ''}`}>\r\n            <div className=\"sort_menu_popup_item__name\">{props.name}</div>\r\n            <button className=\"sort_menu_popup_item__btn smallest\">{props.sort2}</button>\r\n            <button className=\"sort_menu_popup_item__btn biggest\">{props.sort1}</button>\r\n         </div>\r\n      </li>\r\n   )\r\n}\r\n\r\nconst SortMenu = (props) => {\r\n   const sortParameter = props.sortParameter\r\n   const sortFromBiggest = props.sortFromBiggest\r\n\r\n   const changeSort = (e) => {\r\n      if (e.target.classList.contains('sort_menu_popup_item__btn')) {\r\n         const sortParameter = e.target.closest('.sort_menu_popup_item').dataset.sortParameter\r\n         const sortFromBiggest = e.target.classList.contains('biggest')\r\n         const action = {\r\n            type: 'TOGGLE-RIDES-SORT',\r\n            sortParameter: sortParameter,\r\n            sortFromBiggest: sortFromBiggest\r\n         }\r\n         props.dispatch(action)\r\n      }\r\n   }\r\n\r\n   const checkActive = (parameter) => {\r\n      if (sortParameter === parameter) {\r\n         if (sortFromBiggest) {\r\n            return 'fromBiggest'\r\n         } else {\r\n            return 'fromSmallest'\r\n         }\r\n      } else {\r\n         return false\r\n      }\r\n   }\r\n\r\n   const sortArr = [\r\n      {\r\n         name: 'By date:',\r\n         type: 'date',\r\n         sort1: 'Latest',\r\n         sort2: 'Oldest',\r\n         isActive: checkActive('date')\r\n      },\r\n      {\r\n         name: 'By distance:',\r\n         type: 'distance',\r\n         sort1: 'Longest',\r\n         sort2: 'Shortest',\r\n         isActive: checkActive('distance')\r\n      },\r\n      {\r\n         name: 'By average speed:',\r\n         type: 'speed',\r\n         sort1: 'Fastest',\r\n         sort2: 'Slowest',\r\n         isActive: checkActive('speed')\r\n      },\r\n      {\r\n         name: 'By riding time:',\r\n         type: 'time',\r\n         sort1: 'Longest',\r\n         sort2: 'Shortest',\r\n         isActive: checkActive('time')\r\n      },\r\n   ]\r\n\r\n   return (\r\n      <ul onClick={changeSort} >\r\n         {sortArr.map(s => <SortMenuItem key={s.type} name={s.name} type={s.type} \r\n            sort1={s.sort1} sort2={s.sort2} isActive={s.isActive} />)}\r\n      </ul>\r\n   )\r\n}\r\n\r\nexport default SortMenu","import React from \"react\"\r\nimport './ManageList.scss'\r\nimport FilterMenu from \"./FilterMenu/FilterMenu\"\r\nimport SortMenu from \"./SortMenu/SortMenu\"\r\n\r\nconst ManageList = (props) => {\r\n   const filterMenuIsOpened = props.navbar.filterMenuIsOpened\r\n   const sortMenuIsOpened = props.navbar.sortMenuIsOpened\r\n\r\n   const filterAdditionalInfo = () => {\r\n      const bikers = props.bikers\r\n      const filteredBikers = props.navbar.output.filteredBikers\r\n      \r\n      if (filteredBikers.length === bikers.length \r\n            || filteredBikers.length === 0 \r\n            || props.navbar.filterMenuIsOpened) {\r\n         return null\r\n      }\r\n      if (props.navbar.output.filteredBikers.length === 1) {\r\n         return `(Mr. ${props.navbar.output.filteredBikers[0]} only)`\r\n      }\r\n      return `(${filteredBikers.length}/${bikers.length})`\r\n   }\r\n\r\n   const toggleFilterMenu = () => {\r\n      const action = {type: 'TOGGLE-FILTER-MENU'}\r\n      props.dispatch(action)\r\n   }\r\n   const toggleSortMenu = () => {\r\n      const action = {type: 'TOGGLE-SORT-MENU'}\r\n      props.dispatch(action)\r\n   }\r\n\r\n   return (\r\n      <>\r\n         <div className=\"manage_list\">\r\n            <div className=\"manage_list__global_buttons\">\r\n               <button onClick={toggleFilterMenu} \r\n                  className=\"manage_list__btn filter_btn\">Filter <span>{filterAdditionalInfo()}</span></button>\r\n               <button onClick={toggleSortMenu} \r\n                  className=\"manage_list__btn sort_btn\">Sort</button>\r\n            </div>\r\n            <div className=\"manage_list__submenu\">\r\n               <div className={\"navbar_menu_popup filter_menu\" + (filterMenuIsOpened ? \" opened\" : \"\")}>\r\n                     { <FilterMenu\r\n                        allBikers={props.bikers}\r\n                        filteredBikers={props.navbar.output.filteredBikers}\r\n                        dispatch={props.dispatch} />}\r\n               </div>\r\n               <div className={\"navbar_menu_popup sort_menu\" + (sortMenuIsOpened ? \" opened\" : \"\")}>\r\n                  <SortMenu \r\n                     sortParameter={props.navbar.output.sortParameter}\r\n                     sortFromBiggest={props.navbar.output.sortFromBiggest}\r\n                     dispatch={props.dispatch} />\r\n               </div>\r\n            </div>\r\n         </div>\r\n      </>\r\n   )\r\n}\r\n\r\nexport default ManageList","//  DATE FEATURES\r\n\r\nexport const convertStrToDate = (date, time) => {\r\n   return Date.parse(`${date}T${time}:00.000+03:00`)\r\n}\r\n\r\nexport const convertStrToMs = (str) => {\r\n   let timeArr = str.split(':')\r\n   return timeArr[0] * 1000 * 60 * 60 + timeArr[1] * 1000 * 60 + timeArr[2] * 1000\r\n}\r\n\r\nexport const convertMsToStr = (ms) => {\r\n   const hours = Math.floor(ms / 1000 / 60 / 60)\r\n   const minutes = addZero(Math.floor((ms - hours * 1000 * 60 * 60) / 1000 / 60))\r\n   return `${hours}:${minutes}`\r\n}\r\n\r\n// DIGITS FEATURES\r\n\r\nexport const addZero = (num) => {\r\n   if (+num < 10) {\r\n      return '0' + num\r\n   }\r\n   return num\r\n}\r\n\r\nexport const separateDecimal = (num, accuracy = 1) => {\r\n   let output = []\r\n   output.push(Math.floor(num) + '')\r\n   output.push((num.toFixed(accuracy) + '').slice(-accuracy))\r\n   return output\r\n}\r\n\r\n// OTHER\r\n\r\nexport const bikersFilter = (members, allBikers) => {\r\n   return allBikers.filter(b => (members.findIndex(item => item === b.name) >= 0))\r\n}\r\n","import React from \"react\"\r\nimport './RidesListItem.scss'\r\nimport { addZero, bikersFilter, separateDecimal } from \"../../Common/utilites\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\n\r\nconst MemberPic = (props) => {\r\n   return (\r\n      <img src={props.photoSmall} alt={props.name} \r\n         className={`rides_list_item__member_pic${props.long ? ' long' : ''}`} />\r\n   )\r\n}\r\n\r\nconst MembersPicFor3 = (props) => {\r\n   const m = props.members\r\n   return (\r\n      <>\r\n         <div>\r\n            <MemberPic photoSmall={m[0].photoSmall} name={m[0].name} long={true} />\r\n         </div>\r\n         <div>\r\n            <MemberPic photoSmall={m[1].photoSmall} name={m[1].name}/>\r\n            <MemberPic photoSmall={m[2].photoSmall} name={m[2].name}/>\r\n         </div>\r\n      </>\r\n   )\r\n}\r\n\r\nconst RideListItemMembersPhotos = (props) => {\r\n   const members = bikersFilter(props.members, props.allBikers)\r\n   let membersPics\r\n   if (members.length === 3) {\r\n      return <MembersPicFor3 members={members} />\r\n   } else if (members.length === 2) {\r\n      membersPics = members.map(m => <MemberPic \r\n         key={m.name}\r\n         photoSmall={m.photoSmall} \r\n         name={m.name} \r\n         long={true} />)\r\n   } else {\r\n      membersPics = members.map(m => <MemberPic \r\n         key={m.name}\r\n         photoSmall={m.photoSmall} \r\n         name={m.name} />)\r\n   }\r\n   return membersPics\r\n}\r\n\r\nconst RidesListItem = (props) => {\r\n   const date = new Date(props.date)\r\n   const dateString = props.sortParameter === 'date'\r\n   ? `${addZero(date.getDate())}.${addZero(date.getMonth() + 1)}`\r\n   : `${addZero(date.getDate())}.${addZero(date.getMonth() + 1)}.${date.getFullYear()}`\r\n\r\n   const returnAdditionalInfo = () => {\r\n      let info = {}\r\n      if (props.sortParameter === 'date' || props.sortParameter === 'distance') {\r\n         info.value = Math.floor(props.distance)\r\n         info.unit = 'km'\r\n      } else if (props.sortParameter === 'speed') {\r\n         info.value = separateDecimal(props.speed)[0] + '.'\r\n         info.decimal = separateDecimal(props.speed)[1]\r\n         info.unit = 'km/h'\r\n      } else if (props.sortParameter === 'time') {\r\n         info.decimal = separateDecimal(props.time / 1000 / 60 / 60)[1] > 5 ? 5 : ''\r\n         info.value = Math.floor(props.time / 1000 / 60 / 60) + (info.decimal > 0 ? '.' : '')\r\n         info.unit = 'h'\r\n      }\r\n      return info\r\n   }\r\n\r\n   const closeMobileNavbar = () => {\r\n      const action = {\r\n         type: 'TOGGLE-MOBILE-MENU'\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n\r\n   return (\r\n      <div onClick={closeMobileNavbar} className=\"rides_list_item\">\r\n         <Link to={props.url}>\r\n            <div className={`rides_list_item__container ${props.active ? ' active' : ''}`}>\r\n               <div className=\"rides_list_item__left\">\r\n                  <div className=\"rides_list_item__members\">\r\n                     <RideListItemMembersPhotos members={props.members} allBikers={props.allBikers} />\r\n                  </div>\r\n               </div>\r\n               <div className=\"rides_list_item__center\">\r\n                  <div className=\"rides_list_item__name\">{props.name}</div>\r\n                  <div className=\"rides_list_item__date\">{dateString}</div>\r\n               </div>\r\n               <div className=\"rides_list_item__right\">\r\n                  <div className=\"rides_list_item__distance\">\r\n                     <div className=\"rides_list_item__distance_num\">\r\n                        {returnAdditionalInfo().value}<span className=\"decimal\">{returnAdditionalInfo().decimal}</span>\r\n                     </div>\r\n                     <div className=\"rides_list_item__distance_unit\">\r\n                        {returnAdditionalInfo().unit}\r\n                     </div>\r\n                  </div>\r\n               </div>\r\n            </div>\r\n         </Link>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default RidesListItem","import React from \"react\"\r\nimport ManageList from \"./ManageList/ManageList\"\r\nimport './Navbar.scss'\r\nimport RidesListItem from \"./RidesListItem/RidesListItem\"\r\n\r\nexport const Logo = (props) => {\r\n   return (\r\n      <div className=\"header_logo\">\r\n         <h1>Rides history</h1>\r\n      </div>\r\n   )\r\n}\r\n\r\nconst RidesListSeparator = (props) => {\r\n   const getSeparatorText = (currEl, prevEl, param) => {\r\n      switch (param) {\r\n         case 'date':\r\n            const currElDate = new Date(currEl.startDate)\r\n            const prevElDate = prevEl ? new Date(prevEl.startDate) : null\r\n            if (!prevElDate) {\r\n               return currElDate.getFullYear()\r\n            } else if (prevElDate.getFullYear() !== currElDate.getFullYear()) {\r\n               return currElDate.getFullYear()\r\n            }\r\n            break\r\n         case 'distance':\r\n            if (!prevEl) {\r\n               return currEl.distance < 50 ? '<50' : (currEl.distance > 100 ? '>100' : '50-100')\r\n            }\r\n            if ((prevEl.distance < 50 && currEl.distance > 50) || (prevEl.distance > 100 && currEl.distance < 100)) {\r\n               return '50-100'\r\n            }\r\n            if (prevEl.distance > 50 && currEl.distance < 50) {\r\n               return '<50'\r\n            }\r\n            if (prevEl.distance < 100 && currEl.distance > 100) {\r\n               return '>100'\r\n            }\r\n            break\r\n         case 'speed':\r\n            const currSpeed = currEl.distance / currEl.cleanTime * 1000 * 60 * 60\r\n            const prevSpeed = prevEl ? prevEl.distance / prevEl.cleanTime * 1000 * 60 * 60 : null\r\n            if (!prevEl) {\r\n               return currSpeed < 15 ? '<15' : ( currSpeed > 18 ? '>18' : '15-18')\r\n            }\r\n            if ((prevSpeed < 15 && currSpeed > 15) || (prevSpeed > 18 && currSpeed < 18)) {\r\n               return '15-18'\r\n            }\r\n            if (prevSpeed > 15 && currSpeed < 15) {\r\n               return '<15'\r\n            }\r\n            if (prevSpeed < 18 && currSpeed > 18) {\r\n               return '>18'\r\n            }\r\n            break\r\n         case 'time':\r\n            const currTime = currEl.cleanTime / 1000 / 60 / 60\r\n            const prevTime = prevEl ? prevEl.cleanTime / 1000 / 60 / 60 : null\r\n            if (!prevEl) {\r\n               return currTime < 4 ? '<4' : (currTime > 7 ? '>7' : '4-7')\r\n            }\r\n            if ((prevTime < 4 && currTime > 4) || (prevTime > 7 && currTime < 7)) {\r\n               return '4-7'\r\n            }\r\n            if (prevTime > 4 && currTime < 4) {\r\n               return '<4'\r\n            }\r\n            if (prevTime < 7 && currTime > 7) {\r\n               return '>7'\r\n            }\r\n            break\r\n         default:\r\n            return null\r\n      }\r\n   }\r\n   const getSeparatorUnit = (param) => {\r\n      if (param === 'date') return null\r\n      if (param === 'distance') return 'km'\r\n      if (param === 'speed') return 'km/h'\r\n      if (param === 'time') return 'h'\r\n   }\r\n\r\n   const separatorText = getSeparatorText(props.currEl, props.prevEl, props.sortParameter)\r\n   const separatorUnit = getSeparatorUnit(props.sortParameter)\r\n   if (separatorText) {\r\n      return (\r\n         <div className='rides_list_separator'>\r\n            {separatorText} <span className=\"rides_list_separator__unit\">{separatorUnit}</span>\r\n         </div>\r\n      )\r\n   } else return null\r\n}\r\n\r\nconst RidesListItems = (props) => {\r\n\r\n   return props.state.processedRides\r\n      .map((r, i, arr) => {\r\n         return ( <li key={r.url}>\r\n         <RidesListSeparator \r\n            currEl={r}\r\n            prevEl={arr[i - 1]}\r\n            sortParameter={props.state.navbar.output.sortParameter} />\r\n\r\n         <RidesListItem \r\n            dispatch={props.dispatch}\r\n            id={r.id}\r\n            url={r.url}\r\n            key={r.id} \r\n            name={r.name}\r\n            date={r.startDate}\r\n            distance={r.distance}\r\n            speed={r.averageSpeed}\r\n            time={r.cleanTime}\r\n            members={r.members}\r\n            allBikers={props.state.bikers}\r\n            sortParameter={props.state.navbar.output.sortParameter}\r\n            active={props.state.activeRide === i ? true : false} />\r\n         </li>)\r\n      }\r\n   )\r\n}\r\n\r\nconst ScrollButton = ({ direction, display, handleFunction }) => {\r\n   return (\r\n      <div className={`to_${direction}_btn_wrapper${display ? \"\" : \" hide\"}`}>\r\n         <button onClick={handleFunction} className={`to_${direction}_btn`}></button>\r\n      </div>\r\n   )\r\n}\r\n\r\nconst Navbar = (props) => {\r\n   const [isTop, setIsTop] = React.useState(true)\r\n   const [isBottom, setIsBottom] = React.useState(false)\r\n   const isMobile = props.state.layout.isMobile\r\n   const ridesListWrapper = React.useRef(null)\r\n   const scrollHandler = (e) => {\r\n      if (isMobile) return\r\n      const checkTop = e.nativeEvent.target.scrollTop < 50\r\n      const checkBottom = e.nativeEvent.target.scrollTop === e.nativeEvent.target.scrollTopMax\r\n      checkTop ? setIsTop(true) : setIsTop(false)\r\n      checkBottom ? setIsBottom(true) : setIsBottom(false)\r\n   }\r\n\r\n   const scrollUp = () => {\r\n      if (ridesListWrapper.current.scrollTop < ridesListWrapper.current.offsetHeight) {\r\n         ridesListWrapper.current.scrollTop = 0\r\n      } else {\r\n         ridesListWrapper.current.scrollTop = ridesListWrapper.current.scrollTop - ridesListWrapper.current.offsetHeight + 80\r\n      }\r\n   }\r\n   const scrollDown = () => {\r\n      if (ridesListWrapper.current.scrollTop + ridesListWrapper.current.offsetHeight > ridesListWrapper.current.scrollTopMax) {\r\n         ridesListWrapper.current.scrollTop = ridesListWrapper.current.scrollTopMax\r\n      } else {\r\n         ridesListWrapper.current.scrollTop += ridesListWrapper.current.offsetHeight - 80\r\n      }\r\n   }\r\n\r\n\r\n   return (\r\n      <div className=\"navbar\">\r\n         <Logo />\r\n         <ManageList bikers={props.state.bikers} navbar={props.state.navbar} dispatch={props.dispatch} />\r\n         <div onScroll={scrollHandler} ref={ridesListWrapper} className=\"riders_list_wrapper\">\r\n            <ScrollButton direction=\"top\" display={!isTop && !isMobile} handleFunction={scrollUp} />\r\n            <ul className=\"rides_list\">\r\n               <RidesListItems state={props.state} dispatch={props.dispatch} />\r\n            </ul>\r\n         </div>\r\n         <div className=\"right_border\"></div>\r\n         <ScrollButton direction=\"bottom\" display={!isBottom && !isMobile} handleFunction={scrollDown} />\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default Navbar;","import React from \"react\"\r\nimport './InfobarRideMembers.scss'\r\n\r\nconst RideMemberItem = (props) => {\r\n   const img = new Image()\r\n   img.src = props.photoLarge\r\n   return (\r\n      <div className=\"ride_member_item\">\r\n         <img src={props.photoSmall} alt={`Mr. ${props.name}`} className=\"ride_member_item__img\" />\r\n         <div className=\"ride_member_item__name\">Mr. {props.name}</div>\r\n      </div>\r\n   )\r\n}\r\n\r\nconst RideMembers = (props) => {\r\n   const rideMembersItems = props.members\r\n      .map(m => <RideMemberItem key={m.id} name={m.name}\r\n         photoSmall={m.photoSmall} photoLarge={m.photoLarge} />)\r\n   const openMemberPhoto = (e) => {\r\n      if (!e.target.classList.contains('ride_member_item__img')) {\r\n         return\r\n      }\r\n      const alt = e.target.alt\r\n      const memberId = alt.slice(4)\r\n      const url = props.members.find(m => m.name === memberId).photoLarge\r\n\r\n      const action = {\r\n         type: 'OPEN-MODAL-PHOTO',\r\n         src: [{\r\n            url: url,\r\n            alt: alt\r\n         }]\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n   \r\n   return (\r\n      <div onClick={openMemberPhoto} className=\"ride_members\">\r\n         <h3>Members:</h3>\r\n         <ul className=\"ride_members_items\">\r\n            {rideMembersItems}\r\n         </ul>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default RideMembers","import React from \"react\";\r\nimport { addZero, convertMsToStr, separateDecimal } from \"../../Common/utilites\";\r\nimport './InfobarRideIndicators.scss'\r\n\r\nconst RideIndicatorItem = (props) => {\r\n   let integer, decimal\r\n   if (props.decimal) {\r\n      integer = separateDecimal(props.value, props.decimal)[0] + '.'\r\n      decimal = separateDecimal(props.value, props.decimal)[1]\r\n   } else {\r\n      integer = props.value\r\n      decimal = ''\r\n   }\r\n   \r\n   return (\r\n      <li className=\"ride_indicators_item\">\r\n         <div className=\"ride_indicators_item__value\">\r\n            {integer}<span className=\"decimal\">{decimal}</span>\r\n         <span className=\"ride_indicators_item__unit\">\r\n            {props.unit ? (' ' + props.unit) : ''}\r\n         </span>\r\n         </div>\r\n         <div className=\"ride_indicators_item__name\">\r\n            {props.name}\r\n         </div>\r\n      </li>\r\n   )\r\n}\r\n\r\nconst RideIndicators = (props) => {\r\n   const date = new Date(props.ride.startDate)\r\n   const startTime = `${date.getHours()}:${addZero(date.getMinutes())}`\r\n\r\n   return (\r\n      <div className=\"ride_indicators\">\r\n         <ul className=\"ride_indicators__group group_1\">\r\n            <RideIndicatorItem value={props.ride.distance}\r\n               decimal={2}\r\n               unit={'km'}\r\n               name={'Total distance'}/>\r\n            <RideIndicatorItem value={props.ride.climb ? props.ride.climb : 'n/a'}\r\n               unit={props.ride.climb ? 'm' : ''}\r\n               name={'Climb'} />\r\n            <RideIndicatorItem value={props.ride.averageSpeed}\r\n               decimal={1}\r\n               unit={'km/h'}\r\n               name={'Average speed'} />\r\n         </ul>\r\n         <ul className=\"ride_indicators__group group_2\">\r\n            <RideIndicatorItem value={startTime}\r\n               name={'Start time'} />\r\n            <RideIndicatorItem value={convertMsToStr(props.ride.fullTime)}\r\n               name={'Full race time'} />\r\n            <RideIndicatorItem value={convertMsToStr(props.ride.cleanTime)}\r\n               name={'Net riding time'} />\r\n         </ul>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default RideIndicators","import React from \"react\"\r\nimport './InfobarGallery.scss'\r\n\r\nconst GalleryPhoto = (props) => {\r\n   return (\r\n      <li className=\"photo_item\">\r\n         <img src={props.url} alt={props.alt} data-number={props.i} className=\"photo_item__photo\" />\r\n      </li>\r\n   )\r\n}\r\n\r\nconst InfobarGallery = (props) => {\r\n   if (props.photos.length === 0) {\r\n      return null\r\n   }\r\n\r\n   const galleryItems = props.photos\r\n      .map((p, i) => <GalleryPhoto key={p.url} url={p.url} alt={p.alt} i={i} />)\r\n\r\n   const openPhoto = (e) => {\r\n      if (!e.target.classList.contains('photo_item__photo')) {\r\n         return\r\n      }\r\n\r\n      const action = {\r\n         type: 'OPEN-MODAL-PHOTO',\r\n         src: props.photos,\r\n         number: +e.target.dataset.number\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n\r\n   return (\r\n      <div className=\"ride_gallery\">\r\n         <h3>Ride gallery</h3>\r\n         <ul onClick={openPhoto} className=\"ride_gallery_items\">\r\n            {galleryItems}\r\n         </ul>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default InfobarGallery","import React from \"react\"\r\nimport './Infobar.scss'\r\nimport { addZero } from \"../Common/utilites\"\r\nimport RideMembers from \"./InfobarRideMembers/InfobarRideMembers\"\r\nimport RideIndicators from \"./InfobarRideIndicators/InfobarRideIndicators\"\r\nimport InfobarGallery from \"./InfobarGallery/InfobarGallery\"\r\nimport { useSwipeable } from \"react-swipeable\"\r\n\r\nexport const RideHeader = (props) => {\r\n   const date = new Date(props.date)\r\n   const dateString = `${addZero(date.getDate())}.${addZero(date.getMonth() + 1)}.${date.getFullYear()}`\r\n\r\n   const handlers = useSwipeable({\r\n      onSwiped: (eventData) => {\r\n         if (!props.isMobile) {\r\n            return\r\n         }\r\n         const action = {\r\n            type: 'INFOBAR-HEADER-SWIPED',\r\n            dir: eventData.dir\r\n         }\r\n         props.dispatch(action)\r\n      },\r\n      preventDefaultTouchmoveEvent: true\r\n   })\r\n\r\n   const headerClicked = (e) => {\r\n      if (e.target.closest('a') || !props.isMobile) {\r\n         return\r\n      }\r\n      const action = {\r\n         type: 'TOOGLE-INFOBAR-COLLAPSE',\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n   \r\n   return (\r\n      <div {...handlers} onClick={headerClicked} className=\"ride_header\" >\r\n         <div className=\"ride_header__expand_btn\"></div>\r\n         <div className=\"ride_header__name\">\r\n            <h2>{props.name}</h2>\r\n         </div>\r\n         <div className=\"ride_header__subheader\">\r\n            <div className=\"ride_header_date\">\r\n               {dateString}\r\n            </div>\r\n            <a href={props.strava}\r\n                  target=\"_blank\" rel=\"noreferrer\"\r\n                  className={\"strava_link\" + (props.strava ? \"\" : \" disabled\")} >\r\n                  <img src=\"./img/strava.png\" alt=\"strava\" className=\"strava_logo\"/>\r\n                  <div className=\"strava_text\">This ride in Strava</div>\r\n            </a>\r\n         </div>\r\n      </div>\r\n   )\r\n}\r\n\r\nconst Infobar = (props) => {\r\n   const isCollapsed = props.isCollapsed\r\n   const infobarEl = document.querySelector('.infobar')\r\n   const infobarSwipe = useSwipeable({\r\n      onSwipeStart: (eventData) => {\r\n         if (!props.isMobile || infobarEl.scrollTop > 0 || eventData.dir !== 'Down') {\r\n            return\r\n         }\r\n         \r\n         const action = {\r\n            type: 'INFOBAR-HEADER-SWIPED',\r\n            dir: 'Down'\r\n         }\r\n         props.dispatch(action)\r\n      },\r\n   })\r\n\r\n   return (\r\n      <>\r\n         <RideHeader name={props.ride.name} date={props.ride.startDate} isMobile={props.isMobile}\r\n               strava={props.ride.stravaLink} dispatch={props.dispatch} />\r\n         <div {...infobarSwipe} className={'infobar' + (isCollapsed ? ' collapsed' : '')}>\r\n            <RideHeader name={props.ride.name} date={props.ride.startDate} isMobile={props.isMobile}\r\n               strava={props.ride.stravaLink} dispatch={props.dispatch} />\r\n            <RideMembers dispatch={props.dispatch} members={props.members} />\r\n            <RideIndicators ride={props.ride} />\r\n            <InfobarGallery photos={props.ride.photos} dispatch={props.dispatch} />\r\n         </div>\r\n      </>\r\n   )\r\n}\r\n\r\nexport default Infobar;","import Infobar from \"./Infobar\";\r\nimport { bikersFilter } from \"../Common/utilites\";\r\n\r\nconst InfobarContainer = (props) => {\r\n   const activeRide = props.state.processedRides[props.state.activeRide]\r\n   const membersNames = activeRide.members\r\n   const allBikers = [...props.state.bikers]\r\n   const members = bikersFilter(membersNames, allBikers)\r\n   const isMobile = props.state.layout.isMobile\r\n   const isCollapsed = props.state.infobar.isCollapsed\r\n\r\n   return <Infobar ride={activeRide} members={members} dispatch={props.dispatch}\r\n      isCollapsed={isCollapsed} isMobile={isMobile} />\r\n}\r\n\r\nexport default InfobarContainer;","import React from \"react\"\r\nimport './InfobarCollapseBtn.scss'\r\n\r\nconst CollapseInfobarBtn = (props) => {\r\n\r\n   const toggleInfobarCollapse = (e) => {\r\n\r\n      const action = {\r\n         type: 'TOOGLE-INFOBAR-COLLAPSE'\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n\r\n   return (\r\n      <button onClick={toggleInfobarCollapse} \r\n         className={'collapse_btn' + (props.isCollapsed ? ' collapsed' : '')}>\r\n         <div className=\"collapse_arrow\"></div>\r\n      </button>\r\n   )\r\n}\r\n\r\nexport default CollapseInfobarBtn","const checkMobile = (isMobile, dispatch) => {\r\n\r\n   const action = {\r\n      type: 'TOGGLE-MOBILE-LAYOUT'\r\n   }\r\n\r\n   if (window.innerWidth < 960) {\r\n      if (isMobile) return\r\n      action.mobile = true\r\n      dispatch(action)\r\n   } else {\r\n      if (!isMobile) return\r\n      action.mobile = false\r\n      dispatch(action)\r\n   }\r\n}\r\n\r\nexport default checkMobile","import React from \"react\";\r\nimport { Logo } from \"../Navbar/Navbar\";\r\nimport './MobileHeader.scss';\r\n\r\nconst BurgerBtn = (props) => {\r\n   return (\r\n      <button className={\"burger_btn\" + (props.navbarIsOpen ? \" active\" : \"\")}>\r\n         <span className=\"burger_btn__span\"></span>\r\n      </button>\r\n   )\r\n}\r\n\r\nconst MobileHeader = (props) => {\r\n   \r\n   const headerOnClick = () => {\r\n      props.dispatch({ type: 'TOGGLE-MOBILE-MENU' })\r\n   }\r\n\r\n   return (\r\n      <div className=\"mobile_header\">\r\n         <div onClick={headerOnClick} >\r\n            <BurgerBtn navbarIsOpen={props.navbarIsOpen} />\r\n         </div>\r\n         <div onClick={headerOnClick} >\r\n         <Logo />\r\n         </div>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default MobileHeader","import React from \"react\";\r\nimport { useSwipeable } from \"react-swipeable\";\r\nimport Navbar from \"../Navbar/Navbar\";\r\nimport './MobileNavbar.scss';\r\n\r\nconst MobileNavbar = (props) => {\r\n   const navbarIsOpened = props.state.layout.mobileNavbarIsOpen\r\n\r\n   const handlers = useSwipeable({\r\n      onSwipedLeft: (eventData) => {\r\n         const action = {\r\n            type: 'TOGGLE-MOBILE-MENU'\r\n         }\r\n         props.dispatch(action)\r\n      }\r\n   })\r\n\r\n   return (\r\n      <div {...handlers} className={\"mobile_navbar\" + (navbarIsOpened ? \" opened\" : \"\")}>\r\n         <Navbar state={props.state} dispatch={props.dispatch} />\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default MobileNavbar","import React from \"react\"\r\nimport './Map.scss'\r\n\r\nconst checkUrl = (url) => {\r\n   if (url.match(/https:\\/\\/api-maps\\.yandex\\.ru.+scroll=true/gm)) {\r\n      return true\r\n   } else {\r\n      return false\r\n   }\r\n}\r\n\r\nconst rerenderMap = (props) => {\r\n   const loadingSpinner = document.querySelector('.map_loading_spinner')\r\n   loadingSpinner.style.display = ''\r\n   const appEl = document.querySelector('.map_container')\r\n   const containerHeight = appEl.scrollHeight\r\n   const mapWithHeight = props.map.replace(/height=\\d+/gm, `height=${containerHeight}`)\r\n   const mapUrl = mapWithHeight.replace(/.+src=\"|\"><\\/script>/gm, '')\r\n   const mapEl = document.querySelector('.map')\r\n   mapEl.innerHTML = ''\r\n\r\n   if (checkUrl(mapUrl)) {\r\n   // if (false) {\r\n      const script = document.createElement('script')\r\n      script.src = mapUrl\r\n      script.async = true\r\n      mapEl.appendChild(script)\r\n   } else {\r\n      const errorMessage = document.createElement('div')\r\n      errorMessage.classList.add('map_error_wrapper')\r\n      errorMessage.innerHTML = '<div>Map for this ride is not ready yet...</div>'\r\n      mapEl.appendChild(errorMessage)\r\n      loadingSpinner.style.display = 'none'\r\n   }\r\n}\r\n\r\nclass Map extends React.PureComponent {\r\n   componentDidMount() {\r\n      rerenderMap(this.props)\r\n   }\r\n   componentDidUpdate() {\r\n      rerenderMap(this.props)\r\n   }\r\n   \r\n   render() {\r\n      return (\r\n         <div className=\"map_container\">\r\n            <img src=\"./img/tail-spin.svg\" alt=\"Loading...\" className=\"map_loading_spinner\" />\r\n            <div className=\"map_left_gradient\"></div>\r\n            <div className=\"map\"></div>\r\n         </div>\r\n      )\r\n   }\r\n   \r\n}\r\n\r\nexport default Map;","import React from \"react\";\r\nimport { useSwipeable } from \"react-swipeable\";\r\nimport './ModalPhoto.scss'\r\n\r\nconst ModalPhoto = (props) => {\r\n   let num, length\r\n\r\n   if (props.isOpened) {\r\n      num = props.number\r\n      length = props.src.length\r\n   }\r\n\r\n   const closeModal = () => {\r\n      const modal = document.querySelector('.modal')\r\n      modal.classList.add('fading')\r\n      modal.ontransitionend = () => {\r\n         const action = {\r\n            type: 'CLOSE-MODAL-PHOTO'\r\n         }\r\n         props.dispatch(action)\r\n      }\r\n   }\r\n\r\n   const openPrev = () => {\r\n      const action = {\r\n         type: 'OPEN-MODAL-PHOTO',\r\n         src: props.src,\r\n         number: num - 1\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n\r\n   const openNext = () => {\r\n      const action = {\r\n         type: 'OPEN-MODAL-PHOTO',\r\n         src: props.src,\r\n         number: num + 1\r\n      }\r\n      props.dispatch(action)\r\n   }\r\n\r\n   const modalClick = (e) => {\r\n      if (e.target.classList.contains('gallery_switch_btn')) {\r\n         e.target.classList.contains('prev_btn') ? openPrev() : openNext()\r\n      } else {\r\n         closeModal()\r\n      }\r\n   }\r\n\r\n   const swipeClose = useSwipeable({\r\n      onSwiped: (e) => {\r\n         if (e.dir === 'Up' || e.dir === 'Down') {\r\n            closeModal()\r\n         } else if (e.dir === 'Right' && num > 0) {\r\n            openPrev()\r\n         } else if (e.dir === 'Left' && num < length - 1) {\r\n            openNext()\r\n         }\r\n      },\r\n      preventDefaultTouchmoveEvent: true\r\n   })\r\n\r\n   const img = new Image()\r\n   if (props.isOpened) {\r\n      const spinner = document.querySelector('.modal').querySelector('.map_loading_spinner')\r\n      const imgEl = document.querySelector('.modal_photo_img')\r\n\r\n      img.src = props.src[num].url\r\n      img.alt = props.src[num].alt\r\n      img.onload = () => {\r\n         spinner.classList.add('hide')\r\n         imgEl.classList.remove('hide')\r\n      }\r\n   }\r\n\r\n   return (\r\n      <div {...swipeClose} onClick={modalClick} className={\"modal\" + (props.isOpened ? \" opened\" : \"\")}>\r\n         <div className=\"modal_photo_container\">\r\n            <img src=\"/img/tail-spin.svg\" alt=\"Loading...\" className=\"map_loading_spinner\" />\r\n            <img className=\"modal_photo_img hide\" src={img.src} alt={img.alt} />\r\n         </div>\r\n         <button className={\"gallery_switch_btn prev_btn\" + (num === 0 ? \" hide\" : \"\")}></button>\r\n         <button className={\"gallery_switch_btn next_btn\" + (length === num + 1 ? \" hide\" : \"\")}></button>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default ModalPhoto","const checkUrlValidity = (url, rides) => {\r\n   const validUrls = rides.map(ride => ride.url)\r\n   const index = validUrls.findIndex(item => item === url)\r\n   if (index === -1) {\r\n      return false\r\n   } else {\r\n      return true\r\n   }\r\n}\r\n\r\nconst routeWithUrl = (url, rides, dispatch) => {\r\n   const urlValidity = checkUrlValidity(url, rides)\r\n   if (urlValidity) {\r\n      const action = {\r\n         type: 'SET-ACTIVE-RIDE',\r\n         url: url\r\n      }\r\n      dispatch(action)\r\n   } else {\r\n      return 'invalid'\r\n   }\r\n}\r\n\r\nexport default routeWithUrl","import './App.scss';\nimport React from 'react'\nimport NavbarContainer from './components/Navbar/Navbar';\nimport InfobarContainer from './components/Infobar/InfobarContainer';\nimport CollapseInfobarBtn from './components/Infobar/InfobarCollapseBtn/InfobarCollapseBtn';\nimport checkMobile from './components/Common/checkMobile';\nimport MobileHeader from './components/MobileHeader/MobileHeader';\nimport MobileNavbar from './components/MobileNavbar/MobileNavbar';\nimport Map from './components/Map/Map';\nimport { Redirect } from 'react-router';\nimport ModalPhoto from './components/Modal/ModalPhoto/ModalPhoto';\nimport routeWithUrl from './components/Common/routing';\n\n\nfunction App(props) {\n   const state = props.store.getState()\n   const dispatch = props.store.dispatch.bind(props.store)\n   const url = props.location.pathname\n\n   const onResise = () => {checkMobile(state.layout.isMobile, dispatch)}\n   React.useEffect(() => {\n      window.addEventListener('resize', onResise)\n      return window.removeEventListener('resize', onResise)\n   }, [])\n\n   const urlValidity = routeWithUrl(url, state.rides, dispatch, state.processedRides)\n   if (urlValidity === 'invalid') {\n      return <Redirect to={state.processedRides[0].url} />\n   }\n\n   const activeRideIndex = state.activeRide\n   const map = state.processedRides[activeRideIndex].map\n\n   if (!state.layout.isMobile) {\n      return (\n         <div className=\"App\">\n            <div className=\"rides_menu_container\">\n               <NavbarContainer state={state} dispatch={dispatch} />\n               <InfobarContainer state={state} dispatch={dispatch} />\n               <CollapseInfobarBtn isCollapsed={state.infobar.isCollapsed} dispatch={dispatch} />\n            </div>\n               <Map map={map} />\n               <ModalPhoto src={state.layout.modal.src} number={state.layout.modal.number}\n                  isOpened={state.layout.modal.isOpened} dispatch={dispatch} />\n         </div>\n      )\n   } else {\n      return (\n         <div className=\"App mobile\">\n            <MobileHeader navbarIsOpen={state.layout.mobileNavbarIsOpen} dispatch={dispatch} />\n            <div className=\"mobile_main\">\n               <div className=\"mobile_map\">\n                  <Map map={map} />\n               </div>\n               <div className={\"mobile_infobar\" + (state.infobar.isCollapsed ? ' collapsed' : '')}>\n                  <InfobarContainer state={state} dispatch={dispatch} />\n               </div>\n               <MobileNavbar state={state} dispatch={dispatch} />\n            </div>\n            <ModalPhoto src={state.layout.modal.src} number={state.layout.modal.number}\n               isOpened={state.layout.modal.isOpened} dispatch={dispatch} />\n         </div>\n      )\n   }\n}\n\nexport default App;","const bikers = [\r\n   {\r\n      name: 'Lavr',\r\n      id: 'Lavr',\r\n      photoSmall: './img/bikers/Lavr.jpg',\r\n      photoLarge: './img/bikers/LavrLarge.jpg'\r\n   },\r\n   {\r\n      name: 'Andy',\r\n      id: 'Andy',\r\n      photoSmall: './img/bikers/Andy.jpg',\r\n      photoLarge: './img/bikers/AndyLarge.jpg'\r\n   },\r\n   {\r\n      name: 'Nick',\r\n      id: 'Nick',\r\n      photoSmall: './img/bikers/Nick.jpg',\r\n      photoLarge: './img/bikers/NickLarge.jpg'\r\n   },\r\n   {\r\n      name: 'Paul',\r\n      id: 'Paul',\r\n      photoSmall: './img/bikers//Paul.jpg',\r\n      photoLarge: './img/bikers/PaulLarge.jpg'\r\n   },\r\n   {\r\n      name: 'Serg',\r\n      id: 'Serg',\r\n      photoSmall: './img/bikers/Serg.jpg',\r\n      photoLarge: './img/bikers/SergLarge.jpg'\r\n   }\r\n]\r\n\r\nexport default bikers","const rides = [\r\n   {\r\n      name: 'Zavidovo - Konakovo - Rogachevo - Klin',\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aea221697762f0a4e2c085d935376ee568ae63f758e80d361680811e38059591c&amp;width=100%25&amp;height=562&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 116.61,\r\n      climb: 459,\r\n      startDate: '2021-10-31',\r\n      startTime: '10:18',\r\n      fullTime: '10:51:17',\r\n      cleanTime: '7:15:08',\r\n      members: ['Lavr', 'Nick', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/6193953195',\r\n      searchWords: `Zavidovo Novozavidovo Konakovo Selihovo aerodrome Krutets Krutez Ruchyi Aleksandrovo Yahroma Yakhroma Rogachevo Rogachovo Betonka A-108 Porkovskoe Shevlyakovo Novoshchapovo Klin night`,\r\n      photos: [\r\n         'IMG_20211031_121053.jpg',\r\n         'IMG_20211031_122024.jpg',\r\n         'IMG_20211031_183920.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: 'Konakovo - Solnechnogorsk',\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A8472ba15980b6a771535d7df0fde7022adbe7e49420c0284e9b5fa633d4e3026&amp;width=100%25&amp;height=507&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 90.61,\r\n      climb: 539,\r\n      startDate: '2021-08-15',\r\n      startTime: '12:13',\r\n      fullTime: '9:12:25',\r\n      cleanTime: '4:53:44',\r\n      members: ['Lavr', 'Paul', 'Nick', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/5798918869',\r\n      searchWords: `Konakovo Selihovo Krutets Ruchyi Pustyn Alexandrovo Yahroma Yakhroma Rogachevo Rogachovo Rogachovskoe highway Tarakanovo pond Tolstyakovo Leningradskoy highway Solnechnogorsk Senej Senezh Podsolnechnaya`,\r\n      photos: [\r\n         'PXL_20210815_134724022.jpg',\r\n         'PXL_20210815_135331511.jpg',\r\n         'PXL_20210815_153251515.jpg',\r\n         'PXL_20210815_174156622.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Through Malino's jungle\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A502b1ca7d98ef2d4a8c5a08866594227109af4d9af79bab4d096dbdde10f8025&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 28.37,\r\n      climb: 226,\r\n      startDate: '2021-07-25',\r\n      startTime: '14:35',\r\n      fullTime: '3:51:03',\r\n      cleanTime: '2:03:50',\r\n      members: ['Lavr', 'Paul', 'Nick', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/5686264901',\r\n      searchWords: `Zelenograd Malino Firsanovka Mtsyri Mtsiri Mziri Mzyru Serednikovo Serednyakovo Brehovo Brekhovo Bryokhovo Bryohovo Brohovo Pyatnitskoe Pyatnickoe Ruzino CIE `,\r\n      photos: []\r\n   },\r\n   {\r\n      name: \"To Pyatnitsa through Povarovo\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A9fcf7c4415e26a7daf7ce35c57b326981fb8597413161bfb5613dc8ea337f216&amp;width=100%25&amp;height=368&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 40.27,\r\n      climb: 1541,\r\n      startDate: '2021-06-20',\r\n      startTime: '14:35',\r\n      fullTime: '4:04:06',\r\n      cleanTime: '2:16:37',\r\n      members: ['Lavr', 'Nick', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/5503081364',\r\n      searchWords: `Zelenograd Alabushevo Dedeshino Dedyoshino CKAD Depo Povarovo Povarovka wheel punkture Berezki Beryozki Alekseevskoe Kurilovo Pyatnitsa Pyatnica Shevlino Istra pond swimming`,\r\n      photos: [\r\n         'IMG_20210620_173603.jpg',\r\n         'IMG_20210620_183839.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Dirty journey to Pavlovskaya Sloboda\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A52022963fe77b0760546402b269b136369e1c0eacb2dd1dd4007053064815637&amp;width=100%25&amp;height=484&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 63.97,\r\n      climb: 465,\r\n      startDate: '2021-05-07',\r\n      startTime: '11:14',\r\n      fullTime: '8:34:21',\r\n      cleanTime: '5:24:26',\r\n      members: ['Lavr', 'Nick', 'Paul', 'Serg'],\r\n      stravaLink: 'https://www.strava.com/activities/5257813977',\r\n      searchWords: `Zelenograd Pyatnitskoe Pyatnickoe Vianor Krankino Nefedyevo Dedovsk Burger King Lobanovo Leshkovo Pavlovsaya Sloboda Istra river swimming Rozhdesteveno Rojdestveno Snegiri Selivaniha Dedovo Talyzino Bakeevo Goretovka Georgievskoe`,\r\n      photos: [\r\n         'IMG_20210507_114057.jpg',\r\n         'IMG_20210507_132101.jpg',\r\n         'IMG_20210507_160611.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Iksha - Pushkino - Dolgoprudniy\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aded685440c9370e219b6f00f0e09f64afa1c0112185739c43f1140ae63332129&amp;width=100%25&amp;height=476&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 87.73,\r\n      climb: 2271,\r\n      startDate: '2021-05-02',\r\n      startTime: '09:20',\r\n      fullTime: '8:16:09',\r\n      cleanTime: '5:45:04',\r\n      members: ['Lavr', 'Nick', 'Serg'],\r\n      stravaLink: 'https://www.strava.com/activities/5231113160',\r\n      searchWords: `Morozki A-107 Betonka gas station Iksha Rozhdestvenno Rojdestvenno Tishkovo Pushkino Mamontovskaya Mamontovka Klyazma Boltino Dolgopurdniy Dolgoprudnaya Moscow channel Khimki Levoberezhnaya Levoberejnaya`,\r\n      photos: [\r\n         'IMG_20210502_094313.jpg',\r\n         'IMG_20210502_112101.jpg',\r\n         'IMG_20210502_113245.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Ring through Moscow and Krasnogorsk\",\r\n      map: `str<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A5ccc2c04f4b0008649f11ff6a5c6342d96fecafed1e74cc76ad27a9afd0234ad&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 150.56,\r\n      climb: 907,\r\n      startDate: '2020-07-25',\r\n      startTime: '10:55',\r\n      fullTime: '12:41:55',\r\n      cleanTime: '9:27:53',\r\n      members: ['Lavr', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/3813354535',\r\n      searchWords: `Zelenograd Vostochka Firsanovskoe highway Firsanovka Shodnya Skhodnya Podrezkovo Cherkizovo Cherkizovskiy pond Klyazma river Novoe highway Dolgoprudniy Hlebnikovo Khlebnikovo Dmitrovskoe Afanasovo Belyaninovo Ostashkovskoe Moscow Medvedkovo Yauza Sviblovo Botanicheskiy garden VDNH Timiryazevskiy Krasniy Krasnyj Baltiets Baltiec Strogino Myakinino Crocus Krokus Pavshino Krasnogorsk Snejkom Ilyinskoe Ilinskoe Arhangelskoe Arkhangelskoe Lohin ostrov Lokhin island Krasnogorskaya Volokolamskoe Saburovo Pyatnitskoe Pyatnickoe Yurlovo Brehovo Brekhovo Bryohovo Bryokhovo Kutuzovskoe night`,\r\n      photos: []\r\n   },\r\n   {\r\n      name: \"Solnechnogorsk - Yakhroma - Zelenograd\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A9c04de5659479fdd8e90aa8a8f67023b92af302dc94f7f1a753d3366ded6375a&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 112.78,\r\n      climb: 1267,\r\n      startDate: '2020-07-05',\r\n      startTime: '09:57',\r\n      fullTime: '11:48:59',\r\n      cleanTime: '7:13:28',\r\n      members: ['Lavr', 'Nick', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/3720632658',\r\n      searchWords: `Solnechnogorsk Podsolnechnaya Senej Senezh Timonovo Kalina Zaovrazhye Zaovrajye Rogachevskoe highway Arbuzovo Olgovo Apraskinyh manor Yahroma Yakhroma Dmitrovskoe Dedenevo Shukolovo Varvarino wheel puncture Morozki CKAD Kholmy Porkov Lyalovo Mendeleevo Lyalovskoe Rjavki Rzhavki`,\r\n      photos: [\r\n         'IMG_20200705_114925.jpg',\r\n         'IMG_20200705_130908.jpg',\r\n         'IMG_20200705_175028.jpg',\r\n         'IMG_20200705_183124.jpg',\r\n         'IMG_20200705_193859.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Manikhino - Istra - darky CKAD - Zelenograd\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A3a8223fd337d72848efb864c9e24f9ad07b2ece458bdb19ec2edbf53305bfffd&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 82,\r\n      climb: 183,\r\n      startDate: '2020-06-20',\r\n      startTime: '14:40',\r\n      fullTime: '8:20:00',\r\n      cleanTime: '8:20:00',\r\n      members: ['Lavr', 'Nick', 'Paul', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/3645623919',\r\n      searchWords: `Manihino Manikhino Volokolamskoy highway Istra town Tesla towers New Herusalem Lamishino pond swim CKAD Betonka Pyatnitskoe Pyatnickoe Zhilino Jilino Andreevka Zelenograd`,\r\n      photos: [\r\n         'IMG_20200620_134513.jpg',\r\n         'IMG_20200620_154818.jpg',\r\n         '0DjnlAYpoj0.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Zelenograd - Krasnogorsk - Zvenigorod - Snegiri\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A5b4fb76257fafb94aa5825008dcfd156eb5dbfde22c48ac29423f2717280509d&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 118.46,\r\n      climb: 837,\r\n      startDate: '2020-06-27',\r\n      startTime: '08:51',\r\n      fullTime: '10:09:56',\r\n      cleanTime: '7:27:30',\r\n      members: ['Lavr', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/4472183662',\r\n      searchWords: `Zelenograd Malino Mtsyri Mcyri Mciri Mtsiri Pyatnickoe Pyatnitskoe Yurlovo Saburovo Volokolamskoe Krasnogorskaya Ilinskoe Ilyinskoe Arhangelskoe Arkhangelskoe Mechnikovo Nikolina gora mountain Ivanovka Maslich Slavich dacha Moscow river Zvenigorod Savvino Storojevskiy Storozhevskiy monastery Savvinskaya Sloboda CKAD Betonka Porkovskoe Pavlovskaya Istra river Rojdestveno Rozhdestveno Snegiri Selivaniha`,\r\n      photos: [\r\n         'IMG_20200627_125001.jpg',\r\n         'IMG_20200627_154630.jpg',\r\n         'IMG_20200627_194504.jpg',\r\n      ]\r\n   },\r\n   {\r\n      name: \"Klin - Volokolamsk & Snegiri - Zelenograd\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aa02aa953e30dd50fc5cc44d6a096a7872681099e94c24a53d15598034cecf512&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: (77.7 + 14.03),\r\n      climb: (772 + 71),\r\n      startDate: '2020-06-13',\r\n      startTime: '11:03',\r\n      fullTime: '7:17:26',\r\n      cleanTime: '4:44:47',\r\n      members: ['Lavr', 'Nick', 'Andy'],\r\n      stravaLink: 'https://www.strava.com/activities/4472192681',\r\n      searchWords: `Klin Pershutino Vysokovsk Kalistovo Volokolamsk Panfolovtsi Panfilovci museum Dubosekovo train Snegiri Volokolamskoe Selivaniha Bakeevo Goretovka Pyatnitskoe Georgievskoe`,\r\n      photos: [\r\n         'IMG_20200613_140625.jpg',\r\n         'IMG_20200613_144021.jpg',\r\n         'IMG_20200613_144505.jpg',\r\n         'IMG_20200613_150446.jpg',\r\n         'IMG_20200613_153716.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"From Tver to Konarovo across Saint Places\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Acbbbc2ac8be43ac3fbfc8c431eab02bdd78ddad3260b95cdff55751b6055e3fe&amp;width=100%25&amp;height=336&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 79.3,\r\n      climb: 225,\r\n      startDate: '2019-08-25',\r\n      startTime: '09:18',\r\n      fullTime: '5:26:11',\r\n      cleanTime: '4:36:11',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472204842',\r\n      searchWords: `Tver Savvatyevskoe highway Zaborovye Volga river swim Vidogoshchi Edimonovo Yuryevo-Devichye Toporok ferry Konakovo`,\r\n      photos: [\r\n         'PANO_20190825_130807.vr.jpg',\r\n         'PANO_20190825_153818.vr.jpg',\r\n         'IMG_20190825_102814.jpg',\r\n         'IMG_20190825_111512.jpg',\r\n         'IMG_20190825_123343.jpg',\r\n         'IMG_20190825_134116.jpg',\r\n         'IMG_20190825_140057.jpg',\r\n         'IMG_20190825_141326.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"To the back side of Istra\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Ac3065d6bca86923eaba019c7cbbf147e4893ee7916ffd2916768678ce7e3b2a2&amp;width=100%25&amp;height=435&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 139.65,\r\n      climb: 1141,\r\n      startDate: '2019-05-18',\r\n      startTime: '11:36',\r\n      fullTime: '9:06:00',\r\n      cleanTime: '7:50:59',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472205448',\r\n      searchWords: `Zelenograd Georgievskoe highway Goretovka Bakeevo Selivaniha Snegiri Volokolamskoe Istra New Herusalem Buzharovo Bujarovo Betonka A-108 Tiliktino Kuznetsovo Kuznecovo Shchekino Dron Andy dacha Ozhogino Ojogino Pyatnitskoe Pyatnickoe Podsolnechnaya Solnechnogorsk`,\r\n      photos: []\r\n   },\r\n   {\r\n      name: \"Assault attempt of under constructed CKAD\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aee161e8614e5dc0dd48abdbe03433229a435d569625634b34fce55080963ebe4&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 30.29,\r\n      climb: 297,\r\n      startDate: '2019-04-20',\r\n      startTime: '14:18',\r\n      fullTime: '2:11:50',\r\n      cleanTime: '1:57:31',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472268451',\r\n      searchWords: `Zelenogradskiy CKAD Podosinki Morozki`,\r\n      photos: [\r\n         'IMG_20190420_141426.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Hike to Yaroslavl, day 2\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aa57658c2eab9be5c2d0e957b80590da7cf282fa40f22463d3ece013d231f6e71&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 48.3,\r\n      climb: 239,\r\n      startDate: '2018-07-29',\r\n      startTime: '08:38',\r\n      fullTime: '3:16:25',\r\n      cleanTime: '2:45:08',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472290953',\r\n      searchWords: `tent palatka bushcraft night Ustye river Ustie Yaroslavskoe highway Semibratovo Yaroslavl`,\r\n      photos: [\r\n         'IMG_20180729_110602.jpg',\r\n         'IMG_20180729_115906.jpg',\r\n         'IMG_20180729_121151.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"Hike to Yaroslavl, day 1\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A75a667968ec739763f4972196875bad59d4a75726481572487ad124dad46dbc8&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 143.54,\r\n      climb: 998,\r\n      startDate: '2018-07-28',\r\n      startTime: '10:52',\r\n      fullTime: '10:09:56',\r\n      cleanTime: '7:40:36',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472291668',\r\n      searchWords: `Naugolniy Sergiev Posad Yaroslavskoe highway Svatkovo Glebovskoe Pereslavl Zalesskiy Pereslavl-Zalesskiy Nero lake Varus bay Rostov Ustye Ustie river tent palatka bushcraft night`,\r\n      photos: [\r\n         'IMG_20180728_082637.jpg',\r\n         'IMG_20180728_130220_01.jpg',\r\n         'IMG_20180728_145607.jpg',\r\n         'IMG_20180728_170859.jpg',\r\n         'IMG_20180728_193500.jpg',\r\n         'IMG_20180728_194927.jpg'\r\n      ]\r\n   },\r\n   {\r\n      name: \"From Zvenigorod to Mozhaysk and Borodino\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Ad9e8826de5283c7bb13aabc4e9e7075db6c3109530abe31303defe776ffe776e&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 100.59,\r\n      climb: 781,\r\n      startDate: '2018-07-14',\r\n      startTime: '09:57',\r\n      fullTime: '9:09:00',\r\n      cleanTime: '4:52:07',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472291139',\r\n      searchWords: `Zvenigorod Savvinskaya Sloboda Tuchkovo Mars Moscow river mouth swim A-108 Betonka Mojaysk Mozhaysk Borodino Borodinskoe pole field museum`,\r\n      photos: [\r\n         'IMG_20180714_171055.jpg',\r\n         'IMG_20180714_192138.jpg'\r\n\r\n      ]\r\n   },\r\n   {\r\n      name: \"Autumn trip around Moscow\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Ae1726821540dbf35a3103ca223a5e129a1c2364c617f972824a3ee1cc8fbee84&amp;width=100%25&amp;height=382&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 82.76,\r\n      climb: 594,\r\n      startDate: '2017-09-23',\r\n      startTime: '13:27',\r\n      fullTime: '6:53:15',\r\n      cleanTime: '5:27:55',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: 'https://www.strava.com/activities/4472343428',\r\n      searchWords: `Moscow Strogino Krylatskoe Fili Phili Poklonnaya gora Victory park Gorky Gorkogo`,\r\n      photos: []\r\n   },\r\n   {\r\n      name: \"Journey to the glory of Chester Bennington\",\r\n      map: `<script type=\"text/javascript\" charset=\"utf-8\" async src=\"https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aa1abd56903063854530bf5c50415e036b8debbc4a98932563fbebaa7901b6951&amp;width=100%25&amp;height=600&amp;lang=ru_RU&amp;scroll=true\"></script>`,\r\n      distance: 164.75,\r\n      climb: 0,\r\n      startDate: '2017-07-22',\r\n      startTime: '11:15',\r\n      fullTime: '10:50:00',\r\n      cleanTime: '10:50:00',\r\n      members: ['Lavr', 'Nick'],\r\n      stravaLink: '',\r\n      searchWords: `Zelenograd Lyalovskoe highway Mendeleevo Lyalovo Pokrov Sergiev Posad Bogorodskoe Saburnovo Verbilki Novonikolskoe Zaprudnya Dmitrovskoe Tempy Moscow channel Meldino ferry Spridovo Nizhnie Nijnie Vyselki Staroe Domlino Konakovo night`,\r\n      photos: [\r\n         'IMG_20170722_082508.jpg',\r\n         'IMG_20170722_110859.jpg',\r\n         'IMG_20170722_143709.jpg',\r\n         'IMG_20170722_174029.jpg',\r\n         'IMG_20170722_202800.jpg',\r\n         'IMG_20170723_004534.jpg'\r\n      ]\r\n   }\r\n]\r\n\r\nexport default rides\r\n","import bikers from \"./bikers-data\";\r\nimport rides from \"./rides-data\";\r\nimport { convertStrToDate, convertStrToMs } from \"../components/Common/utilites\";\r\nimport checkMobile from \"../components/Common/checkMobile\";\r\n\r\nconst store = {\r\n   _state: {\r\n      rides: [],\r\n      processedRides: [],\r\n      bikers: [],\r\n      activeRide: null,\r\n      infobar: {\r\n         isCollapsed: false\r\n      },\r\n      navbar: {\r\n         filterMenuIsOpened: false,\r\n         sortMenuIsOpened: false,\r\n         output: {\r\n            sortParameter: 'date',\r\n            sortFromBiggest: true,\r\n            filteredBikers: []\r\n         }\r\n      },\r\n      layout: {\r\n         modal: {\r\n            isOpened: false,\r\n            src: null,\r\n            number: null\r\n         },\r\n         mobileNavbarIsOpen: true,\r\n         isMobile: false\r\n      }\r\n   },\r\n\r\n   _callSubscriber() {\r\n   },\r\n\r\n   subscribe(observer) {\r\n      this._callSubscriber = observer\r\n   },\r\n\r\n   _processRides() {\r\n      let tempArr = [...this._state.rides]\r\n      const output = this._state.navbar.output\r\n\r\n      // SORTING\r\n\r\n      const sortRides = (parameter) => {\r\n         if (output.sortFromBiggest) {\r\n            tempArr.sort((a, b) => a[parameter] > b[parameter] ? -1 : 1)\r\n         } else {\r\n            tempArr.sort((a, b) => a[parameter] > b[parameter] ? 1 : -1)\r\n         }\r\n      }\r\n\r\n      switch (output.sortParameter) {\r\n         case 'date':\r\n            sortRides('startDate')\r\n            break\r\n         case 'distance':\r\n            sortRides('distance')\r\n            break\r\n         case 'time':\r\n            sortRides('cleanTime')\r\n            break\r\n         case 'speed':\r\n            sortRides('averageSpeed')\r\n            break\r\n         default:\r\n            sortRides('startDate')\r\n      }\r\n\r\n      // FILTERING\r\n\r\n      const checkBikers = (ride, bikers) => {\r\n         for (let biker of bikers) {\r\n            if (ride.members.find(member => member === biker)) {\r\n               return true\r\n            }\r\n         }\r\n         return false\r\n      }\r\n\r\n      const tempArrFiltered = tempArr.filter(ride => checkBikers(ride, output.filteredBikers))\r\n      if (tempArrFiltered.length > 0) {\r\n         this._state.processedRides = [...tempArrFiltered]\r\n      } else {\r\n         this._state.processedRides = [...tempArr]\r\n      }\r\n   },\r\n\r\n   getState() {\r\n      return this._state\r\n   },\r\n\r\n   dispatch(action) {\r\n      switch (action.type) {\r\n         case 'SET-ACTIVE-RIDE':\r\n            const index = this._state.processedRides.findIndex(el => el.url === action.url)\r\n            if (index !== -1) {\r\n               this._state.activeRide = index\r\n            } else {\r\n               this._state.activeRide = 0\r\n            }\r\n            break\r\n         case 'TOGGLE-MOBILE-LAYOUT':\r\n            if (this._state.layout.isMobile !== action.mobile) {\r\n               this._state.layout.isMobile = action.mobile\r\n               this._callSubscriber()\r\n            }\r\n            break\r\n         case 'TOGGLE-FILTER-MENU':\r\n            if (this._state.navbar.filterMenuIsOpened) {\r\n               this._state.navbar.filterMenuIsOpened = false\r\n            } else {\r\n               this._state.navbar.sortMenuIsOpened = false\r\n               this._state.navbar.filterMenuIsOpened = true\r\n            }\r\n            this._callSubscriber()\r\n            break\r\n         case 'TOGGLE-FILTERED-BIKER':\r\n            const filteredBikers = this._state.navbar.output.filteredBikers\r\n            const filterIndex = filteredBikers.findIndex(b => b === action.bikerId)\r\n            if (filterIndex === -1) {\r\n               filteredBikers.push(action.bikerId)\r\n               filteredBikers.sort((a, b) => a > b ? 1 : -1)\r\n            } else {\r\n                  filteredBikers.splice(filterIndex, 1)\r\n            }\r\n            this._processRides()\r\n            this._callSubscriber()\r\n            break\r\n         case 'TOGGLE-SORT-MENU':\r\n            if (this._state.navbar.sortMenuIsOpened) {\r\n               this._state.navbar.sortMenuIsOpened = false\r\n            } else {\r\n               this._state.navbar.filterMenuIsOpened = false\r\n               this._state.navbar.sortMenuIsOpened = true\r\n            }\r\n            this._callSubscriber()\r\n            break\r\n         case 'TOGGLE-RIDES-SORT':\r\n            this._state.navbar.output.sortParameter = action.sortParameter\r\n            this._state.navbar.output.sortFromBiggest = action.sortFromBiggest\r\n            this._state.navbar.sortMenuIsOpened = false\r\n            this._processRides()\r\n            this._callSubscriber()\r\n            break\r\n         case 'TOOGLE-INFOBAR-COLLAPSE':\r\n            this._state.infobar.isCollapsed\r\n               ? this._state.infobar.isCollapsed = false\r\n               : this._state.infobar.isCollapsed = true\r\n            document.querySelector('.infobar').scrollTop = 0\r\n            this._callSubscriber()\r\n            break\r\n         case 'INFOBAR-HEADER-SWIPED':\r\n            if (action.dir === 'Up') {\r\n               if (this._state.infobar.isCollapsed) {\r\n                  this._state.infobar.isCollapsed = false\r\n               }\r\n            }\r\n            if (action.dir === 'Down') {\r\n               if (!this._state.infobar.isCollapsed) {\r\n                  this._state.infobar.isCollapsed = true\r\n               }\r\n            }\r\n            document.querySelector('.infobar').scrollTop = 0\r\n            this._callSubscriber()\r\n            break\r\n         case 'TOGGLE-MOBILE-MENU':\r\n            this._state.layout.mobileNavbarIsOpen \r\n               ? this._state.layout.mobileNavbarIsOpen = false\r\n               : this._state.layout.mobileNavbarIsOpen = true\r\n            this._callSubscriber()\r\n            break\r\n         case 'OPEN-MODAL-PHOTO':\r\n            this._state.layout.modal.src = action.src\r\n            action.number \r\n               ? this._state.layout.modal.number =  action.number\r\n               : this._state.layout.modal.number = 0\r\n            this._state.layout.modal.isOpened = true\r\n            this._callSubscriber()\r\n            break\r\n         case 'CLOSE-MODAL-PHOTO':\r\n            this._state.layout.modal.src = null\r\n            this._state.layout.modal.alt = null\r\n            this._state.layout.modal.isOpened = false\r\n            this._callSubscriber()\r\n            break\r\n         default:\r\n            console.error(`unknown action type: ${action.type}`)\r\n      }\r\n   },\r\n\r\n   initState() {\r\n      initBikers.bind(this)()\r\n      initRides.bind(this)()\r\n      if (!this._state.activeRide) {\r\n         this._state.activeRide = 0\r\n      }\r\n      checkMobile(this._state.layout.isMobile, this.dispatch.bind(this))\r\n      if (this._state.layout.isMobile) {\r\n         this._state.infobar.isCollapsed = true\r\n      }\r\n\r\n      function initBikers() {\r\n         this._state.bikers.length = 0\r\n         bikers.forEach(biker => {\r\n            this._state.bikers = [...this._state.bikers, biker]\r\n         })\r\n         this._state.bikers.sort((a, b) => {\r\n            if (a.id > b.id) {\r\n               return 1\r\n            } else return -1\r\n         })\r\n      }\r\n\r\n      function initRides() {\r\n         this._state.rides.length = 0\r\n         rides.forEach(el => {\r\n            let ride = {\r\n               name: el.name,\r\n               id: `${el.startDate}T${el.startTime}`.match(/[0-9]/gi).join(''),\r\n               url: '/rides/' + el.startDate,\r\n               map: el.map,\r\n               startDate: convertStrToDate(el.startDate, el.startTime),\r\n               fullTime: convertStrToMs(el.fullTime),\r\n               cleanTime: convertStrToMs(el.cleanTime),\r\n               distance: el.distance,\r\n               climb: el.climb,\r\n               averageSpeed: +(el.distance / convertStrToMs(el.cleanTime) * 1000 * 60 * 60).toFixed(1),\r\n               members: el.members,\r\n               stravaLink: el.stravaLink,\r\n               photos: [...el.photos].map((p) => {\r\n                  return {\r\n                     url: `./img/photos/${p}`,\r\n                     alt: `Photo from ${el.name} ride`\r\n                  }\r\n               })\r\n            }\r\n            this._state.rides = [...this._state.rides, ride]\r\n         })\r\n         this._state.rides.sort((a, b) => {\r\n            if (a.id > b.id) {\r\n               return -1\r\n            } else return 1\r\n         })\r\n         this._state.processedRides = [...this._state.rides]\r\n      }\r\n   }\r\n}\r\n\r\nexport default store\r\nwindow.store = store\r\nwindow.state = store.getState()","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport store from './store/store';\nimport { HashRouter } from 'react-router-dom';\nimport { Route } from 'react-router'\n\nstore.initState()\n\nconst rerenderEntireTree = () => {\n   ReactDOM.render(\n      <React.StrictMode>\n         <HashRouter>\n            <Route path='/' \n               render={({ location }) => <App location={location} store={store} />} />\n         </HashRouter>\n      </React.StrictMode>,\n      document.getElementById('root')\n    );\n}\n\nrerenderEntireTree()\nstore.subscribe(rerenderEntireTree)\n\n\n"],"sourceRoot":""}