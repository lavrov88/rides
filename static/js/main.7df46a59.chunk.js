(this.webpackJsonprides=this.webpackJsonprides||[]).push([[0],Array(32).concat([function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(1),r=a.n(s),i=a(20),n=a.n(i),c=(a(32),a(33),a(14)),o=(a(34),a(35),a(0)),l=function(e){return Object(o.jsxs)("li",{"data-biker-id":e.id,className:"filter_menu_item"+(e.isActive?" active":""),children:[Object(o.jsx)("div",{className:"filter_menu_item__img",children:Object(o.jsx)("img",{src:e.img,alt:e.name})}),Object(o.jsxs)("div",{className:"filter_menu_item__name",children:["Mr. ",e.name]})]})},d=function(e){var t=e.allBikers.map((function(t){return Object(o.jsx)(l,{id:t.id,isActive:(a=t.id,!!e.filteredBikers.find((function(e){return e===a}))),name:t.name,img:t.photoSmall},t.id);var a}));return Object(o.jsx)("ul",{onClick:function(t){if(t.target.closest(".filter_menu_item")){var a={type:"TOGGLE-FILTERED-BIKER",bikerId:t.target.closest(".filter_menu_item").dataset.bikerId};e.dispatch(a)}},className:"filter_menu_items",children:t})},m=(a(37),function(e){return Object(o.jsx)("li",{children:Object(o.jsxs)("div",{"data-sort-parameter":e.type,className:"sort_menu_popup_item".concat(e.isActive?" "+e.isActive:""),children:[Object(o.jsx)("div",{className:"sort_menu_popup_item__name",children:e.name}),Object(o.jsx)("button",{className:"sort_menu_popup_item__btn smallest",children:e.sort2}),Object(o.jsx)("button",{className:"sort_menu_popup_item__btn biggest",children:e.sort1})]})})}),u=function(e){var t=e.sortParameter,a=e.sortFromBiggest,s=function(e){return t===e&&(a?"fromBiggest":"fromSmallest")},r=[{name:"By date:",type:"date",sort1:"Latest",sort2:"Oldest",isActive:s("date")},{name:"By distance:",type:"distance",sort1:"Longest",sort2:"Shortest",isActive:s("distance")},{name:"By average speed:",type:"speed",sort1:"Fastest",sort2:"Slowest",isActive:s("speed")},{name:"By riding time:",type:"time",sort1:"Longest",sort2:"Shortest",isActive:s("time")}];return Object(o.jsx)("ul",{onClick:function(t){if(t.target.classList.contains("sort_menu_popup_item__btn")){var a={type:"TOGGLE-RIDES-SORT",sortParameter:t.target.closest(".sort_menu_popup_item").dataset.sortParameter,sortFromBiggest:t.target.classList.contains("biggest")};e.dispatch(a)}},children:r.map((function(e){return Object(o.jsx)(m,{name:e.name,type:e.type,sort1:e.sort1,sort2:e.sort2,isActive:e.isActive},e.type)}))})},p=(a(38),function(e){return Object(o.jsxs)("div",{className:"search_input__wrapper",children:[Object(o.jsx)("input",{autoFocus:!0,className:"search_input__input",type:"text",placeholder:"Place, road, rider, year, etc.",value:e.searchValue,onChange:function(t){var a={type:"SET-SEARCH-VALUE",payload:t.target.value};e.dispatch(a)}}),Object(o.jsx)("div",{className:"search_input__clear_btn_wrapper",children:Object(o.jsx)("button",{onClick:function(){e.dispatch({type:"SET-SEARCH-VALUE",payload:""})},className:"search_input__clear_btn"})})]})}),h=function(e){var t=e.navbar.filterMenuIsOpened,a=e.navbar.searchMenuIsOpened,s=e.navbar.sortMenuIsOpened,r=function(){var t=e.bikers,a=e.navbar.output.filteredBikers;return a.length===t.length||0===a.length||e.navbar.filterMenuIsOpened?null:1===e.navbar.output.filteredBikers.length?"(Mr. ".concat(e.navbar.output.filteredBikers[0]," only)"):"(".concat(a.length,"/").concat(t.length,")")},i=function(t){return function(){var a={type:"TOGGLE-".concat(t,"-MENU")};e.dispatch(a)}},n=i("FILTER"),c=i("SEARCH"),l=i("SORT");return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"manage_list",children:[Object(o.jsxs)("div",{className:"manage_list__global_buttons",children:[Object(o.jsx)("button",{onClick:c,className:"manage_list__btn search_btn"+(a?" active":""),children:Object(o.jsx)("img",{src:"./img/magnifying-glass.png",className:"manage_list__btn__search_icon",alt:"S"})}),Object(o.jsxs)("button",{onClick:n,className:"manage_list__btn filter_btn"+(t?" active":""),children:[Object(o.jsxs)("div",{className:"manage_list_btn__text",children:["Filter",r()&&":"]}),Object(o.jsx)("div",{className:"filter_btn__description",children:r()})]}),Object(o.jsx)("button",{onClick:l,className:"manage_list__btn sort_btn"+(s?" active":""),children:Object(o.jsx)("div",{className:"manage_list_btn__text",children:"Sort"})})]}),Object(o.jsxs)("div",{className:"manage_list__submenu",children:[Object(o.jsx)("div",{className:"navbar_menu_popup search_menu"+(a&&" opened"),children:Object(o.jsx)(p,{searchValue:e.navbar.output.searchValue,dispatch:e.dispatch},"search_bar")}),Object(o.jsx)("div",{className:"navbar_menu_popup filter_menu"+(t&&" opened"),children:Object(o.jsx)(d,{allBikers:e.bikers,filteredBikers:e.navbar.output.filteredBikers,dispatch:e.dispatch})}),Object(o.jsx)("div",{className:"navbar_menu_popup sort_menu"+(s&&" opened"),children:Object(o.jsx)(u,{sortParameter:e.navbar.output.sortParameter,sortFromBiggest:e.navbar.output.sortFromBiggest,dispatch:e.dispatch})})]})]})})},b=(a(39),a(40),function(e){var t=e.split(":");return 1e3*t[0]*60*60+1e3*t[1]*60+1e3*t[2]}),v=function(e){var t=Math.floor(e/1e3/60/60),a=_(Math.floor((e-1e3*t*60*60)/1e3/60));return"".concat(t,":").concat(a)},_=function(e){return+e<10?"0"+e:e},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=[];return a.push(Math.floor(e)+""),a.push((e.toFixed(t)+"").slice(-t)),a},f=function(e,t){return t.filter((function(t){return e.findIndex((function(e){return e===t.name}))>=0}))},g=a(15),O=function(e){return Object(o.jsx)("img",{src:e.photoSmall,alt:e.name,className:"rides_list_item__member_pic".concat(e.long?" long":"")})},k=function(e){var t=e.members;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{children:Object(o.jsx)(O,{photoSmall:t[0].photoSmall,name:t[0].name,long:!0})}),Object(o.jsxs)("div",{children:[Object(o.jsx)(O,{photoSmall:t[1].photoSmall,name:t[1].name}),Object(o.jsx)(O,{photoSmall:t[2].photoSmall,name:t[2].name})]})]})},y=function(e){var t=f(e.members,e.allBikers);return 3===t.length?Object(o.jsx)(k,{members:t}):2===t.length?t.map((function(e){return Object(o.jsx)(O,{photoSmall:e.photoSmall,name:e.name,long:!0},e.name)})):t.map((function(e){return Object(o.jsx)(O,{photoSmall:e.photoSmall,name:e.name},e.name)}))},x=function(e){var t=new Date(e.date),a="date"===e.sortParameter?"".concat(_(t.getDate()),".").concat(_(t.getMonth()+1)):"".concat(_(t.getDate()),".").concat(_(t.getMonth()+1),".").concat(t.getFullYear()),s=function(){var t={};return"date"===e.sortParameter||"distance"===e.sortParameter?(t.value=Math.floor(e.distance),t.unit="km"):"speed"===e.sortParameter?(t.value=j(e.speed)[0]+".",t.decimal=j(e.speed)[1],t.unit="km/h"):"time"===e.sortParameter&&(t.decimal=j(e.time/1e3/60/60)[1]>5?5:"",t.value=Math.floor(e.time/1e3/60/60)+(t.decimal>0?".":""),t.unit="h"),t};return Object(o.jsx)("div",{onClick:function(){e.dispatch({type:"TOGGLE-MOBILE-MENU"})},className:"rides_list_item",children:Object(o.jsx)(g.b,{to:e.url,children:Object(o.jsxs)("div",{className:"rides_list_item__container ".concat(e.active?" active":""),children:[Object(o.jsx)("div",{className:"rides_list_item__left",children:Object(o.jsx)("div",{className:"rides_list_item__members",children:Object(o.jsx)(y,{members:e.members,allBikers:e.allBikers})})}),Object(o.jsxs)("div",{className:"rides_list_item__center",children:[Object(o.jsx)("div",{className:"rides_list_item__name",children:e.name}),Object(o.jsx)("div",{className:"rides_list_item__date",children:a})]}),Object(o.jsx)("div",{className:"rides_list_item__right",children:Object(o.jsxs)("div",{className:"rides_list_item__distance",children:[Object(o.jsxs)("div",{className:"rides_list_item__distance_num",children:[s().value,Object(o.jsx)("span",{className:"decimal",children:s().decimal})]}),Object(o.jsx)("div",{className:"rides_list_item__distance_unit",children:s().unit})]})})]})})})},N=function(e){return Object(o.jsx)("div",{className:"header_logo",children:Object(o.jsx)("h1",{children:"Rides history"})})},M=function(e){var t,a=function(e,t,a){switch(a){case"date":var s=new Date(e.startDate),r=t?new Date(t.startDate):null;if(!r)return s.getFullYear();if(r.getFullYear()!==s.getFullYear())return s.getFullYear();break;case"distance":if(!t)return e.distance<50?"<50":e.distance>100?">100":"50-100";if(t.distance<50&&e.distance>50||t.distance>100&&e.distance<100)return"50-100";if(t.distance>50&&e.distance<50)return"<50";if(t.distance<100&&e.distance>100)return">100";break;case"speed":var i=e.distance/e.cleanTime*1e3*60*60,n=t?t.distance/t.cleanTime*1e3*60*60:null;if(!t)return i<15?"<15":i>18?">18":"15-18";if(n<15&&i>15||n>18&&i<18)return"15-18";if(n>15&&i<15)return"<15";if(n<18&&i>18)return">18";break;case"time":var c=e.cleanTime/1e3/60/60,o=t?t.cleanTime/1e3/60/60:null;if(!t)return c<4?"<4":c>7?">7":"4-7";if(o<4&&c>4||o>7&&c<7)return"4-7";if(o>4&&c<4)return"<4";if(o<7&&c>7)return">7";break;default:return null}}(e.currEl,e.prevEl,e.sortParameter),s="date"===(t=e.sortParameter)?null:"distance"===t?"km":"speed"===t?"km/h":"time"===t?"h":void 0;return a?Object(o.jsxs)("div",{className:"rides_list_separator",children:[a," ",Object(o.jsx)("span",{className:"rides_list_separator__unit",children:s})]}):null},S=function(e){var t=function(t){return e.state.activeRide===t&&(!e.state.layout.isMobile||!!e.state.layout.mobileNavbarWasTouched)};return e.state.navbar.noResultsFound?Object(o.jsx)("div",{className:"rides_list__no_results",children:"No results found..."}):e.state.processedRides.map((function(a,s,r){return Object(o.jsxs)("li",{children:[Object(o.jsx)(M,{currEl:a,prevEl:r[s-1],sortParameter:e.state.navbar.output.sortParameter}),Object(o.jsx)(x,{dispatch:e.dispatch,id:a.id,url:a.url,name:a.name,date:a.startDate,distance:a.distance,speed:a.averageSpeed,time:a.cleanTime,members:a.members,allBikers:e.state.bikers,sortParameter:e.state.navbar.output.sortParameter,active:t(s)},a.id)]},a.url)}))},T=function(e){var t=e.direction,a=e.display,s=e.handleFunction;return Object(o.jsx)("div",{className:"to_".concat(t,"_btn_wrapper").concat(a?"":" hide"),children:Object(o.jsx)("button",{onClick:s,className:"to_".concat(t,"_btn")})})},w=function(e){var t=r.a.useState(!0),a=Object(c.a)(t,2),s=a[0],i=a[1],n=r.a.useState(!1),l=Object(c.a)(n,2),d=l[0],m=l[1],u=e.state.layout.isMobile,p=r.a.useRef(null);return Object(o.jsxs)("div",{className:"navbar",children:[Object(o.jsx)(N,{}),Object(o.jsx)(h,{bikers:e.state.bikers,navbar:e.state.navbar,dispatch:e.dispatch}),Object(o.jsxs)("div",{onScroll:function(e){if(!u){var t=p.current.scrollTop<50,a=p.current.scrollTop+p.current.offsetHeight>p.current.scrollHeight-50;i(!!t),m(!!a)}},ref:p,className:"riders_list_wrapper",children:[Object(o.jsx)(T,{direction:"top",display:!s&&!u,handleFunction:function(){p.current.scrollTop<p.current.offsetHeight?p.current.scrollTop=0:p.current.scrollTop=p.current.scrollTop-p.current.offsetHeight+80}}),Object(o.jsx)("ul",{onClick:function(t){if(t.target.closest(".rides_list_item")){e.dispatch({type:"TOGGLE-NAVBAR-TOUCHED"})}},className:"rides_list",children:Object(o.jsx)(S,{state:e.state,dispatch:e.dispatch})})]}),Object(o.jsx)("div",{className:"right_border"}),Object(o.jsx)(T,{direction:"bottom",display:!d&&!u,handleFunction:function(){p.current.scrollTop+p.current.offsetHeight>p.current.scrollTopMax?p.current.scrollTop=p.current.scrollTopMax:p.current.scrollTop+=p.current.offsetHeight-80}})]})},L=a(3),I=a(8),R=(a(46),a(47),a(48),function(e){var t=e.name,a=e.value,s=e.unit;return Object(o.jsxs)("li",{className:"stats_item",children:[Object(o.jsx)("div",{className:"stats_item__item_name",children:t}),Object(o.jsx)("div",{className:"stats_item__item_value",children:Object(o.jsxs)("div",{children:[a," ",Object(o.jsxs)("span",{className:"stats_item__item_value_unit",children:[" ",s]})]})})]})}),A=function(e){var t=e.isOpened,a=e.photoSmall,s=e.photoLarge,r=e.name,i=e.period,n=e.riderCardElement,c=e.ridesCount,l=e.totalDistance,d=e.isFading,m=e.averageSpeed,u=e.closeRiderCard,p=e.dispatch,h=null;h=i[0]===i[1]?"of ".concat(i[0]):"".concat(i[0],"-").concat(i[1]);return Object(o.jsxs)("div",{ref:n,className:"rider_card"+(t?" opened":"")+(d?" fading":""),children:[Object(o.jsxs)("div",{className:"rider_card_header",children:[Object(o.jsxs)("div",{onClick:function(){p({type:"OPEN-MODAL-PHOTO",src:[{url:s,alt:r}]})},className:"rider_card_header_photo",children:[Object(o.jsx)("img",{src:a,alt:"Mr. ".concat(r),className:"rider_card_header_photo__img"}),Object(o.jsx)("img",{src:"./img/zoom_in.svg",alt:"zoom_in",className:"rider_card_header_photo__img_zoom"})]}),Object(o.jsx)("div",{className:"rider_card_header__name",children:Object(o.jsxs)("h3",{children:["Mr. ",r]})})]}),Object(o.jsxs)("div",{className:"rider_card_main",children:[Object(o.jsxs)("h4",{className:"rider_card_stats_title",children:["Total in the period ",h,":"]}),Object(o.jsxs)("ul",{className:"stats",children:[Object(o.jsx)(R,{name:"Rides",value:c}),Object(o.jsx)(R,{name:"Distance",value:l,unit:"km"}),Object(o.jsx)(R,{name:"Average speed",value:m,unit:"km/h"})]})]}),Object(o.jsx)("button",{onClick:u,className:"close_rider_card_btn"})]})},E=function(e){var t=e.allBikers,a=e.rides,s=e.riderCard,i=e.dispatch,n=r.a.useState(!1),l=Object(c.a)(n,2),d=l[0],m=l[1],u=r.a.useRef(null);r.a.useEffect((function(){var e=function(e){e.target.closest(".rider_card")||e.target.closest(".modal")||!h||p()};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}));var p=function(){var e={type:"CLOSE-RIDER-CARD"};m(!0),u.current.ontransitionend=function(t){t.target===u.current&&(i(e),m(!1))}},h=s.isOpened,b=s.rider,v=null,_=null,j=null,f=null,g=[],O=[],k=[],y=0,x=0;return b&&(_=(v=t.filter((function(e){return e.id===b}))[0]).photoSmall,j=v.photoLarge,f=v.name,g=Object(L.a)(a).filter((function(e){return e.members.includes(f)})),k=[(O=Object(L.a)(g).map((function(e){return e.id.slice(0,4)})).sort())[0],O[O.length-1]],x=((y=Math.round(g.reduce((function(e,t){return e+t.distance}),0)))/(g.reduce((function(e,t){return e+t.cleanTime}),0)/1e3/60/60)).toFixed(1)),Object(o.jsx)(A,{isOpened:h,isFading:d,photoSmall:_,photoLarge:j,name:f,period:[k[0],k[1]],ridesCount:g.length,totalDistance:y,averageSpeed:x,closeRiderCard:p,dispatch:i,riderCardElement:u})},D=function(e){return(new Image).src=e.photoLarge,Object(o.jsxs)("ul",{className:"ride_member_item","data-name":e.name,children:[Object(o.jsx)("div",{className:"ride_member_item__photo",children:Object(o.jsx)("img",{src:e.photoSmall,alt:"Mr. ".concat(e.name),className:"ride_member_item__photo_img"})}),Object(o.jsxs)("div",{className:"ride_member_item__name",children:["Mr. ",e.name]})]})},P=function(e){var t=e.members.map((function(e){return Object(o.jsx)(D,{name:e.name,photoSmall:e.photoSmall,photoLarge:e.photoLarge},e.id)}));return Object(o.jsxs)("div",{onClick:function(t){if(t.target.closest(".ride_member_item")){var a={type:"OPEN-RIDER-CARD",payload:t.target.closest(".ride_member_item").dataset.name};e.dispatch(a)}},className:"ride_members",children:[Object(o.jsx)("h3",{children:"Members:"}),Object(o.jsx)("ul",{className:"ride_members_items",children:t}),Object(o.jsx)(E,{rides:e.rides,allBikers:e.allBikers,riderCard:e.riderCard,dispatch:e.dispatch})]})},G=(a(49),function(e){var t,a;return e.decimal?(t=j(e.value,e.decimal)[0]+".",a=j(e.value,e.decimal)[1],a=t.length>3?a[1]:a):(t=e.value,a=""),Object(o.jsxs)("li",{className:"ride_indicators_item",children:[Object(o.jsxs)("div",{className:"ride_indicators_item__value",children:[t,Object(o.jsx)("span",{className:"decimal",children:a}),Object(o.jsx)("span",{className:"ride_indicators_item__unit",children:e.unit?" "+e.unit:""})]}),Object(o.jsx)("div",{className:"ride_indicators_item__name",children:e.name})]})}),C=function(e){var t=new Date(e.ride.startDate),a="".concat(t.getHours(),":").concat(_(t.getMinutes()));return Object(o.jsxs)("div",{className:"ride_indicators",children:[Object(o.jsxs)("ul",{className:"ride_indicators__group group_1",children:[Object(o.jsx)(G,{value:e.ride.distance,decimal:2,unit:"km",name:"Total distance"}),Object(o.jsx)(G,{value:e.ride.climb?e.ride.climb:"n/a",unit:e.ride.climb?"m":"",name:"Climb"}),Object(o.jsx)(G,{value:e.ride.averageSpeed,decimal:1,unit:"km/h",name:"Average speed"})]}),Object(o.jsxs)("ul",{className:"ride_indicators__group group_2",children:[Object(o.jsx)(G,{value:a,name:"Start time"}),Object(o.jsx)(G,{value:v(e.ride.fullTime),name:"Full race time"}),Object(o.jsx)(G,{value:v(e.ride.cleanTime),name:"Net riding time"})]})]})},B=(a(50),function(e){return Object(o.jsx)("li",{className:"photo_item",children:Object(o.jsx)("img",{src:e.url,alt:e.alt,"data-number":e.i,className:"photo_item__photo"})})}),F=function(e){if(0===e.photos.length)return null;var t=e.photos.map((function(e,t){return Object(o.jsx)(B,{url:e.url,alt:e.alt,i:t},e.url)}));return Object(o.jsxs)("div",{className:"ride_gallery",children:[Object(o.jsx)("h3",{children:"Ride gallery"}),Object(o.jsx)("ul",{onClick:function(t){if(t.target.classList.contains("photo_item__photo")){var a={type:"OPEN-MODAL-PHOTO",src:e.photos,number:+t.target.dataset.number};e.dispatch(a)}},className:"ride_gallery_items",children:t})]})},U=a(9),K=function(e){var t=new Date(e.date),a="".concat(_(t.getDate()),".").concat(_(t.getMonth()+1),".").concat(t.getFullYear()),s=Object(U.useSwipeable)({onSwiped:function(t){if(e.isMobile){var a={type:"INFOBAR-HEADER-SWIPED",dir:t.dir};e.dispatch(a)}},preventDefaultTouchmoveEvent:!0});return Object(o.jsxs)("div",Object(I.a)(Object(I.a)({},s),{},{onClick:function(t){if(!t.target.closest("a")&&e.isMobile){e.dispatch({type:"TOOGLE-INFOBAR-COLLAPSE"})}},className:"ride_header",children:[Object(o.jsx)("div",{className:"ride_header__expand_btn"}),Object(o.jsx)("div",{className:"ride_header__name",children:Object(o.jsx)("h2",{children:e.name})}),Object(o.jsxs)("div",{className:"ride_header__subheader",children:[Object(o.jsx)("div",{className:"ride_header_date",children:a}),Object(o.jsxs)("a",{href:e.strava,target:"_blank",rel:"noreferrer",className:"strava_link"+(e.strava?"":" disabled"),children:[Object(o.jsx)("img",{src:"./img/strava.png",alt:"strava",className:"strava_logo"}),Object(o.jsx)("div",{className:"strava_text",children:"This ride in Strava"})]})]})]}))},z=function(e){var t=e.isCollapsed,a=document.querySelector(".infobar"),s=Object(U.useSwipeable)({onSwipeStart:function(t){if(e.isMobile&&!(a.scrollTop>0)&&"Down"===t.dir){e.dispatch({type:"INFOBAR-HEADER-SWIPED",dir:"Down"})}}});return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(K,{name:e.ride.name,date:e.ride.startDate,isMobile:e.isMobile,strava:e.ride.stravaLink,dispatch:e.dispatch}),Object(o.jsxs)("div",Object(I.a)(Object(I.a)({},s),{},{className:"infobar"+(t?" collapsed":""),children:[Object(o.jsx)(K,{name:e.ride.name,date:e.ride.startDate,isMobile:e.isMobile,strava:e.ride.stravaLink,dispatch:e.dispatch}),Object(o.jsx)(P,{dispatch:e.dispatch,members:e.members,rides:e.rides,allBikers:e.allBikers,riderCard:e.riderCard}),Object(o.jsx)(C,{ride:e.ride}),Object(o.jsx)(F,{photos:e.ride.photos,dispatch:e.dispatch})]}))]})},H=function(e){var t=e.state.processedRides[e.state.activeRide],a=t.members,s=Object(L.a)(e.state.bikers),r=f(a,s),i=e.state.layout.isMobile,n=e.state.infobar.isCollapsed,c=e.state.rides,l=e.state.infobar.riderCard;return Object(o.jsx)(z,{ride:t,allBikers:s,members:r,rides:c,riderCard:l,dispatch:e.dispatch,isCollapsed:n,isMobile:i})},V=(a(51),function(e){return Object(o.jsx)("button",{onClick:function(){e.dispatch({type:"TOOGLE-INFOBAR-COLLAPSE"})},className:"collapse_btn"+(e.isCollapsed?" collapsed":""),children:Object(o.jsx)("div",{className:"collapse_arrow"})})}),W=function(e,t){var a={type:"TOGGLE-MOBILE-LAYOUT"};if(window.innerWidth<960){if(e)return;a.mobile=!0,t(a)}else{if(!e)return;a.mobile=!1,t(a)}},Z=(a(52),function(e){return Object(o.jsx)("button",{className:"burger_btn"+(e.navbarIsOpen?" active":""),children:Object(o.jsx)("span",{className:"burger_btn__span"})})}),Y=function(e){var t=function(){e.dispatch({type:"TOGGLE-MOBILE-MENU"})};return Object(o.jsxs)("div",{className:"mobile_header",children:[Object(o.jsx)("div",{onClick:t,children:Object(o.jsx)(Z,{navbarIsOpen:e.navbarIsOpen})}),Object(o.jsx)("div",{onClick:t,children:Object(o.jsx)(N,{})})]})},q=(a(53),function(e){var t=e.state.layout.mobileNavbarIsOpen,a=Object(U.useSwipeable)({onSwipedLeft:function(t){e.dispatch({type:"TOGGLE-MOBILE-MENU"})}});return Object(o.jsx)("div",Object(I.a)(Object(I.a)({},a),{},{className:"mobile_navbar"+(t?" opened":""),children:Object(o.jsx)(w,{state:e.state,dispatch:e.dispatch})}))}),J=a(23),X=a(24),Q=a(27),$=a(26),ee=(a(54),function(e){var t=document.querySelector(".map_loading_spinner");t.style.display="";var a=document.documentElement.clientHeight,s=e.map.replace(/height=\d+/gm,"height=".concat(a)).replace(/.+src="|"><\/script>/gm,""),r=document.querySelector(".map");if(r.innerHTML="",s.match(/https:\/\/api-maps\.yandex\.ru.+scroll=true/gm)){var i=document.createElement("script");i.src=s,i.async=!0,r.appendChild(i),i.onload=function(){var e=new MutationObserver((function(){r.firstChild.style.height="100%",e.disconnect(),setTimeout((function(){t.style.display="none"}),1e3)}));e.observe(r,{childList:!0})}}else{var n=document.createElement("div");n.classList.add("map_error_wrapper"),n.innerHTML="<div>Map for this ride is not ready yet...</div>",r.appendChild(n),t.style.display="none"}}),te=function(e){Object(Q.a)(a,e);var t=Object($.a)(a);function a(){return Object(J.a)(this,a),t.apply(this,arguments)}return Object(X.a)(a,[{key:"componentDidMount",value:function(){ee(this.props)}},{key:"componentDidUpdate",value:function(){ee(this.props)}},{key:"render",value:function(){return Object(o.jsxs)("div",{className:"map_container",children:[Object(o.jsx)("img",{src:"./img/tail-spin.svg",alt:"Loading...",className:"map_loading_spinner"}),Object(o.jsx)("div",{className:"map_left_gradient"}),Object(o.jsx)("div",{className:"map"})]})}}]),a}(r.a.PureComponent),ae=te,se=a(2),re=(a(55),function(e){var t,a,s=r.a.useRef(null),i=r.a.useRef(null),n=r.a.useRef(null);e.isOpened&&(t=e.number,a=e.src.length);var c=function(){s.current.classList.add("fading"),s.current.ontransitionend=function(){e.dispatch({type:"CLOSE-MODAL-PHOTO"})}},l=function(){var a={type:"OPEN-MODAL-PHOTO",src:e.src,number:t-1};e.dispatch(a)},d=function(){var a={type:"OPEN-MODAL-PHOTO",src:e.src,number:t+1};e.dispatch(a)},m=Object(U.useSwipeable)({onSwiped:function(e){"Up"===e.dir||"Down"===e.dir?c():"Right"===e.dir&&t>0?l():"Left"===e.dir&&t<a-1&&d()},preventDefaultTouchmoveEvent:!0}),u=new Image;return e.isOpened&&(u.src=e.src[t].url,u.alt=e.src[t].alt,u.onload=function(){i.current.classList.add("hide"),n.current.classList.remove("hide")}),Object(o.jsxs)("div",Object(I.a)(Object(I.a)({},m),{},{onClick:function(e){e.target.classList.contains("gallery_switch_btn")?e.target.classList.contains("prev_btn")?l():d():c()},ref:s,className:"modal"+(e.isOpened?" opened":""),children:[Object(o.jsxs)("div",{className:"modal_photo_container",children:[Object(o.jsx)("img",{src:"/img/tail-spin.svg",alt:"Loading...",ref:i,className:"map_loading_spinner"}),Object(o.jsx)("img",{className:"modal_photo_img hide",ref:n,src:u.src,alt:u.alt})]}),Object(o.jsx)("button",{className:"gallery_switch_btn prev_btn"+(0===t?" hide":"")}),Object(o.jsx)("button",{className:"gallery_switch_btn next_btn"+(a===t+1?" hide":"")})]}))}),ie=function(e,t,a){var s=function(e,t){return-1!==t.map((function(e){return e.url})).findIndex((function(t){return t===e}))}(e,t);if(!s)return"invalid";a({type:"SET-ACTIVE-RIDE",url:e})};var ne=function(e){var t=e.store.getState(),a=e.store.dispatch.bind(e.store),s=t.nextRenderUrl||e.location.pathname,i=function(){W(t.layout.isMobile,a)};if(r.a.useEffect((function(){return window.addEventListener("resize",i),window.removeEventListener("resize",i)}),[]),s!==e.location.pathname)return Object(o.jsx)(se.a,{to:s});if("invalid"===ie(s,t.rides,a))return Object(o.jsx)(se.a,{to:t.processedRides[0].url});var n=t.activeRide,c=t.processedRides[n].map;return t.layout.isMobile?Object(o.jsxs)("div",{className:"App mobile",children:[Object(o.jsx)(Y,{navbarIsOpen:t.layout.mobileNavbarIsOpen,dispatch:a}),Object(o.jsxs)("div",{className:"mobile_main",children:[Object(o.jsx)("div",{className:"mobile_map",children:Object(o.jsx)(ae,{map:c,isMobile:t.layout.isMobile})}),Object(o.jsx)("div",{className:"mobile_infobar"+(t.infobar.isCollapsed?" collapsed":""),children:Object(o.jsx)(H,{state:t,dispatch:a})}),Object(o.jsx)(q,{state:t,dispatch:a})]}),Object(o.jsx)(re,{src:t.layout.modal.src,number:t.layout.modal.number,isOpened:t.layout.modal.isOpened,dispatch:a})]}):Object(o.jsxs)("div",{className:"App",children:[Object(o.jsxs)("div",{className:"rides_menu_container",children:[Object(o.jsx)(w,{state:t,dispatch:a}),Object(o.jsx)(H,{state:t,dispatch:a}),Object(o.jsx)(V,{isCollapsed:t.infobar.isCollapsed,dispatch:a})]}),Object(o.jsx)(ae,{map:c,isMobile:t.layout.isMobile}),Object(o.jsx)(re,{src:t.layout.modal.src,number:t.layout.modal.number,isOpened:t.layout.modal.isOpened,dispatch:a})]})},ce=a(25),oe=[{name:"Lavr",id:"Lavr",photoSmall:"./img/bikers/Lavr.jpg",photoLarge:"./img/bikers/LavrLarge.jpg"},{name:"Andy",id:"Andy",photoSmall:"./img/bikers/Andy.jpg",photoLarge:"./img/bikers/AndyLarge.jpg"},{name:"Nick",id:"Nick",photoSmall:"./img/bikers/Nick.jpg",photoLarge:"./img/bikers/NickLarge.jpg"},{name:"Paul",id:"Paul",photoSmall:"./img/bikers//Paul.jpg",photoLarge:"./img/bikers/PaulLarge.jpg"},{name:"Serg",id:"Serg",photoSmall:"./img/bikers/Serg.jpg",photoLarge:"./img/bikers/SergLarge.jpg"}],le=[{name:"Zavidovo - Konakovo - Rogachevo - Klin",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aea221697762f0a4e2c085d935376ee568ae63f758e80d361680811e38059591c&amp;width=100%25&amp;height=562&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:116.61,climb:459,startDate:"2021-10-31",startTime:"10:18",fullTime:"10:51:17",cleanTime:"7:15:08",members:["Lavr","Nick","Andy"],stravaLink:"https://www.strava.com/activities/6193953195",searchWords:"Zavidovo Novozavidovo Konakovo Selihovo aerodrome Krutets Krutez Ruchyi Aleksandrovo Yahroma Yakhroma Rogachevo Rogachovo Betonka A-108 Porkovskoe Shevlyakovo Novoshchapovo Klin night",photos:["IMG_20211031_121053.jpg","IMG_20211031_122024.jpg","IMG_20211031_183920.jpg"]},{name:"Konakovo - Solnechnogorsk",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A8472ba15980b6a771535d7df0fde7022adbe7e49420c0284e9b5fa633d4e3026&amp;width=100%25&amp;height=507&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:90.61,climb:539,startDate:"2021-08-15",startTime:"12:13",fullTime:"9:12:25",cleanTime:"4:53:44",members:["Lavr","Paul","Nick","Andy"],stravaLink:"https://www.strava.com/activities/5798918869",searchWords:"Konakovo Selihovo Krutets Ruchyi Pustyn Alexandrovo Yahroma Yakhroma Rogachevo Rogachovo Rogachovskoe highway Tarakanovo pond Tolstyakovo Leningradskoy highway Solnechnogorsk Senej Senezh Podsolnechnaya",photos:["PXL_20210815_134724022.jpg","PXL_20210815_135331511.jpg","PXL_20210815_153251515.jpg","PXL_20210815_174156622.jpg"]},{name:"Through Malino's jungle",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A502b1ca7d98ef2d4a8c5a08866594227109af4d9af79bab4d096dbdde10f8025&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:28.37,climb:226,startDate:"2021-07-25",startTime:"14:35",fullTime:"3:51:03",cleanTime:"2:03:50",members:["Lavr","Paul","Nick","Andy"],stravaLink:"https://www.strava.com/activities/5686264901",searchWords:"Zelenograd Malino Firsanovka Mtsyri Mtsiri Mziri Mzyru Serednikovo Serednyakovo Brehovo Brekhovo Bryokhovo Bryohovo Brohovo Pyatnitskoe Pyatnickoe Ruzino CIE ",photos:[]},{name:"To Pyatnitsa through Povarovo",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A9fcf7c4415e26a7daf7ce35c57b326981fb8597413161bfb5613dc8ea337f216&amp;width=100%25&amp;height=368&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:40.27,climb:1541,startDate:"2021-06-20",startTime:"14:35",fullTime:"4:04:06",cleanTime:"2:16:37",members:["Lavr","Nick","Andy"],stravaLink:"https://www.strava.com/activities/5503081364",searchWords:"Zelenograd Alabushevo Dedeshino Dedyoshino CKAD Depo Povarovo Povarovka wheel punkture Berezki Beryozki Alekseevskoe Kurilovo Pyatnitsa Pyatnica Shevlino Istra pond swimming",photos:["IMG_20210620_173603.jpg","IMG_20210620_183839.jpg"]},{name:"Dirty journey to Pavlovskaya Sloboda",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A52022963fe77b0760546402b269b136369e1c0eacb2dd1dd4007053064815637&amp;width=100%25&amp;height=484&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:63.97,climb:465,startDate:"2021-05-07",startTime:"11:14",fullTime:"8:34:21",cleanTime:"5:24:26",members:["Lavr","Nick","Paul","Serg"],stravaLink:"https://www.strava.com/activities/5257813977",searchWords:"Zelenograd Pyatnitskoe Pyatnickoe Vianor Krankino Nefedyevo Dedovsk Burger King Lobanovo Leshkovo Pavlovsaya Sloboda Istra river swimming Rozhdesteveno Rojdestveno Snegiri Selivaniha Dedovo Talyzino Bakeevo Goretovka Georgievskoe",photos:["IMG_20210507_114057.jpg","IMG_20210507_132101.jpg","IMG_20210507_160611.jpg"]},{name:"Iksha - Pushkino - Dolgoprudniy",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aded685440c9370e219b6f00f0e09f64afa1c0112185739c43f1140ae63332129&amp;width=100%25&amp;height=476&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:87.73,climb:2271,startDate:"2021-05-02",startTime:"09:20",fullTime:"8:16:09",cleanTime:"5:45:04",members:["Lavr","Nick","Serg"],stravaLink:"https://www.strava.com/activities/5231113160",searchWords:"Morozki A-107 Betonka gas station Iksha Rozhdestvenno Rojdestvenno Tishkovo Pushkino Mamontovskaya Mamontovka Klyazma Boltino Dolgopurdniy Dolgoprudnaya Moscow channel Khimki Levoberezhnaya Levoberejnaya",photos:["IMG_20210502_094313.jpg","IMG_20210502_112101.jpg","IMG_20210502_113245.jpg"]},{name:"Ring through Moscow and Krasnogorsk",map:'str<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A5ccc2c04f4b0008649f11ff6a5c6342d96fecafed1e74cc76ad27a9afd0234ad&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:150.56,climb:907,startDate:"2020-07-25",startTime:"10:55",fullTime:"12:41:55",cleanTime:"9:27:53",members:["Lavr","Andy"],stravaLink:"https://www.strava.com/activities/3813354535",searchWords:"Zelenograd Vostochka Firsanovskoe highway Firsanovka Shodnya Skhodnya Podrezkovo Cherkizovo Cherkizovskiy pond Klyazma river Novoe highway Dolgoprudniy Hlebnikovo Khlebnikovo Dmitrovskoe Afanasovo Belyaninovo Ostashkovskoe Moscow Medvedkovo Yauza Sviblovo Botanicheskiy garden VDNH Timiryazevskiy Krasniy Krasnyj Baltiets Baltiec Strogino Myakinino Crocus Krokus Pavshino Krasnogorsk Snejkom Ilyinskoe Ilinskoe Arhangelskoe Arkhangelskoe Lohin ostrov Lokhin island Krasnogorskaya Volokolamskoe Saburovo Pyatnitskoe Pyatnickoe Yurlovo Brehovo Brekhovo Bryohovo Bryokhovo Kutuzovskoe night",photos:[]},{name:"Solnechnogorsk - Yakhroma - Zelenograd",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A9c04de5659479fdd8e90aa8a8f67023b92af302dc94f7f1a753d3366ded6375a&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:112.78,climb:1267,startDate:"2020-07-05",startTime:"09:57",fullTime:"11:48:59",cleanTime:"7:13:28",members:["Lavr","Nick","Andy"],stravaLink:"https://www.strava.com/activities/3720632658",searchWords:"Solnechnogorsk Podsolnechnaya Senej Senezh Timonovo Kalina Zaovrazhye Zaovrajye Rogachevskoe highway Arbuzovo Olgovo Apraskinyh manor Yahroma Yakhroma Dmitrovskoe Dedenevo Shukolovo Varvarino wheel puncture Morozki CKAD Kholmy Porkov Lyalovo Mendeleevo Lyalovskoe Rjavki Rzhavki",photos:["IMG_20200705_114925.jpg","IMG_20200705_130908.jpg","IMG_20200705_175028.jpg","IMG_20200705_183124.jpg","IMG_20200705_193859.jpg"]},{name:"Manikhino - Istra - darky CKAD - Zelenograd",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A3a8223fd337d72848efb864c9e24f9ad07b2ece458bdb19ec2edbf53305bfffd&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:82,climb:183,startDate:"2020-06-20",startTime:"14:40",fullTime:"8:20:00",cleanTime:"8:20:00",members:["Lavr","Nick","Paul","Andy"],stravaLink:"https://www.strava.com/activities/3645623919",searchWords:"Manihino Manikhino Volokolamskoy highway Istra town Tesla towers New Herusalem Lamishino pond swimming CKAD Betonka Pyatnitskoe Pyatnickoe Zhilino Jilino Andreevka Zelenograd",photos:["IMG_20200620_134513.jpg","IMG_20200620_154818.jpg","0DjnlAYpoj0.jpg"]},{name:"Zelenograd - Krasnogorsk - Zvenigorod - Snegiri",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A5b4fb76257fafb94aa5825008dcfd156eb5dbfde22c48ac29423f2717280509d&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:118.46,climb:837,startDate:"2020-06-27",startTime:"08:51",fullTime:"10:09:56",cleanTime:"7:27:30",members:["Lavr","Andy"],stravaLink:"https://www.strava.com/activities/4472183662",searchWords:"Zelenograd Malino Mtsyri Mcyri Mciri Mtsiri Pyatnickoe Pyatnitskoe Yurlovo Saburovo Volokolamskoe Krasnogorskaya Ilinskoe Ilyinskoe Arhangelskoe Arkhangelskoe Mechnikovo Nikolina gora mountain Ivanovka Maslich Slavich dacha Moscow river Zvenigorod Savvino Storojevskiy Storozhevskiy monastery Savvinskaya Sloboda CKAD Betonka Porkovskoe Pavlovskaya Istra river Rojdestveno Rozhdestveno Snegiri Selivaniha",photos:["IMG_20200627_125001.jpg","IMG_20200627_154630.jpg","IMG_20200627_194504.jpg"]},{name:"Klin - Volokolamsk & Snegiri - Zelenograd",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aa02aa953e30dd50fc5cc44d6a096a7872681099e94c24a53d15598034cecf512&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:91.73,climb:843,startDate:"2020-06-13",startTime:"11:03",fullTime:"7:17:26",cleanTime:"4:44:47",members:["Lavr","Nick","Andy"],stravaLink:"https://www.strava.com/activities/4472192681",searchWords:"Klin Pershutino Vysokovsk Kalistovo Volokolamsk Panfolovtsi Panfilovci museum Dubosekovo train Snegiri Volokolamskoe Selivaniha Bakeevo Goretovka Pyatnitskoe Georgievskoe",photos:["IMG_20200613_140625.jpg","IMG_20200613_144021.jpg","IMG_20200613_144505.jpg","IMG_20200613_150446.jpg","IMG_20200613_153716.jpg"]},{name:"From Tver to Konarovo across Saint Places",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Acbbbc2ac8be43ac3fbfc8c431eab02bdd78ddad3260b95cdff55751b6055e3fe&amp;width=100%25&amp;height=336&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:79.3,climb:225,startDate:"2019-08-25",startTime:"09:18",fullTime:"5:26:11",cleanTime:"4:36:11",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472204842",searchWords:"Tver Savvatyevskoe highway Zaborovye Volga river swimming Vidogoshchi Edimonovo Yuryevo-Devichye Toporok ferry Konakovo",photos:["PANO_20190825_130807.vr.jpg","PANO_20190825_153818.vr.jpg","IMG_20190825_102814.jpg","IMG_20190825_111512.jpg","IMG_20190825_123343.jpg","IMG_20190825_134116.jpg","IMG_20190825_140057.jpg","IMG_20190825_141326.jpg"]},{name:"To the back side of Istra",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Ac3065d6bca86923eaba019c7cbbf147e4893ee7916ffd2916768678ce7e3b2a2&amp;width=100%25&amp;height=435&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:139.65,climb:1141,startDate:"2019-05-18",startTime:"11:36",fullTime:"9:06:00",cleanTime:"7:50:59",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472205448",searchWords:"Zelenograd Georgievskoe highway Goretovka Bakeevo Selivaniha Snegiri Volokolamskoe Istra New Herusalem Buzharovo Bujarovo Betonka A-108 Tiliktino Kuznetsovo Kuznecovo Shchekino Dron Andy dacha Ozhogino Ojogino Pyatnitskoe Pyatnickoe Podsolnechnaya Solnechnogorsk",photos:[]},{name:"Assault attempt of under constructed CKAD",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aee161e8614e5dc0dd48abdbe03433229a435d569625634b34fce55080963ebe4&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:30.29,climb:297,startDate:"2019-04-20",startTime:"14:18",fullTime:"2:11:50",cleanTime:"1:57:31",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472268451",searchWords:"Zelenogradskiy CKAD Podosinki Morozki",photos:["IMG_20190420_141426.jpg"]},{name:"Hike to Yaroslavl, day 2",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aa57658c2eab9be5c2d0e957b80590da7cf282fa40f22463d3ece013d231f6e71&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:48.3,climb:239,startDate:"2018-07-29",startTime:"08:38",fullTime:"3:16:25",cleanTime:"2:45:08",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472290953",searchWords:"tent palatka bushcraft night Ustye river Ustie Yaroslavskoe highway Semibratovo Yaroslavl",photos:["IMG_20180729_110602.jpg","IMG_20180729_115906.jpg","IMG_20180729_121151.jpg"]},{name:"Hike to Yaroslavl, day 1",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A75a667968ec739763f4972196875bad59d4a75726481572487ad124dad46dbc8&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:143.54,climb:998,startDate:"2018-07-28",startTime:"10:52",fullTime:"10:09:56",cleanTime:"7:40:36",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472291668",searchWords:"Naugolniy Sergiev Posad Yaroslavskoe highway Svatkovo Glebovskoe Pereslavl Zalesskiy Pereslavl-Zalesskiy Nero lake Varus bay Rostov Ustye Ustie river tent palatka bushcraft night",photos:["IMG_20180728_082637.jpg","IMG_20180728_130220_01.jpg","IMG_20180728_145607.jpg","IMG_20180728_170859.jpg","IMG_20180728_193500.jpg","IMG_20180728_194927.jpg"]},{name:"From Zvenigorod to Mozhaysk and Borodino",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Ad9e8826de5283c7bb13aabc4e9e7075db6c3109530abe31303defe776ffe776e&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:100.59,climb:781,startDate:"2018-07-14",startTime:"09:57",fullTime:"9:09:00",cleanTime:"4:52:07",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472291139",searchWords:"Zvenigorod Savvinskaya Sloboda Tuchkovo Mars Moscow river mouth swimming A-108 Betonka Mojaysk Mozhaysk Borodino Borodinskoe pole field museum",photos:["IMG_20180714_171055.jpg","IMG_20180714_192138.jpg"]},{name:"Autumn trip around Moscow",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Ae1726821540dbf35a3103ca223a5e129a1c2364c617f972824a3ee1cc8fbee84&amp;width=100%25&amp;height=382&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:82.76,climb:594,startDate:"2017-09-23",startTime:"13:27",fullTime:"6:53:15",cleanTime:"5:27:55",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472343428",searchWords:"Moscow Strogino Krylatskoe Fili Phili Poklonnaya gora Victory park Gorky Gorkogo",photos:[]},{name:"Journey to the glory of Chester Bennington",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aa1abd56903063854530bf5c50415e036b8debbc4a98932563fbebaa7901b6951&amp;width=100%25&amp;height=600&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:164.75,climb:0,startDate:"2017-07-22",startTime:"11:15",fullTime:"10:50:00",cleanTime:"10:50:00",members:["Lavr","Nick"],stravaLink:"",searchWords:"Zelenograd Lyalovskoe highway Mendeleevo Lyalovo Pokrov Sergiev Posad Bogorodskoe Saburnovo Verbilki Novonikolskoe Zaprudnya Dmitrovskoe Tempy Moscow channel Meldino ferry Spridovo Nizhnie Nijnie Vyselki Staroe Domlino Konakovo night",photos:["IMG_20170722_082508.jpg","IMG_20170722_110859.jpg","IMG_20170722_143709.jpg","IMG_20170722_174029.jpg","IMG_20170722_202800.jpg","IMG_20170723_004534.jpg"]}],de=function(e,t,a,s){var r=e.split(" "),i=t.split(" ").filter((function(e){return/[A-Za-z]+/.test(e)})),n=a.slice(0,4),c=[].concat(Object(L.a)(r),Object(L.a)(i),[n,"mr"],Object(L.a)(s)).sort().map((function(e){return e.toLowerCase()}));return Object(L.a)(new Set(c))},me=function(e,t){return Object(L.a)(t.filter((function(t){return ue(e,t.keywords)})))},ue=function(e,t){for(var a=!1,s=0;s<t.length&&!a;s++)pe(e,t[s])&&(a=!0);return a},pe=function(e,t){return!(t.indexOf(e)<0)},he={_state:{rides:[],processedRides:[],bikers:[],activeRide:null,nextRenderUrl:null,infobar:{isCollapsed:!1,riderCard:{isOpened:!1,rider:null}},navbar:{filterMenuIsOpened:!1,lastSuccededSearchActiveFirstIndex:null,noResultsFound:!1,searchMenuIsOpened:!1,sortMenuIsOpened:!1,output:{filteredBikers:[],searchValue:"",sortParameter:"date",sortFromBiggest:!0}},layout:{modal:{isOpened:!1,src:null,number:null},mobileNavbarIsOpen:!0,mobileNavbarWasTouched:!1,isMobile:!1}},_callSubscriber:function(){},subscribe:function(e){this._callSubscriber=e},_processRides:function(){var e=Object(L.a)(this._state.rides),t=this._state.navbar.output,a=function(a){t.sortFromBiggest?e.sort((function(e,t){return e[a]>t[a]?-1:1})):e.sort((function(e,t){return e[a]>t[a]?1:-1}))};switch(t.sortParameter){default:a("startDate");break;case"distance":a("distance");break;case"time":a("cleanTime");break;case"speed":a("averageSpeed")}var s=e.filter((function(e){return function(e,t){var a,s=Object(ce.a)(t);try{var r=function(){var t=a.value;if(e.members.find((function(e){return e===t})))return{v:!0}};for(s.s();!(a=s.n()).done;){var i=r();if("object"===typeof i)return i.v}}catch(n){s.e(n)}finally{s.f()}return!1}(e,t.filteredBikers)}));s.length>0?(this._state.processedRides=Object(L.a)(s),this._state.activeRide=0):this._state.processedRides=Object(L.a)(e);var r=function(e,t){"string"===typeof e&&(e=e.toLowerCase().split(" "));for(var a=t,s=0;s<e.length;s++)a=me(e[s],a);return a}(this._state.navbar.output.searchValue,Object(L.a)(this._state.processedRides)),i=null;if(r.length)this._state.navbar.lastSuccededSearchActiveFirstIndex=r[0].id,this._state.processedRides=Object(L.a)(r),this._state.nextRenderUrl=this._state.processedRides[0].url,this._state.navbar.noResultsFound=!1;else{i=this._state.navbar.lastSuccededSearchActiveFirstIndex;var n=this._state.rides.findIndex((function(e){return e.id===i}));this._state.processedRides=Object(L.a)(this._state.rides),this._state.nextRenderUrl=this._state.processedRides[n].url,this._state.navbar.noResultsFound=!0}},getState:function(){return this._state},dispatch:function(e){switch(e.type){case"SET-ACTIVE-RIDE":var t=this._state.processedRides.findIndex((function(t){return t.url===e.url}));this._state.activeRide=-1!==t?t:0,this._state.nextRenderUrl=null;break;case"TOGGLE-MOBILE-LAYOUT":this._state.layout.isMobile!==e.mobile&&(this._state.layout.isMobile=e.mobile,this._callSubscriber());break;case"TOGGLE-FILTER-MENU":this._state.navbar.filterMenuIsOpened?this._state.navbar.filterMenuIsOpened=!1:(this._state.navbar.sortMenuIsOpened=!1,this._state.navbar.searchMenuIsOpened=!1,this._state.navbar.filterMenuIsOpened=!0),this._callSubscriber();break;case"TOGGLE-FILTERED-BIKER":var a=this._state.navbar.output.filteredBikers,s=a.findIndex((function(t){return t===e.bikerId}));-1===s?(a.push(e.bikerId),a.sort((function(e,t){return e>t?1:-1}))):a.splice(s,1),this._processRides(),this._callSubscriber();break;case"TOGGLE-SORT-MENU":this._state.navbar.sortMenuIsOpened?this._state.navbar.sortMenuIsOpened=!1:(this._state.navbar.filterMenuIsOpened=!1,this._state.navbar.searchMenuIsOpened=!1,this._state.navbar.sortMenuIsOpened=!0),this._callSubscriber();break;case"TOGGLE-RIDES-SORT":this._state.navbar.output.sortParameter=e.sortParameter,this._state.navbar.output.sortFromBiggest=e.sortFromBiggest,this._state.navbar.sortMenuIsOpened=!1,this._processRides(),this._callSubscriber();break;case"TOGGLE-SEARCH-MENU":this._state.navbar.searchMenuIsOpened?this._state.navbar.searchMenuIsOpened=!1:(this._state.navbar.filterMenuIsOpened=!1,this._state.navbar.sortMenuIsOpened=!1,this._state.navbar.searchMenuIsOpened=!0),this._callSubscriber();break;case"SET-SEARCH-VALUE":this._state.navbar.output.searchValue=e.payload,this._processRides(),this._callSubscriber();break;case"OPEN-RIDER-CARD":this._state.infobar.riderCard.isOpened=!0,this._state.infobar.riderCard.rider=e.payload,this._callSubscriber();break;case"CLOSE-RIDER-CARD":this._state.infobar.riderCard.isOpened=!1,this._state.infobar.riderCard.rider=null,this._callSubscriber();break;case"TOOGLE-INFOBAR-COLLAPSE":this._state.infobar.isCollapsed=!this._state.infobar.isCollapsed,document.querySelector(".infobar").scrollTop=0,this._callSubscriber();break;case"INFOBAR-HEADER-SWIPED":"Up"===e.dir&&this._state.infobar.isCollapsed&&(this._state.infobar.isCollapsed=!1),"Down"===e.dir&&(this._state.infobar.isCollapsed||(this._state.infobar.isCollapsed=!0)),document.querySelector(".infobar").scrollTop=0,this._callSubscriber();break;case"TOGGLE-MOBILE-MENU":this._state.layout.mobileNavbarIsOpen=!this._state.layout.mobileNavbarIsOpen,this._callSubscriber();break;case"TOGGLE-NAVBAR-TOUCHED":this._state.layout.mobileNavbarWasTouched=!0;break;case"OPEN-MODAL-PHOTO":this._state.layout.modal.src=e.src,e.number?this._state.layout.modal.number=e.number:this._state.layout.modal.number=0,this._state.layout.modal.isOpened=!0,this._callSubscriber();break;case"CLOSE-MODAL-PHOTO":this._state.layout.modal.src=null,this._state.layout.modal.alt=null,this._state.layout.modal.isOpened=!1,this._callSubscriber();break;default:console.error("unknown action type: ".concat(e.type))}},initState:function(){(function(){var e=this;this._state.bikers.length=0,oe.forEach((function(t){e._state.bikers=[].concat(Object(L.a)(e._state.bikers),[t])})),this._state.bikers.sort((function(e,t){return e.id>t.id?1:-1}))}).bind(this)(),function(){var e=this;this._state.rides.length=0,le.forEach((function(t){var a,s,r={name:t.name,id:"".concat(t.startDate,"T").concat(t.startTime).match(/[0-9]/gi).join(""),url:"/rides/"+t.startDate,map:t.map,startDate:(a=t.startDate,s=t.startTime,Date.parse("".concat(a,"T").concat(s,":00.000+03:00"))),fullTime:b(t.fullTime),cleanTime:b(t.cleanTime),distance:t.distance,climb:t.climb,averageSpeed:+(t.distance/b(t.cleanTime)*1e3*60*60).toFixed(1),members:t.members,stravaLink:t.stravaLink,keywords:de(t.searchWords,t.name,t.startDate,t.members),photos:Object(L.a)(t.photos).map((function(e){return{url:"./img/photos/".concat(e),alt:"Photo from ".concat(t.name," ride")}}))};e._state.rides=[].concat(Object(L.a)(e._state.rides),[r])})),this._state.rides.sort((function(e,t){return e.id>t.id?-1:1})),this._state.processedRides=Object(L.a)(this._state.rides),this._state.navbar.lastSuccededSearchActiveFirstIndex=this._state.processedRides[0].id}.bind(this)(),this._state.activeRide||(this._state.activeRide=0),W(this._state.layout.isMobile,this.dispatch.bind(this)),this._state.layout.isMobile&&(this._state.infobar.isCollapsed=!0)}},be=he;window.store=he,window.state=he.getState(),be.initState();var ve=function(){n.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(g.a,{children:Object(o.jsx)(se.b,{path:"/",render:function(e){var t=e.location;return Object(o.jsx)(ne,{location:t,store:be})}})})}),document.getElementById("root"))};ve(),be.subscribe(ve)}]),[[56,1,2]]]);
//# sourceMappingURL=main.7df46a59.chunk.js.map