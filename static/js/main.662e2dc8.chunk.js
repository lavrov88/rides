(this.webpackJsonprides=this.webpackJsonprides||[]).push([[0],{31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var s=a(1),i=a.n(s),r=a(19),n=a.n(r),c=(a(31),a(32),a(33),a(34),a(0)),l=function(e){return Object(c.jsxs)("li",{"data-biker-id":e.id,className:"filter_menu_item"+(e.isActive?" active":""),children:[Object(c.jsx)("div",{className:"filter_menu_item__img",children:Object(c.jsx)("img",{src:e.img,alt:e.name})}),Object(c.jsxs)("div",{className:"filter_menu_item__name",children:["Mr. ",e.name]})]})},o=function(e){var t=e.allBikers.map((function(t){return Object(c.jsx)(l,{id:t.id,isActive:(a=t.id,!!e.filteredBikers.find((function(e){return e===a}))),name:t.name,img:t.photoSmall},t.id);var a}));return Object(c.jsx)("ul",{onClick:function(t){if(t.target.closest(".filter_menu_item")){var a={type:"TOGGLE-FILTERED-BIKER",bikerId:t.target.closest(".filter_menu_item").dataset.bikerId};e.dispatch(a)}},className:"filter_menu_items",children:t})},m=(a(36),function(e){return Object(c.jsx)("li",{children:Object(c.jsxs)("div",{"data-sort-parameter":e.type,className:"sort_menu_popup_item".concat(e.isActive?" "+e.isActive:""),children:[Object(c.jsx)("div",{className:"sort_menu_popup_item__name",children:e.name}),Object(c.jsx)("button",{className:"sort_menu_popup_item__btn smallest",children:e.sort2}),Object(c.jsx)("button",{className:"sort_menu_popup_item__btn biggest",children:e.sort1})]})})}),d=function(e){var t=e.sortParameter,a=e.sortFromBiggest,s=function(e){return t===e&&(a?"fromBiggest":"fromSmallest")},i=[{name:"By date:",type:"date",sort1:"Latest",sort2:"Oldest",isActive:s("date")},{name:"By distance:",type:"distance",sort1:"Longest",sort2:"Shortest",isActive:s("distance")},{name:"By average speed:",type:"speed",sort1:"Fastest",sort2:"Slowest",isActive:s("speed")},{name:"By riding time:",type:"time",sort1:"Longest",sort2:"Shortest",isActive:s("time")}];return Object(c.jsx)("ul",{onClick:function(t){if(t.target.classList.contains("sort_menu_popup_item__btn")){var a={type:"TOGGLE-RIDES-SORT",sortParameter:t.target.closest(".sort_menu_popup_item").dataset.sortParameter,sortFromBiggest:t.target.classList.contains("biggest")};e.dispatch(a)}},children:i.map((function(e){return Object(c.jsx)(m,{name:e.name,type:e.type,sort1:e.sort1,sort2:e.sort2,isActive:e.isActive},e.type)}))})},u=function(e){var t=e.navbar.filterMenuIsOpened,a=e.navbar.sortMenuIsOpened;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"manage_list",children:[Object(c.jsxs)("div",{className:"manage_list__global_buttons",children:[Object(c.jsx)("button",{onClick:function(){e.dispatch({type:"TOGGLE-FILTER-MENU"})},className:"manage_list__btn filter_btn",children:"Filter"}),Object(c.jsx)("button",{onClick:function(){e.dispatch({type:"TOGGLE-SORT-MENU"})},className:"manage_list__btn sort_btn",children:"Sort"})]}),Object(c.jsxs)("div",{className:"manage_list__submenu",children:[Object(c.jsx)("div",{className:"navbar_menu_popup filter_menu"+(t?" opened":""),children:Object(c.jsx)(o,{allBikers:e.bikers,filteredBikers:e.navbar.output.filteredBikers,dispatch:e.dispatch})}),Object(c.jsx)("div",{className:"navbar_menu_popup sort_menu"+(a?" opened":""),children:Object(c.jsx)(d,{sortParameter:e.navbar.output.sortParameter,sortFromBiggest:e.navbar.output.sortFromBiggest,dispatch:e.dispatch})})]})]})})},b=(a(37),a(38),function(e){var t=e.split(":");return 1e3*t[0]*60*60+1e3*t[1]*60+1e3*t[2]}),p=function(e){var t=Math.floor(e/1e3/60/60),a=h(Math.floor((e-1e3*t*60*60)/1e3/60));return"".concat(t,":").concat(a)},h=function(e){return+e<10?"0"+e:e},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=[];return a.push(Math.floor(e)+""),a.push((e.toFixed(t)+"").slice(-t)),a},v=function(e,t){return t.filter((function(t){return e.findIndex((function(e){return e===t.name}))>=0}))},_=a(12),f=function(e){return Object(c.jsx)("img",{src:e.photoSmall,alt:e.name,className:"rides_list_item__member_pic".concat(e.long?" long":"")})},O=function(e){var t=e.members;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{children:Object(c.jsx)(f,{photoSmall:t[0].photoSmall,name:t[0].name,long:!0})}),Object(c.jsxs)("div",{children:[Object(c.jsx)(f,{photoSmall:t[1].photoSmall,name:t[1].name}),Object(c.jsx)(f,{photoSmall:t[2].photoSmall,name:t[2].name})]})]})},g=function(e){var t=v(e.members,e.allBikers);return 3===t.length?Object(c.jsx)(O,{members:t}):2===t.length?t.map((function(e){return Object(c.jsx)(f,{photoSmall:e.photoSmall,name:e.name,long:!0},e.name)})):t.map((function(e){return Object(c.jsx)(f,{photoSmall:e.photoSmall,name:e.name},e.name)}))},x=function(e){var t=new Date(e.date),a="date"===e.sortParameter?"".concat(h(t.getDate()),".").concat(h(t.getMonth()+1)):"".concat(h(t.getDate()),".").concat(h(t.getMonth()+1),".").concat(t.getFullYear()),s=function(){var t={};return"date"===e.sortParameter||"distance"===e.sortParameter?(t.value=Math.floor(e.distance),t.unit="km"):"speed"===e.sortParameter?(t.value=j(e.speed)[0]+".",t.decimal=j(e.speed)[1],t.unit="km/h"):"time"===e.sortParameter&&(t.decimal=j(e.time/1e3/60/60)[1]>5?5:"",t.value=Math.floor(e.time/1e3/60/60)+(t.decimal>0?".":""),t.unit="h"),t};return Object(c.jsx)("div",{className:"rides_list_item",children:Object(c.jsx)(_.b,{to:e.url,children:Object(c.jsxs)("div",{className:"rides_list_item__container ".concat(e.active?" active":""),children:[Object(c.jsx)("div",{className:"rides_list_item__left",children:Object(c.jsx)("div",{className:"rides_list_item__members",children:Object(c.jsx)(g,{members:e.members,allBikers:e.allBikers})})}),Object(c.jsxs)("div",{className:"rides_list_item__center",children:[Object(c.jsx)("div",{className:"rides_list_item__name",children:e.name}),Object(c.jsx)("div",{className:"rides_list_item__date",children:a})]}),Object(c.jsx)("div",{className:"rides_list_item__right",children:Object(c.jsxs)("div",{className:"rides_list_item__distance",children:[Object(c.jsxs)("div",{className:"rides_list_item__distance_num",children:[s().value,Object(c.jsx)("span",{className:"decimal",children:s().decimal})]}),Object(c.jsx)("div",{className:"rides_list_item__distance_unit",children:s().unit})]})})]})})})},k=function(e){return Object(c.jsx)("div",{className:"header_logo",children:Object(c.jsx)("h1",{children:"Rides history"})})},N=function(e){var t,a=function(e,t,a){switch(a){case"date":var s=new Date(e.startDate),i=t?new Date(t.startDate):null;if(!i)return s.getFullYear();if(i.getFullYear()!==s.getFullYear())return s.getFullYear();break;case"distance":if(!t)return e.distance<50?"<50":">100";if(t.distance<50&&e.distance>50||t.distance>100&&e.distance<100)return"50-100";if(t.distance>50&&e.distance<50)return"<50";if(t.distance<100&&e.distance>100)return">100";break;case"speed":var r=e.distance/e.cleanTime*1e3*60*60,n=t?t.distance/t.cleanTime*1e3*60*60:null;if(!t)return r<15?"<15":">18";if(n<15&&r>15||n>18&&r<18)return"15-18";if(n>15&&r<15)return"<15";if(n<18&&r>18)return">18";break;case"time":var c=e.cleanTime/1e3/60/60,l=t?t.cleanTime/1e3/60/60:null;if(!t)return c<4?"<4":">7";if(l<4&&c>4||l>7&&c<7)return"4-7";if(l>4&&c<4)return"<4";if(l<7&&c>7)return">7";break;default:return null}}(e.currEl,e.prevEl,e.sortParameter),s="date"===(t=e.sortParameter)?null:"distance"===t?"km":"speed"===t?"km/h":"time"===t?"h":void 0;return a?Object(c.jsxs)("div",{className:"rides_list_separator",children:[a," ",Object(c.jsx)("span",{className:"rides_list_separator__unit",children:s})]}):null},T=function(e){return e.state.processedRides.map((function(t,a,s){return Object(c.jsxs)("li",{children:[Object(c.jsx)(N,{currEl:t,prevEl:s[a-1],sortParameter:e.state.navbar.output.sortParameter}),Object(c.jsx)(x,{id:t.id,url:t.url,name:t.name,date:t.startDate,distance:t.distance,speed:t.averageSpeed,time:t.cleanTime,members:t.members,allBikers:e.state.bikers,sortParameter:e.state.navbar.output.sortParameter,active:e.state.activeRide===a},t.id)]},t.url)}))},L=function(e){return Object(c.jsxs)("div",{className:"navbar",children:[Object(c.jsx)(k,{}),Object(c.jsx)(u,{bikers:e.state.bikers,navbar:e.state.navbar,dispatch:e.dispatch}),Object(c.jsx)("div",{className:"riders_list_wrapper",children:Object(c.jsx)("ul",{onClick:function(){e.dispatch({type:"TOGGLE-MOBILE-MENU"})},className:"rides_list",children:Object(c.jsx)(T,{state:e.state})})}),Object(c.jsx)("div",{className:"right_border"})]})},y=a(7),S=a(9),E=(a(44),a(45),function(e){return Object(c.jsxs)("div",{className:"ride_member_item",children:[Object(c.jsx)("img",{src:e.photoSmall,alt:"Mr. ".concat(e.name),className:"ride_member_item__img"}),Object(c.jsxs)("div",{className:"ride_member_item__name",children:["Mr. ",e.name]})]})}),M=function(e){var t=e.members.map((function(e){return Object(c.jsx)(E,{name:e.name,photoSmall:e.photoSmall},e.id)}));return Object(c.jsxs)("div",{className:"ride_members",children:[Object(c.jsx)("h3",{children:"Members:"}),Object(c.jsx)("ul",{className:"ride_members_items",children:t})]})},I=(a(46),function(e){var t,a;return e.decimal?(t=j(e.value,e.decimal)[0]+".",a=j(e.value,e.decimal)[1]):(t=e.value,a=""),Object(c.jsxs)("li",{className:"ride_indicators_item",children:[Object(c.jsxs)("div",{className:"ride_indicators_item__value",children:[t,Object(c.jsx)("span",{className:"decimal",children:a}),Object(c.jsx)("span",{className:"ride_indicators_item__unit",children:e.unit?" "+e.unit:""})]}),Object(c.jsx)("div",{className:"ride_indicators_item__name",children:e.name})]})}),w=function(e){var t=new Date(e.ride.startDate),a="".concat(t.getHours(),":").concat(h(t.getMinutes()));return Object(c.jsxs)("div",{className:"ride_indicators",children:[Object(c.jsxs)("ul",{className:"ride_indicators__group group_1",children:[Object(c.jsx)(I,{value:e.ride.distance,decimal:2,unit:"km",name:"Total distance"}),Object(c.jsx)(I,{value:e.ride.climb,unit:"m",name:"Climb"}),Object(c.jsx)(I,{value:e.ride.averageSpeed,decimal:1,unit:"km/h",name:"Average speed"})]}),Object(c.jsxs)("ul",{className:"ride_indicators__group group_2",children:[Object(c.jsx)(I,{value:a,name:"Start time"}),Object(c.jsx)(I,{value:p(e.ride.fullTime),name:"Full race time"}),Object(c.jsx)(I,{value:p(e.ride.cleanTime),name:"Only riding time"})]})]})},D=(a(47),function(e){return Object(c.jsx)("li",{className:"photo_item",children:Object(c.jsx)("div",{className:"photo_item__photo",children:e.url})})}),R=function(e){var t=e.photos.map((function(e){return Object(c.jsx)(D,{url:e},e)}));return Object(c.jsxs)("div",{className:"ride_gallery",children:[Object(c.jsx)("h3",{children:"Ride gallery"}),Object(c.jsx)("ul",{className:"ride_gallery_items",children:t})]})},A=a(14),B=function(e){var t=new Date(e.date),a="".concat(h(t.getDate()),".").concat(h(t.getMonth()+1),".").concat(t.getFullYear()),s=Object(A.useSwipeable)({onSwiped:function(t){if(e.isMobile){var a={type:"INFOBAR-HEADER-SWIPED",dir:t.dir};e.dispatch(a)}},preventDefaultTouchmoveEvent:!0});return Object(c.jsxs)("div",Object(S.a)(Object(S.a)({},s),{},{onClick:function(t){if(!t.target.closest("a")&&e.isMobile){e.dispatch({type:"TOOGLE-INFOBAR-COLLAPSE"})}},className:"ride_header",children:[Object(c.jsx)("div",{className:"ride_header__name",children:Object(c.jsx)("h2",{children:e.name})}),Object(c.jsxs)("div",{className:"ride_header__subheader",children:[Object(c.jsx)("div",{className:"ride_header_date",children:a}),Object(c.jsxs)("a",{href:e.strava,target:"_blank",rel:"noreferrer",className:"strava_link",children:[Object(c.jsx)("img",{src:"/img/strava.png",alt:"strava",className:"strava_logo"}),Object(c.jsx)("div",{className:"strava_text",children:"This ride in Strava"})]})]})]}))},P=function(e){var t=e.isCollapsed;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(B,{name:e.ride.name,date:e.ride.startDate,isMobile:e.isMobile,strava:e.ride.stravaLink,dispatch:e.dispatch}),Object(c.jsxs)("div",{className:"infobar"+(t?" collapsed":""),children:[Object(c.jsx)(B,{name:e.ride.name,date:e.ride.startDate,isMobile:e.isMobile,strava:e.ride.stravaLink,dispatch:e.dispatch}),Object(c.jsx)(M,{members:e.members}),Object(c.jsx)(w,{ride:e.ride}),Object(c.jsx)(R,{photos:e.ride.photos})]})]})},C=function(e){var t=e.state.processedRides[e.state.activeRide],a=t.members,s=Object(y.a)(e.state.bikers),i=v(a,s),r=e.state.layout.isMobile,n=e.state.infobar.isCollapsed;return Object(c.jsx)(P,{ride:t,members:i,dispatch:e.dispatch,isCollapsed:n,isMobile:r})},F=(a(48),function(e){return Object(c.jsx)("button",{onClick:function(t){e.dispatch({type:"TOOGLE-INFOBAR-COLLAPSE"})},className:"collapse_btn"+(e.isCollapsed?" collapsed":""),children:Object(c.jsx)("div",{className:"collapse_arrow"})})}),G=function(e,t){return!!function(e,t){return-1!==t.findIndex((function(t){return t===e}))}(e,t.map((function(e){return e.url})))},U=function(e,t){var a={type:"TOGGLE-MOBILE-LAYOUT"};if(window.innerWidth<960){if(e)return;a.mobile=!0,t(a)}else{if(!e)return;a.mobile=!1,t(a)}},Y=(a(49),function(e){return Object(c.jsx)("button",{className:"burger_btn",children:Object(c.jsx)("span",{className:"burger_btn__span"})})}),H=function(e){var t=function(){e.dispatch({type:"TOGGLE-MOBILE-MENU"})};return Object(c.jsxs)("div",{className:"mobile_header",children:[Object(c.jsx)("div",{onClick:t,children:Object(c.jsx)(Y,{})}),Object(c.jsx)("div",{onClick:t,children:Object(c.jsx)(k,{})})]})},K=(a(50),function(e){var t=e.state.layout.mobileNavbarIsOpen,a=Object(A.useSwipeable)({onSwipedLeft:function(t){e.dispatch({type:"TOGGLE-MOBILE-MENU"})}});return Object(c.jsx)("div",Object(S.a)(Object(S.a)({},a),{},{className:"mobile_navbar"+(t?" opened":""),children:Object(c.jsx)(L,{state:e.state,dispatch:e.dispatch})}))}),q=a(22),J=a(23),V=a(26),W=a(25),Z=(a(51),function(e){var t=document.querySelector(".map_container").scrollHeight,a=e.map.replace(/height=\d+/gm,"height=".concat(t)).replace(/.+src="|"><\/script>/gm,""),s=document.querySelector(".map");if(s.innerHTML="",a.match(/https:\/\/api-maps\.yandex\.ru.+scroll=true/gm)){var i=document.createElement("script");i.src=a,i.async=!0,s.appendChild(i)}else{var r=document.createElement("div");r.classList.add("map_error_wrapper"),r.innerHTML="<div>Map for this ride is not ready yet...</div>",s.appendChild(r)}}),z=function(e){Object(V.a)(a,e);var t=Object(W.a)(a);function a(){return Object(q.a)(this,a),t.apply(this,arguments)}return Object(J.a)(a,[{key:"componentDidMount",value:function(){Z(this.props)}},{key:"componentDidUpdate",value:function(){Z(this.props)}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"map_container",children:[Object(c.jsx)("div",{className:"map_left_gradient"}),Object(c.jsx)("div",{className:"map"})]})}}]),a}(i.a.PureComponent),Q=z,X=a(2);var $=function(e){var t=e.store.getState(),a=e.store.dispatch.bind(e.store),s=e.location.pathname;if(!G(s,t.rides,a))return Object(c.jsx)(X.a,{to:t.processedRides[0].url});a({type:"SET-ACTIVE-RIDE",url:s}),window.onresize=function(){return U(t.layout.isMobile,a)};var i=t.activeRide,r=t.processedRides[i].map;return t.layout.isMobile?Object(c.jsxs)("div",{className:"App mobile",children:[Object(c.jsx)(H,{dispatch:a}),Object(c.jsxs)("div",{className:"mobile_main",children:[Object(c.jsx)("div",{className:"mobile_map",children:Object(c.jsx)(Q,{map:r})}),Object(c.jsx)("div",{className:"mobile_infobar"+(t.infobar.isCollapsed?" collapsed":""),children:Object(c.jsx)(C,{state:t,dispatch:a})}),Object(c.jsx)(K,{state:t,dispatch:a})]})]}):Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)("div",{className:"rides_menu_container",children:[Object(c.jsx)(L,{state:t,dispatch:a}),Object(c.jsx)(C,{state:t}),Object(c.jsx)(F,{isCollapsed:t.infobar.isCollapsed,dispatch:a})]}),Object(c.jsx)(Q,{map:r})]})},ee=a(24),te=[{name:"Lavr",id:"Lavr",photoSmall:"/img/bikers/Lavr.jpg",photoLarge:"urlAlLarge"},{name:"Andy",id:"Andy",photoSmall:"/img/bikers/Andy.jpg",photoLarge:"url"},{name:"Nick",id:"Nick",photoSmall:"/img/bikers/Nick.jpg",photoLarge:"url"},{name:"Paul",id:"Paul",photoSmall:"/img/bikers//Paul.jpg",photoLarge:"urlPlLarge"},{name:"Serg",id:"Serg",photoSmall:"/img/bikers/Serg.jpg",photoLarge:"urlPlLarge"}],ae=[{name:"Konakovo - Solnechnogorsk",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A8472ba15980b6a771535d7df0fde7022adbe7e49420c0284e9b5fa633d4e3026&amp;width=100%25&amp;height=507&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:90.61,climb:539,startDate:"2021-08-15",startTime:"12:13",fullTime:"9:12:25",cleanTime:"4:53:44",members:["Lavr","Paul","Nick","Andy"],stravaLink:"https://strava.com",photos:["url1","url2","url3","url4"]},{name:"Through Malino's jungle",map:'<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A502b1ca7d98ef2d4a8c5a08866594227109af4d9af79bab4d096dbdde10f8025&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"><\/script>',distance:28.37,climb:226,startDate:"2021-07-25",startTime:"14:35",fullTime:"3:51:03",cleanTime:"2:03:50",members:["Lavr","Paul","Nick","Andy"],stravaLink:"https://strava.com",photos:["url1","url2","url3","url4"]},{name:"To Pyatnitsa through Povarovo",map:"string",distance:40.27,climb:1541,startDate:"2021-06-20",startTime:"14:35",fullTime:"4:04:06",cleanTime:"2:16:37",members:["Lavr","Nick","Andy"],stravaLink:"https://strava.com",photos:["url1","url2","url3","url4"]},{name:"Dirty journey to Pavlovskaya Sloboda",map:"string",distance:63.97,climb:465,startDate:"2021-05-07",startTime:"11:14",fullTime:"8:34:21",cleanTime:"5:24:26",members:["Lavr","Nick","Paul","Serg"],stravaLink:"https://strava.com",photos:["url1","url2","url3","url4"]},{name:"Iksha - Pushkino - Dolgoprudniy",map:"string",distance:87.73,climb:2271,startDate:"2021-05-02",startTime:"09:20",fullTime:"8:16:09",cleanTime:"5:45:04",members:["Lavr","Nick","Serg"],stravaLink:"https://strava.com",photos:["url1","url2","url3","url4"]},{name:"Ring through Moscow and Krasnogorsk",map:"string",distance:150.56,climb:907,startDate:"2020-07-25",startTime:"10:55",fullTime:"12:41:55",cleanTime:"9:27:53",members:["Lavr","Andy"],stravaLink:"https://strava.com",photos:["url1","url2","url3","url4"]},{name:"Solnechnogorsk - Yakhroma - Zelenograd",map:"string",distance:112.78,climb:1267,startDate:"2020-07-05",startTime:"09:57",fullTime:"11:48:59",cleanTime:"7:13:28",members:["Lavr","Nick","Andy"],stravaLink:"https://strava.com",photos:["url1","url2","url3","url4"]},{name:"Klin - Volokolamsk & Snegiri - Zelenograd",map:"string",distance:91.73,climb:843,startDate:"2020-06-13",startTime:"11:03",fullTime:"7:17:26",cleanTime:"4:44:47",members:["Lavr","Nick","Andy"],stravaLink:"https://strava.com",photos:["url1","url2","url3","url4"]},{name:"From Tver to Konarovo across Saint Places",map:"string",distance:79.3,climb:225,startDate:"2019-08-25",startTime:"09:18",fullTime:"5:26:11",cleanTime:"4:36:11",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472204842",photos:["url1","url2","url3","url4"]},{name:"To the back side of Istra",map:"string",distance:139.65,climb:1141,startDate:"2019-05-19",startTime:"11:36",fullTime:"9:06:00",cleanTime:"7:50:59",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472205448",photos:["url1","url2","url3","url4"]},{name:"Assault attempt of under constructed CKAD",map:"string",distance:30.29,climb:297,startDate:"2019-04-20",startTime:"14:18",fullTime:"2:11:50",cleanTime:"1:57:31",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472268451",photos:["url1","url2","url3","url4"]},{name:"Hike to Yaroslavl, day 2",map:"string",distance:48.3,climb:239,startDate:"2018-07-29",startTime:"08:38",fullTime:"3:16:25",cleanTime:"2:45:08",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472290953",photos:["url1","url2","url3","url4"]},{name:"Hike to Yaroslavl, day 1",map:"string",distance:143.54,climb:998,startDate:"2018-07-28",startTime:"10:52",fullTime:"10:09:56",cleanTime:"7:40:36",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472291668",photos:["url1","url2","url3","url4"]},{name:"From Zvenigorod to Mozhaysk and Borodino",map:"string",distance:100.59,climb:781,startDate:"2018-07-14",startTime:"09:57",fullTime:"9:09:00",cleanTime:"4:52:07",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472291139",photos:["url1","url2","url3","url4"]},{name:"Autumn trip around Moscow",map:"string",distance:82.76,climb:594,startDate:"2017-09-23",startTime:"13:27",fullTime:"6:53:15",cleanTime:"5:27:55",members:["Lavr","Nick"],stravaLink:"https://www.strava.com/activities/4472343428",photos:["url1","url2","url3","url4"]},{name:"Journey to the glory of Chester Bennington",map:"string",distance:164.75,climb:0,startDate:"2017-07-22",startTime:"11:15",fullTime:"10:50:00",cleanTime:"10:50:00",members:["Lavr","Nick"],stravaLink:"",photos:["url1","url2","url3","url4"]}],se={_state:{rides:[],processedRides:[],bikers:[],activeRide:null,infobar:{isCollapsed:!1},navbar:{filterMenuIsOpened:!1,sortMenuIsOpened:!1,output:{sortParameter:"date",sortFromBiggest:!0,filteredBikers:[]}},layout:{mobileNavbarIsOpen:!1,isMobile:!1}},_callSubscriber:function(){},subscribe:function(e){this._callSubscriber=e},_processRides:function(){var e=Object(y.a)(this._state.rides),t=this._state.navbar.output,a=function(a){t.sortFromBiggest?e.sort((function(e,t){return e[a]>t[a]?-1:1})):e.sort((function(e,t){return e[a]>t[a]?1:-1}))};switch(t.sortParameter){default:a("startDate");break;case"distance":a("distance");break;case"time":a("cleanTime");break;case"speed":a("averageSpeed")}e=e.filter((function(e){return function(e,t){var a,s=Object(ee.a)(t);try{var i=function(){var t=a.value;if(e.members.find((function(e){return e===t})))return{v:!0}};for(s.s();!(a=s.n()).done;){var r=i();if("object"===typeof r)return r.v}}catch(n){s.e(n)}finally{s.f()}return!1}(e,t.filteredBikers)})),this._state.processedRides=Object(y.a)(e)},getState:function(){return this._state},dispatch:function(e){switch(e.type){case"SET-ACTIVE-RIDE":var t=this._state.processedRides.findIndex((function(t){return t.url===e.url}));this._state.activeRide=-1!==t?t:0;break;case"TOGGLE-MOBILE-LAYOUT":this._state.layout.isMobile=e.mobile,this._callSubscriber();break;case"TOGGLE-FILTER-MENU":this._state.navbar.filterMenuIsOpened?this._state.navbar.filterMenuIsOpened=!1:(this._state.navbar.sortMenuIsOpened=!1,this._state.navbar.filterMenuIsOpened=!0),this._callSubscriber();break;case"TOGGLE-FILTERED-BIKER":var a=this._state.navbar.output.filteredBikers,s=a.findIndex((function(t){return t===e.bikerId}));-1===s?(a.push(e.bikerId),a.sort((function(e,t){return e>t?1:-1}))):a.length>1&&a.splice(s,1),this._processRides(),this._callSubscriber();break;case"TOGGLE-SORT-MENU":this._state.navbar.sortMenuIsOpened?this._state.navbar.sortMenuIsOpened=!1:(this._state.navbar.filterMenuIsOpened=!1,this._state.navbar.sortMenuIsOpened=!0),this._callSubscriber();break;case"TOGGLE-RIDES-SORT":this._state.navbar.output.sortParameter=e.sortParameter,this._state.navbar.output.sortFromBiggest=e.sortFromBiggest,this._state.navbar.sortMenuIsOpened=!1,this._processRides(),this._callSubscriber();break;case"TOOGLE-INFOBAR-COLLAPSE":this._state.infobar.isCollapsed?this._state.infobar.isCollapsed=!1:this._state.infobar.isCollapsed=!0,document.querySelector(".infobar").scrollTop=0,this._callSubscriber();break;case"INFOBAR-HEADER-SWIPED":"Up"===e.dir&&this._state.infobar.isCollapsed&&(this._state.infobar.isCollapsed=!1),"Down"===e.dir&&(this._state.infobar.isCollapsed||(this._state.infobar.isCollapsed=!0)),document.querySelector(".infobar").scrollTop=0,this._callSubscriber();break;case"TOGGLE-MOBILE-MENU":this._state.layout.mobileNavbarIsOpen?this._state.layout.mobileNavbarIsOpen=!1:this._state.layout.mobileNavbarIsOpen=!0,this._callSubscriber();break;default:console.error("unknown action type: ".concat(e.type))}},initState:function(){(function(){var e=this;this._state.bikers.length=0,te.forEach((function(t){e._state.bikers=[].concat(Object(y.a)(e._state.bikers),[t])})),this._state.bikers.sort((function(e,t){return e.id>t.id?1:-1})),this._state.navbar.output.filteredBikers=Object(y.a)(this._state.bikers.map((function(e){return e.id})))}).bind(this)(),function(){var e=this;this._state.rides.length=0,ae.forEach((function(t){var a,s,i={name:t.name,id:"".concat(t.startDate,"T").concat(t.startTime).match(/[0-9]/gi).join(""),url:"/rides/"+t.startDate,map:t.map,startDate:(a=t.startDate,s=t.startTime,Date.parse("".concat(a,"T").concat(s,":00.000+03:00"))),fullTime:b(t.fullTime),cleanTime:b(t.cleanTime),distance:t.distance,climb:t.climb,averageSpeed:+(t.distance/b(t.cleanTime)*1e3*60*60).toFixed(1),members:t.members,stravaLink:t.stravaLink,photos:Object(y.a)(t.photos)};e._state.rides=[].concat(Object(y.a)(e._state.rides),[i])})),this._state.rides.sort((function(e,t){return e.id>t.id?-1:1})),this._state.processedRides=Object(y.a)(this._state.rides)}.bind(this)(),this._state.activeRide||(this._state.activeRide=0),U(this._state.layout.isMobile,this.dispatch.bind(this)),this._state.layout.isMobile&&(this._state.infobar.isCollapsed=!0)}},ie=se;window.store=se,window.state=se.getState(),ie.initState();var re=function(){n.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(_.a,{children:Object(c.jsx)(X.b,{path:"/",render:function(e){var t=e.location;return Object(c.jsx)($,{location:t,store:ie})}})})}),document.getElementById("root"))};re(),ie.subscribe(re)}},[[52,1,2]]]);
//# sourceMappingURL=main.662e2dc8.chunk.js.map